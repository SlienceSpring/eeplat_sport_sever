Toolbar=function(a){this.renderTo=a.renderTo;this.border=a.border||"bottom";this.items=a.items||[];this.filters=a.filters||[];this.active=a.active;this.azable=a.azable;this.azparam=$("#"+a.azparam);this.renderContent="string"==typeof this.renderTo?$("#"+this.renderTo):this.renderTo;this.azs="ALL 0~9 A B C D E F G H I J K L M N O P Q R S T U V W X Y Z".split(" ")};
Toolbar.prototype={init:function(){this.toolbar=$(document.createElement("DIV"));this.toolbar.addClass("toolbar");"none"!=this.border&&this.toolbar.css("border","solid 1px #8DB2E3");this.toolbar.appendTo(this.renderContent);this.toolbar_table=$(document.createElement("TABLE"));this.toolbar_table.appendTo(this.toolbar);this.toolbar_table_row=$(document.createElement("TR"));this.toolbar_table_row.appendTo(this.toolbar_table);var a=$(document.createElement("TD"));a.css("width",2);a.appendTo(this.toolbar_table_row);
for(a=0;a<this.items.length;a++)this.add(this.items[a]);for(a=0;a<this.filters.length;a++)this.addFilter(this.filters[a])},render:function(){this.init()},genAZ:function(){this.azable&&(this.createAZFix(),this.createAZButton())},add:function(a){var b=this;if("-"==a){var c=$(document.createElement("TD"));c.appendTo(this.toolbar_table_row);a=$(document.createElement("SPAN"));a.addClass("spacer");a.appendTo(c)}else if("button"==a.type||"az"==a.type){c=$(document.createElement("TD"));c.appendTo(this.toolbar_table_row);
var d=$(document.createElement("TABLE"));d.attr("cellPadding",0);d.attr("cellSpacing",0);d.appendTo(c);c=$(document.createElement("TR"));c.appendTo(d);var e=$(document.createElement("TD"));e.addClass("b_left");var f=$(document.createElement("TD"));f.addClass("b_center");var g=$(document.createElement("BUTTON"));g.text(a.text);a.bodyStyle&&g.addClass(a.bodyStyle);g.appendTo(f);a.title&&g.attr("title",a.title);!1==/^[u4E00-u9FA5]/.test(a.text)&&$.browser.msie&&("6.0"==$.browser.version?g.css("padding-top",
"2px"):g.css("padding-top","4px"));var h=$(document.createElement("TD"));h.addClass("b_right");c.append(e);c.append(f);c.append(h);"button"==a.type?"F"!=a.useable?(a.handler&&c.bind("click",a.handler),c.bind("mouseover",function(){var a=$(this);a.addClass("over");a.bind("mouseout",function(){a.removeClass("over");a.removeClass("down")})}),c.bind("mousedown",function(){var a=$(this);a.addClass("down");a.bind("mouseup",function(){a.removeClass("down");a.unbind("mouseup")})})):(c.children("TD").each(function(){$(this).css("cursor",
"default")}),g.attr("disabled",!0)):(c.bind("mouseover",function(){var a=$(this);a.addClass("over");a.bind("mouseout",function(){a.removeClass("over");a.removeClass("down")})}),c.bind("mousedown",function(){var a=$(this);a.addClass("down");a.bind("mouseup",function(){a.removeClass("down");a.unbind("mouseup")})}),d.attr("title","\u5feb\u901f\u8fc7\u6ee4\u7b2c\u4e00\u4e2a\u5b57\u6bb5"),d.attr("id","toolbar_az"),c.bind("click",function(){b.showAZ(b)}))}else"textfield"==a.type?(c=$(document.createElement("TD")),
c.appendTo(this.toolbar_table_row),d=$(document.createElement("INPUT")),d.attr("id",a.id),d.attr("name",a.id),d.attr("type","text"),d.addClass("textfield"),d.appendTo(c),a.bodyStyle&&d.addClass(a.bodyStyle),a.handler&&d.bind("click",a.handler)):(c=$(document.createElement("TD")),c.appendTo(this.toolbar_table_row),d=$(document.createElement("TABLE")),d.attr("cellPadding",0),d.attr("cellSpacing",0),d.appendTo(c),c=$(document.createElement("TR")),c.appendTo(d),d=$(document.createElement("TD")),d.appendTo(c),
"string"==typeof a.html?d.html(a.html):d.append(a.html))},addFilter:function(a){var b=this;if(0==$("#filterTable").length){var c=$(document.createElement("TABLE"));c.attr("cellPadding",0);c.attr("cellSpacing",0);c.attr("id","filterTable");c.addClass("filterTable");c.appendTo(this.toolbar);var d=$(document.createElement("TR"));d.addClass("over");d.appendTo(c);this.filterLeft=$(document.createElement("TD"));this.filterLeft.addClass("b_left");this.filterRight=$(document.createElement("TD"));this.filterRight.addClass("b_right");
d.append(this.filterLeft);d.append(this.filterRight)}0<$("#filterTable").find(".b_center").length&&(c=$(document.createElement("TD")),this.filterRight.before(c),d=$(document.createElement("SPAN")),d.addClass("filter-spacer"),d.appendTo(c));c=$(document.createElement("TD"));c.attr("id",a.id);c.addClass("b_center");d=$(document.createElement("BUTTON"));d.text(a.text);a.title&&d.attr("title",a.title);a.bodyStyle&&d.addClass(a.bodyStyle);d.bind("click",function(){b.activeFilter($(this).parent().attr("id"))});
a.handler&&d.bind("click",a.handler);d.appendTo(c);this.filterRight.before(c);a.id==this.active&&this.activeFilter(a.id);this.updateFilterBorder()},activeFilter:function(a){a&&1==$("#"+a).length&&($("#filterTable").find(".border-center-active").each(function(){$(this).removeClass("border-center-active")}),$("#"+a).addClass("border-center-active"),this.updateFilterBorder())},updateFilterBorder:function(){this.filterLeft.next().hasClass("border-center-active")?this.filterLeft.addClass("border-left-active"):
this.filterLeft.removeClass("border-left-active");this.filterRight.prev().hasClass("border-center-active")?this.filterRight.addClass("border-right-active"):this.filterRight.removeClass("border-right-active")},createAZFix:function(){var a=$("#toolbar_az");this.az_fix=$(document.createElement("TABLE"));this.az_fix.css("left",a.offset().left-2);"bottom"==this.border?(this.az_fix.addClass("az-fix"),this.az_fix.css("top",a.offset().top+a.get(0).offsetHeight-2)):(this.az_fix.addClass("az-fix-2"),this.az_fix.css("top",
a.offset().top-3));this.az_fix.attr("cellSpacing",0);this.az_fix.attr("cellPadding",0);this.az_fix.appendTo($(document.body));var b=$(document.createElement("TR"));b.appendTo(this.az_fix);var c=$(document.createElement("TD"));c.addClass("left");var d=$(document.createElement("TD"));d.css("width",a.get(0).offsetWidth-4);d.addClass("center");a=$(document.createElement("TD"));a.addClass("right");c.appendTo(b);d.appendTo(b);a.appendTo(b)},createAZButton:function(){var a=this;this.azbar=$(document.createElement("DIV"));
this.azbar.addClass("az");this.azbar.css("border-"+this.border,"solid 1px #8DB2E3");"bottom"==this.border?this.azbar.css("top",this.toolbar.offset().top+this.toolbar.height()+1):this.azbar.css("top",this.toolbar.offset().top-this.toolbar.height()-2);this.azbar.appendTo($(document.body));var b=$(document.createElement("TABLE"));b.appendTo(this.azbar);b.attr("cellSpacing",0);b.attr("cellPadding",0);var c=$(document.createElement("TR"));c.appendTo(b);for(b=0;b<this.azs.length;b++){var d=$(document.createElement("TD"));
"ALL"==this.azs[b]?d.attr("title","\u6d4f\u89c8\u5168\u90e8\u8bb0\u5f55"):"0~9"==this.azs[b]?d.attr("title","\u4ee5\u6570\u5b570~9\u4e3a\u9996\u5b57\u7b26\u6d4f\u89c8\u8bb0\u5f55"):d.attr("title","\u4ee5\u5b57\u6bcd/\u62fc\u97f3\u4e3a\u9996\u5b57\u7b26\u6d4f\u89c8\u8bb0\u5f55");d.text(this.azs[b]);this.azs[b]==this.azparam.val()&&d.addClass("tdovered");d.bind("click",function(b){return function(){a.azparam.val(a.azs[b]);var c=a.azparam.parents("form");window.location=c.attr("action").split("?")[0]+
"?azparam="+a.azs[b]}}(b));d.hasClass("tdovered")||(d.bind("mouseover",function(){$(this).addClass("tdover")}),d.bind("mouseout",function(){$(this).removeClass("tdover")}));d.appendTo(c)}},showAZ:function(a){"none"==a.azbar.css("display")?($("#toolbar_az").addClass("over"),a.az_fix.fadeIn(100,function(){a.azbar.fadeIn(100)})):($("#toolbar_az").removeClass("over"),a.azbar.fadeOut(100,function(){a.az_fix.fadeOut(100)}))}};var sc_page_no=1,sc_page_size=100,objGlobals;
function createDmLayer(a,b,c,d,e,f,g){objGlobals=a;var h=c,k=$(a).attr("inputconfig"),m=$(a).attr("linkformid");if(null!=k&&null!=m&&(m=$("#"+m).val(),null!=m&&0<k.indexOf(";"))){var r=k.split(";");if(null!=r&&0<r.length)for(k=0;k<r.length;k++){var D=r[k];0<D.indexOf(",")&&(D=D.split(","),m==D[0]&&(h=D[1]))}}null!=e&&(sc_page_no=e);null!=f&&(sc_page_size=f);f=encodeURIComponent(escape(objGlobals.value));var w="";null!=b&&"onlyvalue"!=b&&(w=$("#"+b).serialize());if("onlyvalue"!=b)try{var E=$(a).parent().parent().find(".resultlistpopup");
1==E.length&&(E=$(a).parent().parent().parent().find(".resultlistpopup"));var F=!0;1<E.length&&E.each(function(b){F&&($(E.get(b)).attr("id")==$(a.previousSibling).attr("id")&&(F=!1),b=$(E.get(b)),w=w+"&"+b.attr("name")+"="+b.val())})}catch(O){alert(O)}if(null!=g)for(b=g.split(","),k=0;k<b.length;k++)g=b[k],""!=g&&(null!=$(g)&&($(g).value=""),null!=$(g)&&null!=$(g).previousSibling&&($(g).previousSibling.value=""));w=urlCodeDeal(w);h=globalURL+"servicecontroller?contextServiceName="+h+"&callType=ss";
1E3>sc_page_size&&(h=h+"&sc_page_no="+sc_page_no+"&sc_page_size="+sc_page_size);$.post(h+"&"+d+"="+f+"&"+w,function(b){if(null!=b&&null!=b.items&&0<b.items.length){var f=250,g=20*(b.items.length+2)+15;f>g&&(f=g);$("#dmLayer").css("height",f);setTip(a,f);f='<div><table id="dmLayerTable" class="dmBody" height="'+(g-25)+'px" style="word-break:keep-all;margin-left:5px;margin-top:5px;font-size:9pt;cursor:pointer"  border="0" cellpadding="0" cellspacing="0"><tr height="20px"  codeID="" ><td colspan="2" style="padding: 1px;" ></td></tr>';
for(g=0;g<b.items.length;g++)var h=b.items[g],f=f+'<tr codeID="'+h.objuid+'" height="20px"  > <td colspan="2" nowrap="nowrap" style="padding: 1px;" title="'+h.name+'">'+h.name+"</td> </tr> ";f+="</table>";1==e&&g<sc_page_size||(f+='<table  height="20" style="margin-left:5px;width:90%;font-size:9pt;cursor:pointer"  border="0" cellpadding="0" cellspacing="0"><tr>',1<e&&(f=f+'<td  align="center" class="dmLayerPageCss"><span onClick="pageUp(\''+c+"','"+d+"','"+sc_page_no+"','"+sc_page_size+"')\">\u4e0a\u4e00\u9875</span></td>"),
g==sc_page_size&&(f=f+'<td  align="left" class="dmLayerPageCss" onclick="pageDown(\''+c+"','"+d+"','"+sc_page_no+"','"+sc_page_size+"')\">\u4e0b\u4e00\u9875</td>"),f+="</tr></table>");f+="</div>";$("#dmLayer").empty().append(f);b=$("#dmLayerTable").width();144>b?($("#dmLayerTable").css("width",164),b=164):b+=20;$("#dmLayer").css("width",b);$(".dmBody tr").bind("click",selInputValue).bind("mouseover",function(){$(this).find("td").addClass("dmLayerMouseOverCss")}).bind("mouseout",function(){$(this).find("td").removeClass("dmLayerMouseOverCss")});
$(".dmBody tr:even").addClass("dmLayerEven")}else"false"==b.success&&-1!=b.msg.indexOf("err001")?window.location=globalURL+"web/default/logoff.jsp":($("#dmLayer").css("width",164),$("#dmLayer").empty().append("&nbsp;&nbsp;&nbsp;&nbsp;"+EELang.noData+"!").show())})}function popupHide2(){$("#dmLayer").hide();$(document).unbind("click",popupHide2);$(document).unbind("mouseover",popupHide)}function popupHide(){"none"!=$("#dmLayer").css("display")&&$(document).bind("click",popupHide2)}
$(document).ready(function(){$("#dmLayer").bind("mouseover",function(){$(document).unbind("click",popupHide2);$(document).unbind("mouseover",popupHide)}).bind("mouseout",function(){$(document).bind("mouseover",popupHide)})});
function invokePopup(a,b,c,d,e,f){if("none"==$("#dmLayer").css("display")){null!=a&&(a=a.previousSibling);f=$(a);var g=f.prev().attr("serviceName");$("#dmLayer").css("top",f.offset().top+f.height()+1).css("left",f.offset().left);$("#dmLayer").empty().append("<font color='red'>\u6b63\u5728\u52a0\u8f7d.............</font>").show();createDmLayer(a,b,g,c,d,e,"");$(document).bind("mouseover",popupHide)}else $("#dmLayer").hide()}
function invokePopupPml(a,b,c,d,e,f,g,h){invokeDomRef=a.previousSibling.previousSibling;a={};a.pml=c;null!=d&&""!=d&&(a.pmlWidth=d);null!=e&&""!=e&&(a.pmlHeight=e);null!=f&&""!=f&&(a.title=f);null!=g&&""!=g&&(a.formName=g);null!=h&&""!=h&&(a.target=h);loadPml(a)}function textInvokePopup(a,b,c,d,e,f,g){$(a).bind("keydown",function(g){40==(g||window.event).keyCode&&0==times&&(times=1,$(a).unbind("keydown"),setTip(a),createDmLayer(a,b,c,d,e,f,""))});times=0}
function setTip(a,b){$("#dmLayer").attr("sname",a.id);var c=$(a);c.offset().top+c.height()+b>$(window).height()-5&&$("#dmLayer").css("top",c.offset().top-b-1).css("left",c.offset().left+1)}
function selInputValue(){if(null!=objGlobals)if($(objGlobals).attr("value",$(this).children().html()),$(objGlobals).attr("title",$(this).children().html()),null!=objGlobals.previousSibling){objGlobals.previousSibling.value=$(this).attr("codeID");try{eval($(objGlobals).attr("changejs")),$(objGlobals).parents("form").validate().element(objGlobals)}catch(a){}$(objGlobals).parent().parent().attr("edit","true")}else alert("\u8d4b\u503c\u5931\u8d25\uff0c\u53d1\u751f\u9519\u8bef!!!!!!");$("#dmLayer").hide()}
function pageUp(a,b,c,d){null!=c&&1>=c||createDmLayer(objGlobals,null,a,b,parseInt(c)-1,d)}function pageDown(a,b,c,d){createDmLayer(objGlobals,null,a,b,parseInt(c)+1,d)}function clearSelect(a){a=$("#dmLayer").attr("sname");0<a.length?($("."+a).attr("value",""),null!=$("."+a).prev()?$("."+a).prev().val(""):alert("\u8d4b\u503c\u5931\u8d25\uff0c\u53d1\u751f\u9519\u8bef!!!!!!")):(objGlobals.value="",null!=objGlobals.previousSibling&&(objGlobals.previousSibling.value=""))}
function changeServiceName(a,b,c){if(null!=a&&null!=b&&null!=c){a=$(a).val();b=b.split(";");for(var d=0;d<b.length;d++){var e=b[d].split(",");if(e[0]==a){$("#"+c).attr("serviceName",e[1]);break}}}}
function keyEvent(a,b){var c=b||window.event;objGlobals=a;38==c.keyCode?"none"==$("#dmLayer").css("display")?$(a).next().click():(c=$("#dmLayerTable").find("td[class=dmLayerMouseOverCss]"),c.attr("class")?c.trigger("mouseout"):c=$("#dmLayerTable").children().eq(0).children().eq(0),c.parent().prev()&&c.parent().prev().is("tr")&&(c=c.parent().prev().children().eq(0)),$(c).trigger("mouseover")):40==c.keyCode?"none"==$("#dmLayer").css("display")?$(a).next().click():(c=$("#dmLayerTable").find("td[class=dmLayerMouseOverCss]"),
c.attr("class")?c.trigger("mouseout"):c=$("#dmLayerTable").children().eq(0).children().eq(0),c.parent().next()&&c.parent().next().is("tr")&&(c=c.parent().next().children().eq(0)),$(c).trigger("mouseover")):13==c.keyCode?(c=$("#dmLayerTable").find("td[class=dmLayerMouseOverCss]"))&&c.click():(_autoDropDownValue=$(a).val(),setTimeout("autoDropDown('"+$(a).val()+"')",200))}var _autoDropDownValue;
function autoDropDown(a){a==_autoDropDownValue&&($("#dmLayer").css("display","none"),$(objGlobals).next().click())}function myValidate(a){}
function autoPutFormValues(a,b,c){if(null!=objGlobals&&null!=a&&null!=b&&""!=$.trim(b)){var d=objGlobals.previousSibling.name+"="+objGlobals.previousSibling.value;c&&(d=d+"&dataBus=setContext&contextKey="+c+"&contextValue="+objGlobals.previousSibling.value);callService({serviceName:a,paras:d,callType:"sa",callback:function(a){if(null!=a&&0<a.length){a=b.split(",");for(var c=0;c<a.length;c++){var d=eval("v[0]."+a[c]);$(objGlobals).parents("tr").find("input[name='"+a[c]+"']").val(d)}}}})}};function createStaticDmLayer(a,b,c){objGlobals=a;if(null!=c){var d=c.split(",");for(c=0;c<d.length;c++){var e=d[c];""!=e&&(null!=$(e)&&($(e).value=""),null!=$(e)&&null!=$(e).previousSibling&&($(e).previousSibling.value=""))}}eval("var ret ="+b);if(null!=ret&&null!=ret.items&&0<ret.items.length){c=250;b=20*(ret.items.length+2)+15;c>b&&(c=b);$("#dmLayer").css("height",c);setTip(a,c);a='<table id="dmLayerTable" class="dmBody" style="word-break:keep-all;margin-left:5px;margin-top:5px;font-size:9pt;cursor:pointer"   border="0" cellpadding="0" cellspacing="0" ><tr height="20px"  codeID="" ><td style="padding: 1px;" ></td></tr>';
for(c=0;c<ret.items.length;c++)b=ret.items[c],a=a+'<tr height="20px" codeID="'+b.objuid+'"> <td style="padding: 1px;" title="'+unescape(b.name)+'">'+unescape(b.name)+"</td> </tr> ";a+="</table>";$("#dmLayer").empty().append(a);a=$("#dmLayerTable").width();144>a?($("#dmLayerTable").css("width",164),a=164):a+=20;$("#dmLayer").css("width",a);$(".dmBody tr").bind("click",selInputValue).bind("mouseover",function(){$(this).find("td").addClass("dmLayerMouseOverCss")}).bind("mouseout",function(){$(this).find("td").removeClass("dmLayerMouseOverCss")});
$(".dmBody tr:even").addClass("dmLayerEven")}else $("#dmLayer").empty().append("&nbsp;&nbsp;&nbsp;&nbsp;\u6ca1\u6709\u8bb0\u5f55!").show();$(".dmBody tr:even").css("background","#e6EEEE")}
function invokeStaticPopup(a,b,c){if("none"==$("#dmLayer").css("display")){null!=a&&(a=a.previousSibling);var d=$(a);$("#dmLayer").css("top",d.offset().top+d.height()+1).css("left",d.offset().left);$("#dmLayer").empty().append("<font color='red'>\u6b63\u5728\u52a0\u8f7d.............</font>").show();createStaticDmLayer(a,b,c);$(document).bind("mouseover",popupHide)}else $("#dmLayer").hide()};(function(a){a.widget("ui.combobox",{_create:function(){var b,c=this.element,d=c.attr("serviceName");c.val();var e=c.attr("tlabel"),f=a("<span>").addClass("ui-combobox").insertAfter(c);console.log("serviceName:::"+d);null==e&&(e="");b=a("<input>").appendTo(f).val(e).addClass("ui-state-default").autocomplete({delay:0,minLength:0,source:function(b,c){a.ajax({url:globalURL+"servicecontroller?contextServiceName="+d+"&callType=ss",success:function(d){var e=RegExp(a.ui.autocomplete.escapeRegex(b.term),
"i");c(a.map(d.items,function(c){if(!b.term||e.test(c.name))return{label:c.name.replace(RegExp("(?![^&;]+;)(?!<[^<>]*)("+a.ui.autocomplete.escapeRegex(b.term)+")(?![^<>]*>)(?![^&;]+;)","gi"),"<strong>$1</strong>"),value:c.name,tId:c.objuid}}))}})},select:function(a,b){console.log("The ID::::"+b.item.tId);c.val(b.item.tId)}}).addClass("ui-widget ui-widget-content ui-corner-left");b.data("autocomplete")._renderItem=function(b,c){return a("<li></li>").data("item.autocomplete",c).append("<a>"+c.label+
"</a>").appendTo(b)};a("<a>").attr("tabIndex",-1).attr("title","Show All Items").appendTo(f).button({icons:{primary:"ui-icon-triangle-1-s"},text:!1}).removeClass("ui-corner-all").addClass("ui-corner-right ui-button-icon").click(function(){b.autocomplete("widget").is(":visible")?b.autocomplete("close"):(a(this).blur(),b.autocomplete("search",""),b.focus())})},destroy:function(){this.wrapper.remove();this.element.show();a.Widget.prototype.destroy.call(this)}})})(jQuery);(function(a){a.PaginationCalculator=function(a,c){this.maxentries=a;this.opts=c};a.extend(a.PaginationCalculator.prototype,{numPages:function(){return Math.ceil(this.maxentries/this.opts.items_per_page)},getInterval:function(a){var c=Math.ceil(this.opts.num_display_entries/2),d=this.numPages(),e=d-this.opts.num_display_entries,e=a>c?Math.max(Math.min(a-c,e),0):0;a=a>c?Math.min(a+c,d):Math.min(this.opts.num_display_entries,d);return{start:e,end:a}}});a.PaginationRenderers={};a.PaginationRenderers.defaultRenderer=
function(b,c){this.maxentries=b;this.opts=c;this.pc=new a.PaginationCalculator(b,c)};a.extend(a.PaginationRenderers.defaultRenderer.prototype,{createLink:function(b,c,d){var e=this.pc.numPages();b=0>b?0:b<e?b:e-1;d=a.extend({text:b+1,classes:""},d||{});c=b==c?a("<span class='current'>"+d.text+"</span>"):a("<a>"+d.text+"</a>");d.classes&&c.addClass(d.classes);c.data("page_id",b);return c},appendRange:function(a,c,d,e){for(;d<e;d++)this.createLink(d,c).appendTo(a)},getLinks:function(b,c){var d,e=this.pc.getInterval(b),
f=this.pc.numPages(),g=a("<div class='pagination'></div>");this.opts.prev_text&&(0<b||this.opts.prev_show_always)&&g.append(this.createLink(b-1,b,{text:this.opts.prev_text,classes:"prev"}));0<e.start&&0<this.opts.num_edge_entries&&(d=Math.min(this.opts.num_edge_entries,e.start),this.appendRange(g,b,0,d),this.opts.num_edge_entries<e.start&&this.opts.ellipse_text&&jQuery("<span>"+this.opts.ellipse_text+"</span>").appendTo(g));this.appendRange(g,b,e.start,e.end);e.end<f&&0<this.opts.num_edge_entries&&
(f-this.opts.num_edge_entries>e.end&&this.opts.ellipse_text&&jQuery("<span>"+this.opts.ellipse_text+"</span>").appendTo(g),d=Math.max(f-this.opts.num_edge_entries,e.end),this.appendRange(g,b,d,f));this.opts.next_text&&(b<f-1||this.opts.next_show_always)&&g.append(this.createLink(b+1,b,{text:this.opts.next_text,classes:"next"}));a("a",g).click(c);return g}});a.fn.pagination=function(b,c){function d(b){var g,m=a(b.target).data("page_id");e.data("current_page",m);g=f.getLinks(m,d);e.empty();g.appendTo(e);
g=c.callback(m,e);g||(b.stopPropagation?b.stopPropagation():b.cancelBubble=!0);return g}c=jQuery.extend({items_per_page:10,num_display_entries:10,current_page:0,num_edge_entries:2,link_to:"#",prev_text:"Prev",next_text:"Next",ellipse_text:"...",prev_show_always:!0,next_show_always:!0,renderer:"defaultRenderer",callback:function(){return!1}},c||{});var e=this,f,g;g=c.current_page;e.data("current_page",g);b=!b||0>b?1:b;c.items_per_page=!c.items_per_page||0>c.items_per_page?1:c.items_per_page;if(!a.PaginationRenderers[c.renderer])throw new ReferenceError("Pagination renderer '"+
c.renderer+"' was not found in jQuery.PaginationRenderers object.");f=new a.PaginationRenderers[c.renderer](b,c);e.each(function(){this.selectPage=function(a){d(a)};this.prevPage=function(){var a=e.data("current_page");return 0<a?(d(a-1),!0):!1};this.nextPage=function(){var a=e.data("current_page");return a<numPages()-1?(d(a+1),!0):!1}});g=f.getLinks(g,d);e.empty();g.appendTo(e)}})(jQuery);function getElemIDorName(a){return null!=$(a).attr("ouid")?$(a).attr("ouid"):a.name}
(function(a){a.extend(a.fn,{validate:function(b){if(this.length){var c=a.data(this[0],"validator");if(c)return c;this.attr("novalidate","novalidate");c=new a.validator(b,this[0]);a.data(this[0],"validator",c);c.settings.onsubmit&&(this.validateDelegate(":submit","click",function(b){c.settings.submitHandler&&(c.submitButton=b.target);a(b.target).hasClass("cancel")&&(c.cancelSubmit=!0);void 0!==a(b.target).attr("formnovalidate")&&(c.cancelSubmit=!0)}),this.submit(function(b){function e(){var e;return c.settings.submitHandler?
(c.submitButton&&(e=a("<input type='hidden'/>").attr("name",c.submitButton.name).val(a(c.submitButton).val()).appendTo(c.currentForm)),c.settings.submitHandler.call(c,c.currentForm,b),c.submitButton&&e.remove(),!1):!0}c.settings.debug&&b.preventDefault();if(c.cancelSubmit)return c.cancelSubmit=!1,e();if(c.form())return c.pendingRequest?(c.formSubmitted=!0,!1):e();c.focusInvalid();return!1}));return c}b&&b.debug&&window.console&&console.warn("Nothing selected, can't validate, returning nothing.")},
valid:function(){if(a(this[0]).is("form"))return this.validate().form();var b=!0,c=a(this[0].form).validate();this.each(function(){b=b&&c.element(this)});return b},removeAttrs:function(b){var c={},d=this;a.each(b.split(/\s/),function(a,b){c[b]=d.attr(b);d.removeAttr(b)});return c},rules:function(b,c){var d=this[0];if(b){var e=a.data(d.form,"validator").settings,f=e.rules,g=a.validator.staticRules(d);switch(b){case "add":a.extend(g,a.validator.normalizeRule(c));delete g.messages;f[getElemIDorName(d)]=
g;c.messages&&(e.messages[getElemIDorName(d)]=a.extend(e.messages[getElemIDorName(d)],c.messages));break;case "remove":if(!c)return delete f[getElemIDorName(d)],g;var h={};a.each(c.split(/\s/),function(a,b){h[b]=g[b];delete g[b]});return h}}d=a.validator.normalizeRules(a.extend({},a.validator.classRules(d),a.validator.attributeRules(d),a.validator.dataRules(d),a.validator.staticRules(d)),d);d.required&&(e=d.required,delete d.required,d=a.extend({required:e},d));return d}});a.extend(a.expr[":"],{blank:function(b){return!a.trim(""+
a(b).val())},filled:function(b){return!!a.trim(""+a(b).val())},unchecked:function(b){return!a(b).prop("checked")}});a.validator=function(b,c){this.settings=a.extend(!0,{},a.validator.defaults,b);this.currentForm=c;this.init()};a.validator.format=function(b,c){if(1===arguments.length)return function(){var c=a.makeArray(arguments);c.unshift(b);return a.validator.format.apply(this,c)};2<arguments.length&&c.constructor!==Array&&(c=a.makeArray(arguments).slice(1));c.constructor!==Array&&(c=[c]);a.each(c,
function(a,c){b=b.replace(RegExp("\\{"+a+"\\}","g"),function(){return c})});return b};a.extend(a.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",errorElement:"label",focusInvalid:!0,errorContainer:a([]),errorLabelContainer:a([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!0,onfocusin:function(a,c){this.lastActive=a;this.settings.focusCleanup&&!this.blockFocusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,a,this.settings.errorClass,
this.settings.validClass),this.addWrapper(this.errorsFor(a)).hide())},onfocusout:function(a,c){this.checkable(a)||!(getElemIDorName(a)in this.submitted)&&this.optional(a)||this.element(a)},onkeyup:function(a,c){(9!==c.which||""!==this.elementValue(a))&&(getElemIDorName(a)in this.submitted||a===this.lastElement)&&this.element(a)},onclick:function(a,c){getElemIDorName(a)in this.submitted?this.element(a):a.parentNode.name in this.submitted&&this.element(a.parentNode)},highlight:function(b,c,d){"radio"===
b.type?this.findByName(b.name).addClass(c).removeClass(d):a(b).addClass(c).removeClass(d)},unhighlight:function(b,c,d){"radio"===b.type?this.findByName(b.name).removeClass(c).addClass(d):a(b).removeClass(c).addClass(d)}},setDefaults:function(b){a.extend(a.validator.defaults,b)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",
number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",maxlength:a.validator.format("Please enter no more than {0} characters."),minlength:a.validator.format("Please enter at least {0} characters."),rangelength:a.validator.format("Please enter a value between {0} and {1} characters long."),range:a.validator.format("Please enter a value between {0} and {1}."),max:a.validator.format("Please enter a value less than or equal to {0}."),
min:a.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:!1,prototype:{init:function(){function b(b){var c=a.data(this[0].form,"validator"),d="on"+b.type.replace(/^validate/,"");c.settings[d]&&c.settings[d].call(c,this[0],b)}this.labelContainer=a(this.settings.errorLabelContainer);this.errorContext=this.labelContainer.length&&this.labelContainer||a(this.currentForm);this.containers=a(this.settings.errorContainer).add(this.settings.errorLabelContainer);this.submitted=
{};this.valueCache={};this.pendingRequest=0;this.pending={};this.invalid={};this.reset();var c=this.groups={};a.each(this.settings.groups,function(b,d){"string"===typeof d&&(d=d.split(/\s/));a.each(d,function(a,d){c[d]=b})});var d=this.settings.rules;a.each(d,function(b,c){d[b]=a.validator.normalizeRule(c)});a(this.currentForm).validateDelegate(":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'] ,[type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'] ",
"focusin focusout keyup",b).validateDelegate("[type='radio'], [type='checkbox'], select, option","click",b);this.settings.invalidHandler&&a(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler)},form:function(){this.checkForm();a.extend(this.submitted,this.errorMap);this.invalid=a.extend({},this.errorMap);this.valid()||a(this.currentForm).triggerHandler("invalid-form",[this]);this.showErrors();return this.valid()},checkForm:function(){this.prepareForm();for(var a=0,c=this.currentElements=
this.elements();c[a];a++)this.check(c[a]);return this.valid()},element:function(b){this.lastElement=b=this.validationTargetFor(this.clean(b));this.prepareElement(b);this.currentElements=a(b);var c=!1!==this.check(b);c?delete this.invalid[getElemIDorName(b)]:this.invalid[getElemIDorName(b)]=!0;this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers));this.showErrors();return c},showErrors:function(b){if(b){a.extend(this.errorMap,b);this.errorList=[];for(var c in b)this.errorList.push({message:b[c],
element:this.findByName(c)[0]});this.successList=a.grep(this.successList,function(a){return!(getElemIDorName(a)in b)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){a.fn.resetForm&&a(this.currentForm).resetForm();this.submitted={};this.lastElement=null;this.prepareForm();this.hideErrors();this.elements().removeClass(this.settings.errorClass).removeData("previousValue")},numberOfInvalids:function(){return this.objectLength(this.invalid)},
objectLength:function(a){var c=0,d;for(d in a)c++;return c},hideErrors:function(){this.addWrapper(this.toHide).hide()},valid:function(){return 0===this.size()},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{a(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(b){}},findLastActive:function(){var b=this.lastActive;return b&&1===a.grep(this.errorList,function(a){return a.element.name===
b.name}).length&&b},elements:function(){var b=this;return a(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, [disabled]").not(this.settings.ignore).filter(function(){!this.name&&b.settings.debug&&window.console&&console.error("%o has no name assigned",this);return b.objectLength(a(this).rules())?!0:!1})},clean:function(b){return a(b)[0]},errors:function(){var b=this.settings.errorClass.replace(" ",".");return a(this.settings.errorElement+"."+b,this.errorContext)},reset:function(){this.successList=
[];this.errorList=[];this.errorMap={};this.toShow=a([]);this.toHide=a([]);this.currentElements=a([])},prepareForm:function(){this.reset();this.toHide=this.errors().add(this.containers)},prepareElement:function(a){this.reset();this.toHide=this.errorsFor(a)},elementValue:function(b){var c=a(b).attr("type"),d=a(b).val();return"radio"===c||"checkbox"===c?a("input[name='"+a(b).attr("name")+"']:checked").val():"string"===typeof d?d.replace(/\r/g,""):d},check:function(b){b=this.validationTargetFor(this.clean(b));
var c=a(b).rules(),d=!1,e=this.elementValue(b),f,g;for(g in c){var h={method:g,parameters:c[g]};try{if(f=a.validator.methods[g].call(this,e,b,h.parameters),"dependency-mismatch"===f)d=!0;else{d=!1;if("pending"===f){this.toHide=this.toHide.not(this.errorsFor(b));return}if(!f)return this.formatAndAdd(b,h),!1}}catch(k){throw this.settings.debug&&window.console&&console.log("Exception occurred when checking element "+b.id+", check the '"+h.method+"' method.",k),k;}}if(!d)return this.objectLength(c)&&
this.successList.push(b),!0},customDataMessage:function(b,c){return a(b).attr("message")?a(b).attr("message"):a(b).data("msg-"+c.toLowerCase())||b.attributes&&a(b).attr("data-msg-"+c.toLowerCase())},customMessage:function(a,c){var d=this.settings.messages[a];return d&&(d.constructor===String?d:d[c])},findDefined:function(){for(var a=0;a<arguments.length;a++)if(void 0!==arguments[a])return arguments[a]},defaultMessage:function(b,c){return this.findDefined(this.customMessage(getElemIDorName(b),c),this.customDataMessage(b,
c),!this.settings.ignoreTitle&&b.title||void 0,a.validator.messages[c],"<strong>Warning: No message defined for "+getElemIDorName(b)+"</strong>")},formatAndAdd:function(b,c){var d=this.defaultMessage(b,c.method),e=/\$?\{(\d+)\}/g;"function"===typeof d?d=d.call(this,c.parameters,b):e.test(d)&&(d=a.validator.format(d.replace(e,"{$1}"),c.parameters));this.errorList.push({message:d,element:b});this.errorMap[getElemIDorName(b)]=d;this.submitted[getElemIDorName(b)]=d},addWrapper:function(a){this.settings.wrapper&&
(a=a.add(a.parent(this.settings.wrapper)));return a},defaultShowErrors:function(){var a,c;for(a=0;this.errorList[a];a++)c=this.errorList[a],this.settings.highlight&&this.settings.highlight.call(this,c.element,this.settings.errorClass,this.settings.validClass),this.showLabel(c.element,c.message);this.errorList.length&&(this.toShow=this.toShow.add(this.containers));if(this.settings.success)for(a=0;this.successList[a];a++)this.showLabel(this.successList[a]);if(this.settings.unhighlight)for(a=0,c=this.validElements();c[a];a++)this.settings.unhighlight.call(this,
c[a],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow);this.hideErrors();this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return a(this.errorList).map(function(){return this.element})},showLabel:function(b,c){var d=this.errorsFor(b);d.length?(d.removeClass(this.settings.validClass).addClass(this.settings.errorClass),d.html(c)):(d=a("<"+this.settings.errorElement+
">").attr("for",this.idOrName(b)).addClass(this.settings.errorClass).html(c||""),this.settings.wrapper&&(d=d.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.append(d).length||(this.settings.errorPlacement?this.settings.errorPlacement(d,a(b)):a(b).parent().append(d)));!c&&this.settings.success&&(d.text(""),"string"===typeof this.settings.success?d.addClass(this.settings.success):this.settings.success(d,b));this.toShow=this.toShow.add(d)},errorsFor:function(b){var c=
this.idOrName(b);return this.errors().filter(function(){return a(this).attr("for")===c})},idOrName:function(a){return this.groups[getElemIDorName(a)]||(this.checkable(a)?getElemIDorName(a):a.id||getElemIDorName(a))},validationTargetFor:function(a){this.checkable(a)&&(a=this.findByName(a.name).not(this.settings.ignore)[0]);return a},checkable:function(a){return/radio|checkbox/i.test(a.type)},findByName:function(b){return a(this.currentForm).find("[name='"+b+"']")},getLength:function(b,c){switch(c.nodeName.toLowerCase()){case "select":return a("option:selected",
c).length;case "input":if(this.checkable(c))return this.findByName(c.name).filter(":checked").length}return b.length},depend:function(a,c){return this.dependTypes[typeof a]?this.dependTypes[typeof a](a,c):!0},dependTypes:{"boolean":function(a,c){return a},string:function(b,c){return!!a(b,c.form).length},"function":function(a,c){return a(c)}},optional:function(b){var c=this.elementValue(b);return!a.validator.methods.required.call(this,c,b)&&"dependency-mismatch"},startRequest:function(a){this.pending[getElemIDorName(a)]||
(this.pendingRequest++,this.pending[getElemIDorName(a)]=!0)},stopRequest:function(b,c){this.pendingRequest--;0>this.pendingRequest&&(this.pendingRequest=0);delete this.pending[getElemIDorName(b)];c&&0===this.pendingRequest&&this.formSubmitted&&this.form()?(a(this.currentForm).submit(),this.formSubmitted=!1):!c&&0===this.pendingRequest&&this.formSubmitted&&(a(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(b){return a.data(b,"previousValue")||
a.data(b,"previousValue",{old:null,valid:!0,message:this.defaultMessage(b,"remote")})}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},number:{number:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(b,c){b.constructor===String?this.classRuleSettings[b]=c:a.extend(this.classRuleSettings,b)},classRules:function(b){var c={};(b=a(b).attr("class"))&&a.each(b.split(" "),function(){this in a.validator.classRuleSettings&&
a.extend(c,a.validator.classRuleSettings[this])});return c},attributeRules:function(b){var c={};b=a(b);var d=b[0].getAttribute("type"),e;for(e in a.validator.methods){var f;"required"===e?(f=b.get(0).getAttribute(e),""===f&&(f=!0),f=!!f):f=b.attr(e);/min|max/.test(e)&&(null===d||/number|range|text/.test(d))&&(f=Number(f));f?c[e]=f:d===e&&"range"!==d&&(c[e]=!0)}c.maxlength&&/-1|2147483647|524288/.test(c.maxlength)&&delete c.maxlength;return c},dataRules:function(b){var c,d={},e=a(b);for(c in a.validator.methods)b=
e.data("rule-"+c.toLowerCase()),void 0!==b&&(d[c]=b);return d},staticRules:function(b){var c={},d=a.data(b.form,"validator");d.settings.rules&&(c=a.validator.normalizeRule(d.settings.rules[getElemIDorName(b)])||{});return c},normalizeRules:function(b,c){a.each(b,function(d,e){if(!1===e)delete b[d];else if(e.param||e.depends){var f=!0;switch(typeof e.depends){case "string":f=!!a(e.depends,c.form).length;break;case "function":f=e.depends.call(c,c)}f?b[d]=void 0!==e.param?e.param:!0:delete b[d]}});a.each(b,
function(d,e){b[d]=a.isFunction(e)?e(c):e});a.each(["minlength","maxlength"],function(){b[this]&&(b[this]=Number(b[this]))});a.each(["rangelength","range"],function(){var c;b[this]&&(a.isArray(b[this])?b[this]=[Number(b[this][0]),Number(b[this][1])]:"string"===typeof b[this]&&(c=b[this].split(/[\s,]+/),b[this]=[Number(c[0]),Number(c[1])]))});a.validator.autoCreateRanges&&(b.min&&b.max&&(b.range=[b.min,b.max],delete b.min,delete b.max),b.minlength&&b.maxlength&&(b.rangelength=[b.minlength,b.maxlength],
delete b.minlength,delete b.maxlength));return b},normalizeRule:function(b){if("string"===typeof b){var c={};a.each(b.split(/\s/),function(){c[this]=!0});b=c}return b},addMethod:function(b,c,d){a.validator.methods[b]=c;a.validator.messages[b]=void 0!==d?d:a.validator.messages[b];3>c.length&&a.validator.addClassRules(b,a.validator.normalizeRule(b))},methods:{required:function(b,c,d){return this.depend(d,c)?"select"===c.nodeName.toLowerCase()?(b=a(c).val())&&0<b.length:this.checkable(c)?0<this.getLength(b,
c):0<a.trim(b).length:"dependency-mismatch"},email:function(a,c){return this.optional(c)||/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(a)},
url:function(a,c){return this.optional(c)||/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(a)},
date:function(a,c){return this.optional(c)||!/Invalid|NaN/.test((new Date(a)).toString())},dateISO:function(a,c){return this.optional(c)||/^\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2}$/.test(a)},number:function(a,c){return this.optional(c)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(a)},digits:function(a,c){return this.optional(c)||/^\d+$/.test(a)},creditcard:function(a,c){if(this.optional(c))return"dependency-mismatch";if(/[^0-9 \-]+/.test(a))return!1;var d=0,e=0,f=!1;a=a.replace(/\D/g,"");for(var g=a.length-
1;0<=g;g--)e=a.charAt(g),e=parseInt(e,10),f&&9<(e*=2)&&(e-=9),d+=e,f=!f;return 0===d%10},minlength:function(b,c,d){b=a.isArray(b)?b.length:this.getLength(a.trim(b),c);return this.optional(c)||b>=d},maxlength:function(b,c,d){b=a.isArray(b)?b.length:this.getLength(a.trim(b),c);return this.optional(c)||b<=d},rangelength:function(b,c,d){b=a.isArray(b)?b.length:this.getLength(a.trim(b),c);return this.optional(c)||b>=d[0]&&b<=d[1]},min:function(a,c,d){return this.optional(c)||a>=d},max:function(a,c,d){return this.optional(c)||
a<=d},range:function(a,c,d){return this.optional(c)||a>=d[0]&&a<=d[1]},equalTo:function(b,c,d){d=a(d);this.settings.onfocusout&&d.unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){a(c).valid()});return b===d.val()},remote:function(b,c,d){if(this.optional(c))return"dependency-mismatch";var e=this.previousValue(c);this.settings.messages[getElemIDorName(c)]||(this.settings.messages[getElemIDorName(c)]={});e.originalMessage=this.settings.messages[getElemIDorName(c)].remote;this.settings.messages[getElemIDorName(c)].remote=
e.message;d="string"===typeof d&&{url:d}||d;if(e.old===b)return e.valid;e.old=b;var f=this;this.startRequest(c);var g={};b=escape(b);g[getElemIDorName(c)]=b;a.ajax(a.extend(!0,{url:d,mode:"abort",port:"validate"+getElemIDorName(c),dataType:"json",data:g,success:function(d){f.settings.messages[getElemIDorName(c)].remote=e.originalMessage;var g=!0===d||"true"===d;if(g){var m=f.formSubmitted;f.prepareElement(c);f.formSubmitted=m;f.successList.push(c);delete f.invalid[getElemIDorName(c)];f.showErrors()}else m=
{},d=d||f.defaultMessage(c,"remote"),m[getElemIDorName(c)]=e.message=a.isFunction(d)?d(b):d,f.invalid[getElemIDorName(c)]=!0,f.showErrors(m);e.valid=g;f.stopRequest(c,g)}},d));return"pending"}}});a.format=a.validator.format})(jQuery);
(function(a){var b={};if(a.ajaxPrefilter)a.ajaxPrefilter(function(a,c,f){c=a.port;"abort"===a.mode&&(b[c]&&b[c].abort(),b[c]=f)});else{var c=a.ajax;a.ajax=function(d){var e=("port"in d?d:a.ajaxSettings).port;return"abort"===("mode"in d?d:a.ajaxSettings).mode?(b[e]&&b[e].abort(),b[e]=c.apply(this,arguments),b[e]):c.apply(this,arguments)}}})(jQuery);(function(a){a.extend(a.fn,{validateDelegate:function(b,c,d){return this.bind(c,function(c){var f=a(c.target);if(f.is(b))return d.apply(f,arguments)})}})})(jQuery);var swfobject=function(){function a(){if(!L){try{var a=n.getElementsByTagName("body")[0].appendChild(n.createElement("span"));a.parentNode.removeChild(a)}catch(b){return}L=!0;for(var a=W.length,c=0;c<a;c++)W[c]()}}function b(a){L?a():W[W.length]=a}function c(a){if(typeof p.addEventListener!=v)p.addEventListener("load",a,!1);else if(typeof n.addEventListener!=v)n.addEventListener("load",a,!1);else if(typeof p.attachEvent!=v)E(p,"onload",a);else if("function"==typeof p.onload){var b=p.onload;p.onload=
function(){b();a()}}else p.onload=a}function d(){var a=n.getElementsByTagName("body")[0],b=n.createElement(R);b.setAttribute("type",T);var c=a.appendChild(b);if(c){var d=0;(function(){if(typeof c.GetVariable!=v){var z=c.GetVariable("$version");z&&(z=z.split(" ")[1].split(","),C.pv=[parseInt(z[0],10),parseInt(z[1],10),parseInt(z[2],10)])}else if(10>d){d++;setTimeout(arguments.callee,10);return}a.removeChild(b);c=null;e()})()}else e()}function e(){var a=s.length;if(0<a)for(var b=0;b<a;b++){var c=s[b].id,
d=s[b].callbackFn,e={success:!1,id:c};if(0<C.pv[0]){var z=w(c);if(z)if(!F(s[b].swfVersion)||C.wk&&312>C.wk)if(s[b].expressInstall&&g()){e={};e.data=s[b].expressInstall;e.width=z.getAttribute("width")||"0";e.height=z.getAttribute("height")||"0";z.getAttribute("class")&&(e.styleclass=z.getAttribute("class"));z.getAttribute("align")&&(e.align=z.getAttribute("align"));for(var J={},z=z.getElementsByTagName("param"),H=z.length,I=0;I<H;I++)"movie"!=z[I].getAttribute("name").toLowerCase()&&(J[z[I].getAttribute("name")]=
z[I].getAttribute("value"));h(e,J,c,d)}else k(z),d&&d(e);else B(c,!0),d&&(e.success=!0,e.ref=f(c),d(e))}else B(c,!0),d&&((c=f(c))&&typeof c.SetVariable!=v&&(e.success=!0,e.ref=c),d(e))}}function f(a){var b=null;(a=w(a))&&"OBJECT"==a.nodeName&&(typeof a.SetVariable!=v?b=a:(a=a.getElementsByTagName(R)[0])&&(b=a));return b}function g(){return!ja&&F("6.0.65")&&(C.win||C.mac)&&!(C.wk&&312>C.wk)}function h(a,b,c,d){ja=!0;P=d||null;aa={success:!1,id:c};var e=w(c);if(e){"OBJECT"==e.nodeName?(H=m(e),I=null):
(H=e,I=c);a.id=ba;if(typeof a.width==v||!/%$/.test(a.width)&&310>parseInt(a.width,10))a.width="310";if(typeof a.height==v||!/%$/.test(a.height)&&137>parseInt(a.height,10))a.height="137";n.title=n.title.slice(0,47)+" - Flash Player Installation";d=C.ie&&C.win?"ActiveX":"PlugIn";d="MMredirectURL="+p.location.toString().replace(/&/g,"%26")+"&MMplayerType="+d+"&MMdoctitle="+n.title;b.flashvars=typeof b.flashvars!=v?b.flashvars+("&"+d):d;C.ie&&C.win&&4!=e.readyState&&(d=n.createElement("div"),c+="SWFObjectNew",
d.setAttribute("id",c),e.parentNode.insertBefore(d,e),e.style.display="none",function(){4==e.readyState?e.parentNode.removeChild(e):setTimeout(arguments.callee,10)}());r(a,b,c)}}function k(a){if(C.ie&&C.win&&4!=a.readyState){var b=n.createElement("div");a.parentNode.insertBefore(b,a);b.parentNode.replaceChild(m(a),b);a.style.display="none";(function(){4==a.readyState?a.parentNode.removeChild(a):setTimeout(arguments.callee,10)})()}else a.parentNode.replaceChild(m(a),a)}function m(a){var b=n.createElement("div");
if(C.win&&C.ie)b.innerHTML=a.innerHTML;else if(a=a.getElementsByTagName(R)[0])if(a=a.childNodes)for(var c=a.length,d=0;d<c;d++)1==a[d].nodeType&&"PARAM"==a[d].nodeName||8==a[d].nodeType||b.appendChild(a[d].cloneNode(!0));return b}function r(a,b,c){var d,e=w(c);if(C.wk&&312>C.wk)return d;if(e)if(typeof a.id==v&&(a.id=c),C.ie&&C.win){var z="",f;for(f in a)a[f]!=Object.prototype[f]&&("data"==f.toLowerCase()?b.movie=a[f]:"styleclass"==f.toLowerCase()?z+=' class="'+a[f]+'"':"classid"!=f.toLowerCase()&&
(z+=" "+f+'="'+a[f]+'"'));f="";for(var g in b)b[g]!=Object.prototype[g]&&(f+='<param name="'+g+'" value="'+b[g]+'" />');e.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+z+">"+f+"</object>";J[J.length]=a.id;d=w(a.id)}else{g=n.createElement(R);g.setAttribute("type",T);for(var H in a)a[H]!=Object.prototype[H]&&("styleclass"==H.toLowerCase()?g.setAttribute("class",a[H]):"classid"!=H.toLowerCase()&&g.setAttribute(H,a[H]));for(z in b)b[z]!=Object.prototype[z]&&"movie"!=z.toLowerCase()&&
(a=g,f=z,H=b[z],c=n.createElement("param"),c.setAttribute("name",f),c.setAttribute("value",H),a.appendChild(c));e.parentNode.replaceChild(g,e);d=g}return d}function D(a){var b=w(a);b&&"OBJECT"==b.nodeName&&(C.ie&&C.win?(b.style.display="none",function(){if(4==b.readyState){var c=w(a);if(c){for(var d in c)"function"==typeof c[d]&&(c[d]=null);c.parentNode.removeChild(c)}}else setTimeout(arguments.callee,10)}()):b.parentNode.removeChild(b))}function w(a){var b=null;try{b=n.getElementById(a)}catch(c){}return b}
function E(a,b,c){a.attachEvent(b,c);z[z.length]=[a,b,c]}function F(a){var b=C.pv;a=a.split(".");a[0]=parseInt(a[0],10);a[1]=parseInt(a[1],10)||0;a[2]=parseInt(a[2],10)||0;return b[0]>a[0]||b[0]==a[0]&&b[1]>a[1]||b[0]==a[0]&&b[1]==a[1]&&b[2]>=a[2]?!0:!1}function O(a,b,c,d){if(!C.ie||!C.mac){var e=n.getElementsByTagName("head")[0];e&&(c=c&&"string"==typeof c?c:"screen",d&&(pa=U=null),U&&pa==c||(d=n.createElement("style"),d.setAttribute("type","text/css"),d.setAttribute("media",c),U=e.appendChild(d),
C.ie&&C.win&&typeof n.styleSheets!=v&&0<n.styleSheets.length&&(U=n.styleSheets[n.styleSheets.length-1]),pa=c),C.ie&&C.win?U&&typeof U.addRule==R&&U.addRule(a,b):U&&typeof n.createTextNode!=v&&U.appendChild(n.createTextNode(a+" {"+b+"}")))}}function B(a,b){if(ka){var c=b?"visible":"hidden";L&&w(a)?w(a).style.visibility=c:O("#"+a,"visibility:"+c)}}function K(a){return null!=/[\\\"<>\.;]/.exec(a)&&typeof encodeURIComponent!=v?encodeURIComponent(a):a}var v="undefined",R="object",T="application/x-shockwave-flash",
ba="SWFObjectExprInst",p=window,n=document,t=navigator,q=!1,W=[function(){q?d():e()}],s=[],J=[],z=[],H,I,P,aa,L=!1,ja=!1,U,pa,ka=!0,C=function(){var a=typeof n.getElementById!=v&&typeof n.getElementsByTagName!=v&&typeof n.createElement!=v,b=t.userAgent.toLowerCase(),c=t.platform.toLowerCase(),d=c?/win/.test(c):/win/.test(b),c=c?/mac/.test(c):/mac/.test(b),b=/webkit/.test(b)?parseFloat(b.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,e=!+"\v1",z=[0,0,0],f=null;if(typeof t.plugins!=v&&typeof t.plugins["Shockwave Flash"]==
R)!(f=t.plugins["Shockwave Flash"].description)||typeof t.mimeTypes!=v&&t.mimeTypes[T]&&!t.mimeTypes[T].enabledPlugin||(q=!0,e=!1,f=f.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),z[0]=parseInt(f.replace(/^(.*)\..*$/,"$1"),10),z[1]=parseInt(f.replace(/^.*\.(.*)\s.*$/,"$1"),10),z[2]=/[a-zA-Z]/.test(f)?parseInt(f.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(typeof p.ActiveXObject!=v)try{var J=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");J&&(f=J.GetVariable("$version"))&&(e=!0,f=f.split(" ")[1].split(","),
z=[parseInt(f[0],10),parseInt(f[1],10),parseInt(f[2],10)])}catch(g){}return{w3:a,pv:z,wk:b,ie:e,win:d,mac:c}}();(function(){C.w3&&((typeof n.readyState!=v&&"complete"==n.readyState||typeof n.readyState==v&&(n.getElementsByTagName("body")[0]||n.body))&&a(),L||(typeof n.addEventListener!=v&&n.addEventListener("DOMContentLoaded",a,!1),C.ie&&C.win&&(n.attachEvent("onreadystatechange",function(){"complete"==n.readyState&&(n.detachEvent("onreadystatechange",arguments.callee),a())}),p==top&&function(){if(!L){try{n.documentElement.doScroll("left")}catch(b){setTimeout(arguments.callee,
0);return}a()}}()),C.wk&&function(){L||(/loaded|complete/.test(n.readyState)?a():setTimeout(arguments.callee,0))}(),c(a)))})();(function(){C.ie&&C.win&&window.attachEvent("onunload",function(){for(var a=z.length,b=0;b<a;b++)z[b][0].detachEvent(z[b][1],z[b][2]);a=J.length;for(b=0;b<a;b++)D(J[b]);for(var c in C)C[c]=null;C=null;for(var d in swfobject)swfobject[d]=null;swfobject=null})})();return{registerObject:function(a,b,c,d){if(C.w3&&a&&b){var e={};e.id=a;e.swfVersion=b;e.expressInstall=c;e.callbackFn=
d;s[s.length]=e;B(a,!1)}else d&&d({success:!1,id:a})},getObjectById:function(a){if(C.w3)return f(a)},embedSWF:function(a,c,d,e,z,f,J,H,I,k){var P={success:!1,id:c};C.w3&&!(C.wk&&312>C.wk)&&a&&c&&d&&e&&z?(B(c,!1),b(function(){d+="";e+="";var b={};if(I&&typeof I===R)for(var m in I)b[m]=I[m];b.data=a;b.width=d;b.height=e;m={};if(H&&typeof H===R)for(var aa in H)m[aa]=H[aa];if(J&&typeof J===R)for(var L in J)m.flashvars=typeof m.flashvars!=v?m.flashvars+("&"+L+"="+J[L]):L+"="+J[L];if(F(z))aa=r(b,m,c),b.id==
c&&B(c,!0),P.success=!0,P.ref=aa;else{if(f&&g()){b.data=f;h(b,m,c,k);return}B(c,!0)}k&&k(P)})):k&&k(P)},switchOffAutoHideShow:function(){ka=!1},ua:C,getFlashPlayerVersion:function(){return{major:C.pv[0],minor:C.pv[1],release:C.pv[2]}},hasFlashPlayerVersion:F,createSWF:function(a,b,c){if(C.w3)return r(a,b,c)},showExpressInstall:function(a,b,c,d){C.w3&&g()&&h(a,b,c,d)},removeSWF:function(a){C.w3&&D(a)},createCSS:function(a,b,c,d){C.w3&&O(a,b,c,d)},addDomLoadEvent:b,addLoadEvent:c,getQueryParamValue:function(a){var b=
n.location.search||n.location.hash;if(b){/\?/.test(b)&&(b=b.split("?")[1]);if(null==a)return K(b);for(var b=b.split("&"),c=0;c<b.length;c++)if(b[c].substring(0,b[c].indexOf("="))==a)return K(b[c].substring(b[c].indexOf("=")+1))}return""},expressInstallCallback:function(){if(ja){var a=w(ba);a&&H&&(a.parentNode.replaceChild(H,a),I&&(B(I,!0),C.ie&&C.win&&(H.style.display="block")),P&&P(aa));ja=!1}}}}(),SWFUpload;void 0==SWFUpload&&(SWFUpload=function(a){this.initSWFUpload(a)});
SWFUpload.prototype.initSWFUpload=function(a){try{this.customSettings={},this.settings=a,this.eventQueue=[],this.movieName="SWFUpload_"+SWFUpload.movieCount++,this.movieElement=null,SWFUpload.instances[this.movieName]=this,this.initSettings(),this.loadFlash(),this.displayDebugInfo()}catch(b){throw delete SWFUpload.instances[this.movieName],b;}};SWFUpload.instances={};SWFUpload.movieCount=0;SWFUpload.version="2.2.0 2009-03-25";
SWFUpload.QUEUE_ERROR={QUEUE_LIMIT_EXCEEDED:-100,FILE_EXCEEDS_SIZE_LIMIT:-110,ZERO_BYTE_FILE:-120,INVALID_FILETYPE:-130};SWFUpload.UPLOAD_ERROR={HTTP_ERROR:-200,MISSING_UPLOAD_URL:-210,IO_ERROR:-220,SECURITY_ERROR:-230,UPLOAD_LIMIT_EXCEEDED:-240,UPLOAD_FAILED:-250,SPECIFIED_FILE_ID_NOT_FOUND:-260,FILE_VALIDATION_FAILED:-270,FILE_CANCELLED:-280,UPLOAD_STOPPED:-290};SWFUpload.FILE_STATUS={QUEUED:-1,IN_PROGRESS:-2,ERROR:-3,COMPLETE:-4,CANCELLED:-5};
SWFUpload.BUTTON_ACTION={SELECT_FILE:-100,SELECT_FILES:-110,START_UPLOAD:-120};SWFUpload.CURSOR={ARROW:-1,HAND:-2};SWFUpload.WINDOW_MODE={WINDOW:"window",TRANSPARENT:"transparent",OPAQUE:"opaque"};SWFUpload.completeURL=function(a){if("string"!==typeof a||a.match(/^https?:\/\//i)||a.match(/^\//))return a;var b=window.location.pathname.lastIndexOf("/");path=0>=b?"/":window.location.pathname.substr(0,b)+"/";return path+a};
SWFUpload.prototype.initSettings=function(){this.ensureDefault=function(a,b){this.settings[a]=void 0==this.settings[a]?b:this.settings[a]};this.ensureDefault("upload_url","");this.ensureDefault("preserve_relative_urls",!1);this.ensureDefault("file_post_name","Filedata");this.ensureDefault("post_params",{});this.ensureDefault("use_query_string",!1);this.ensureDefault("requeue_on_error",!1);this.ensureDefault("http_success",[]);this.ensureDefault("assume_success_timeout",0);this.ensureDefault("file_types",
"*.*");this.ensureDefault("file_types_description","All Files");this.ensureDefault("file_size_limit",0);this.ensureDefault("file_upload_limit",0);this.ensureDefault("file_queue_limit",0);this.ensureDefault("flash_url","swfupload.swf");this.ensureDefault("prevent_swf_caching",!0);this.ensureDefault("button_image_url","");this.ensureDefault("button_width",1);this.ensureDefault("button_height",1);this.ensureDefault("button_text","");this.ensureDefault("button_text_style","color: #000000; font-size: 16pt;");
this.ensureDefault("button_text_top_padding",0);this.ensureDefault("button_text_left_padding",0);this.ensureDefault("button_action",SWFUpload.BUTTON_ACTION.SELECT_FILES);this.ensureDefault("button_disabled",!1);this.ensureDefault("button_placeholder_id","");this.ensureDefault("button_placeholder",null);this.ensureDefault("button_cursor",SWFUpload.CURSOR.ARROW);this.ensureDefault("button_window_mode",SWFUpload.WINDOW_MODE.WINDOW);this.ensureDefault("debug",!1);this.settings.debug_enabled=this.settings.debug;
this.settings.return_upload_start_handler=this.returnUploadStart;this.ensureDefault("swfupload_loaded_handler",null);this.ensureDefault("file_dialog_start_handler",null);this.ensureDefault("file_queued_handler",null);this.ensureDefault("file_queue_error_handler",null);this.ensureDefault("file_dialog_complete_handler",null);this.ensureDefault("upload_start_handler",null);this.ensureDefault("upload_progress_handler",null);this.ensureDefault("upload_error_handler",null);this.ensureDefault("upload_success_handler",
null);this.ensureDefault("upload_complete_handler",null);this.ensureDefault("debug_handler",this.debugMessage);this.ensureDefault("custom_settings",{});this.customSettings=this.settings.custom_settings;this.settings.prevent_swf_caching&&(this.settings.flash_url=this.settings.flash_url+(0>this.settings.flash_url.indexOf("?")?"?":"&")+"preventswfcaching="+(new Date).getTime());this.settings.preserve_relative_urls||(this.settings.upload_url=SWFUpload.completeURL(this.settings.upload_url),this.settings.button_image_url=
SWFUpload.completeURL(this.settings.button_image_url));delete this.ensureDefault};
SWFUpload.prototype.loadFlash=function(){var a,b;if(null!==document.getElementById(this.movieName))throw"ID "+this.movieName+" is already in use. The Flash Object could not be added";a=document.getElementById(this.settings.button_placeholder_id)||this.settings.button_placeholder;if(void 0==a)throw"Could not find the placeholder element: "+this.settings.button_placeholder_id;b=document.createElement("div");b.innerHTML=this.getFlashHTML();a.parentNode.replaceChild(b.firstChild,a);void 0==window[this.movieName]&&
(window[this.movieName]=this.getMovieElement())};
SWFUpload.prototype.getFlashHTML=function(){return['<object id="',this.movieName,'" type="application/x-shockwave-flash" data="',this.settings.flash_url,'" width="',this.settings.button_width,'" height="',this.settings.button_height,'" class="swfupload"><param name="wmode" value="',this.settings.button_window_mode,'" /><param name="movie" value="',this.settings.flash_url,'" /><param name="quality" value="high" /><param name="menu" value="false" /><param name="allowScriptAccess" value="always" />','<param name="flashvars" value="'+
this.getFlashVars()+'" />',"</object>"].join("")};
SWFUpload.prototype.getFlashVars=function(){var a=this.buildParamString(),b=this.settings.http_success.join(",");return["movieName=",encodeURIComponent(this.movieName),"&amp;uploadURL=",encodeURIComponent(this.settings.upload_url),"&amp;useQueryString=",encodeURIComponent(this.settings.use_query_string),"&amp;requeueOnError=",encodeURIComponent(this.settings.requeue_on_error),"&amp;httpSuccess=",encodeURIComponent(b),"&amp;assumeSuccessTimeout=",encodeURIComponent(this.settings.assume_success_timeout),"&amp;params=",
encodeURIComponent(a),"&amp;filePostName=",encodeURIComponent(this.settings.file_post_name),"&amp;fileTypes=",encodeURIComponent(this.settings.file_types),"&amp;fileTypesDescription=",encodeURIComponent(this.settings.file_types_description),"&amp;fileSizeLimit=",encodeURIComponent(this.settings.file_size_limit),"&amp;fileUploadLimit=",encodeURIComponent(this.settings.file_upload_limit),"&amp;fileQueueLimit=",encodeURIComponent(this.settings.file_queue_limit),"&amp;debugEnabled=",encodeURIComponent(this.settings.debug_enabled),
"&amp;buttonImageURL=",encodeURIComponent(this.settings.button_image_url),"&amp;buttonWidth=",encodeURIComponent(this.settings.button_width),"&amp;buttonHeight=",encodeURIComponent(this.settings.button_height),"&amp;buttonText=",encodeURIComponent(this.settings.button_text),"&amp;buttonTextTopPadding=",encodeURIComponent(this.settings.button_text_top_padding),"&amp;buttonTextLeftPadding=",encodeURIComponent(this.settings.button_text_left_padding),"&amp;buttonTextStyle=",encodeURIComponent(this.settings.button_text_style),
"&amp;buttonAction=",encodeURIComponent(this.settings.button_action),"&amp;buttonDisabled=",encodeURIComponent(this.settings.button_disabled),"&amp;buttonCursor=",encodeURIComponent(this.settings.button_cursor)].join("")};SWFUpload.prototype.getMovieElement=function(){void 0==this.movieElement&&(this.movieElement=document.getElementById(this.movieName));if(null===this.movieElement)throw"Could not find Flash element";return this.movieElement};
SWFUpload.prototype.buildParamString=function(){var a=this.settings.post_params,b=[];if("object"===typeof a)for(var c in a)a.hasOwnProperty(c)&&b.push(encodeURIComponent(c.toString())+"="+encodeURIComponent(a[c].toString()));return b.join("&amp;")};
SWFUpload.prototype.destroy=function(){try{this.cancelUpload(null,!1);var a=null;if((a=this.getMovieElement())&&"unknown"===typeof a.CallFunction){for(var b in a)try{"function"===typeof a[b]&&(a[b]=null)}catch(c){}try{a.parentNode.removeChild(a)}catch(d){}}window[this.movieName]=null;SWFUpload.instances[this.movieName]=null;delete SWFUpload.instances[this.movieName];this.movieName=this.eventQueue=this.customSettings=this.settings=this.movieElement=null;return!0}catch(e){return!1}};
SWFUpload.prototype.displayDebugInfo=function(){this.debug(["---SWFUpload Instance Info---\nVersion: ",SWFUpload.version,"\nMovie Name: ",this.movieName,"\nSettings:\n\tupload_url:               ",this.settings.upload_url,"\n\tflash_url:                ",this.settings.flash_url,"\n\tuse_query_string:         ",this.settings.use_query_string.toString(),"\n\trequeue_on_error:         ",this.settings.requeue_on_error.toString(),"\n\thttp_success:             ",this.settings.http_success.join(", "),"\n\tassume_success_timeout:   ",
this.settings.assume_success_timeout,"\n\tfile_post_name:           ",this.settings.file_post_name,"\n\tpost_params:              ",this.settings.post_params.toString(),"\n\tfile_types:               ",this.settings.file_types,"\n\tfile_types_description:   ",this.settings.file_types_description,"\n\tfile_size_limit:          ",this.settings.file_size_limit,"\n\tfile_upload_limit:        ",this.settings.file_upload_limit,"\n\tfile_queue_limit:         ",this.settings.file_queue_limit,"\n\tdebug:                    ",
this.settings.debug.toString(),"\n\tprevent_swf_caching:      ",this.settings.prevent_swf_caching.toString(),"\n\tbutton_placeholder_id:    ",this.settings.button_placeholder_id.toString(),"\n\tbutton_placeholder:       ",this.settings.button_placeholder?"Set":"Not Set","\n\tbutton_image_url:         ",this.settings.button_image_url.toString(),"\n\tbutton_width:             ",this.settings.button_width.toString(),"\n\tbutton_height:            ",this.settings.button_height.toString(),"\n\tbutton_text:              ",
this.settings.button_text.toString(),"\n\tbutton_text_style:        ",this.settings.button_text_style.toString(),"\n\tbutton_text_top_padding:  ",this.settings.button_text_top_padding.toString(),"\n\tbutton_text_left_padding: ",this.settings.button_text_left_padding.toString(),"\n\tbutton_action:            ",this.settings.button_action.toString(),"\n\tbutton_disabled:          ",this.settings.button_disabled.toString(),"\n\tcustom_settings:          ",this.settings.custom_settings.toString(),"\nEvent Handlers:\n\tswfupload_loaded_handler assigned:  ",
("function"===typeof this.settings.swfupload_loaded_handler).toString(),"\n\tfile_dialog_start_handler assigned: ",("function"===typeof this.settings.file_dialog_start_handler).toString(),"\n\tfile_queued_handler assigned:       ",("function"===typeof this.settings.file_queued_handler).toString(),"\n\tfile_queue_error_handler assigned:  ",("function"===typeof this.settings.file_queue_error_handler).toString(),"\n\tupload_start_handler assigned:      ",("function"===typeof this.settings.upload_start_handler).toString(),
"\n\tupload_progress_handler assigned:   ",("function"===typeof this.settings.upload_progress_handler).toString(),"\n\tupload_error_handler assigned:      ",("function"===typeof this.settings.upload_error_handler).toString(),"\n\tupload_success_handler assigned:    ",("function"===typeof this.settings.upload_success_handler).toString(),"\n\tupload_complete_handler assigned:   ",("function"===typeof this.settings.upload_complete_handler).toString(),"\n\tdebug_handler assigned:             ",("function"===
typeof this.settings.debug_handler).toString(),"\n"].join(""))};SWFUpload.prototype.addSetting=function(a,b,c){return void 0==b?this.settings[a]=c:this.settings[a]=b};SWFUpload.prototype.getSetting=function(a){return void 0!=this.settings[a]?this.settings[a]:""};
SWFUpload.prototype.callFlash=function(a,b){b=b||[];var c=this.getMovieElement(),d,e;try{e=c.CallFunction('<invoke name="'+a+'" returntype="javascript">'+__flash__argumentsToXML(b,0)+"</invoke>"),d=eval(e)}catch(f){throw"Call to "+a+" failed";}void 0!=d&&"object"===typeof d.post&&(d=this.unescapeFilePostParams(d));return d};SWFUpload.prototype.selectFile=function(){this.callFlash("SelectFile")};SWFUpload.prototype.selectFiles=function(){this.callFlash("SelectFiles")};
SWFUpload.prototype.startUpload=function(a){this.callFlash("StartUpload",[a])};SWFUpload.prototype.cancelUpload=function(a,b){!1!==b&&(b=!0);this.callFlash("CancelUpload",[a,b])};SWFUpload.prototype.stopUpload=function(){this.callFlash("StopUpload")};SWFUpload.prototype.getStats=function(){return this.callFlash("GetStats")};SWFUpload.prototype.setStats=function(a){this.callFlash("SetStats",[a])};
SWFUpload.prototype.getFile=function(a){return"number"===typeof a?this.callFlash("GetFileByIndex",[a]):this.callFlash("GetFile",[a])};SWFUpload.prototype.addFileParam=function(a,b,c){return this.callFlash("AddFileParam",[a,b,c])};SWFUpload.prototype.removeFileParam=function(a,b){this.callFlash("RemoveFileParam",[a,b])};SWFUpload.prototype.setUploadURL=function(a){this.settings.upload_url=a.toString();this.callFlash("SetUploadURL",[a])};
SWFUpload.prototype.setPostParams=function(a){this.settings.post_params=a;this.callFlash("SetPostParams",[a])};SWFUpload.prototype.addPostParam=function(a,b){this.settings.post_params[a]=b;this.callFlash("SetPostParams",[this.settings.post_params])};SWFUpload.prototype.removePostParam=function(a){delete this.settings.post_params[a];this.callFlash("SetPostParams",[this.settings.post_params])};
SWFUpload.prototype.setFileTypes=function(a,b){this.settings.file_types=a;this.settings.file_types_description=b;this.callFlash("SetFileTypes",[a,b])};SWFUpload.prototype.setFileSizeLimit=function(a){this.settings.file_size_limit=a;this.callFlash("SetFileSizeLimit",[a])};SWFUpload.prototype.setFileUploadLimit=function(a){this.settings.file_upload_limit=a;this.callFlash("SetFileUploadLimit",[a])};
SWFUpload.prototype.setFileQueueLimit=function(a){this.settings.file_queue_limit=a;this.callFlash("SetFileQueueLimit",[a])};SWFUpload.prototype.setFilePostName=function(a){this.settings.file_post_name=a;this.callFlash("SetFilePostName",[a])};SWFUpload.prototype.setUseQueryString=function(a){this.settings.use_query_string=a;this.callFlash("SetUseQueryString",[a])};SWFUpload.prototype.setRequeueOnError=function(a){this.settings.requeue_on_error=a;this.callFlash("SetRequeueOnError",[a])};
SWFUpload.prototype.setHTTPSuccess=function(a){"string"===typeof a&&(a=a.replace(" ","").split(","));this.settings.http_success=a;this.callFlash("SetHTTPSuccess",[a])};SWFUpload.prototype.setAssumeSuccessTimeout=function(a){this.settings.assume_success_timeout=a;this.callFlash("SetAssumeSuccessTimeout",[a])};SWFUpload.prototype.setDebugEnabled=function(a){this.settings.debug_enabled=a;this.callFlash("SetDebugEnabled",[a])};
SWFUpload.prototype.setButtonImageURL=function(a){void 0==a&&(a="");this.settings.button_image_url=a;this.callFlash("SetButtonImageURL",[a])};SWFUpload.prototype.setButtonDimensions=function(a,b){this.settings.button_width=a;this.settings.button_height=b;var c=this.getMovieElement();void 0!=c&&(c.style.width=a+"px",c.style.height=b+"px");this.callFlash("SetButtonDimensions",[a,b])};SWFUpload.prototype.setButtonText=function(a){this.settings.button_text=a;this.callFlash("SetButtonText",[a])};
SWFUpload.prototype.setButtonTextPadding=function(a,b){this.settings.button_text_top_padding=b;this.settings.button_text_left_padding=a;this.callFlash("SetButtonTextPadding",[a,b])};SWFUpload.prototype.setButtonTextStyle=function(a){this.settings.button_text_style=a;this.callFlash("SetButtonTextStyle",[a])};SWFUpload.prototype.setButtonDisabled=function(a){this.settings.button_disabled=a;this.callFlash("SetButtonDisabled",[a])};
SWFUpload.prototype.setButtonAction=function(a){this.settings.button_action=a;this.callFlash("SetButtonAction",[a])};SWFUpload.prototype.setButtonCursor=function(a){this.settings.button_cursor=a;this.callFlash("SetButtonCursor",[a])};
SWFUpload.prototype.queueEvent=function(a,b){void 0==b?b=[]:b instanceof Array||(b=[b]);var c=this;if("function"===typeof this.settings[a])this.eventQueue.push(function(){this.settings[a].apply(this,b)}),setTimeout(function(){c.executeNextEvent()},0);else if(null!==this.settings[a])throw"Event handler "+a+" is unknown or is not a function";};SWFUpload.prototype.executeNextEvent=function(){var a=this.eventQueue?this.eventQueue.shift():null;"function"===typeof a&&a.apply(this)};
SWFUpload.prototype.unescapeFilePostParams=function(a){var b=/[$]([0-9a-f]{4})/i,c={},d;if(void 0!=a){for(var e in a.post)if(a.post.hasOwnProperty(e)){d=e;for(var f;null!==(f=b.exec(d));)d=d.replace(f[0],String.fromCharCode(parseInt("0x"+f[1],16)));c[d]=a.post[e]}a.post=c}return a};SWFUpload.prototype.testExternalInterface=function(){try{return this.callFlash("TestExternalInterface")}catch(a){return!1}};
SWFUpload.prototype.flashReady=function(){var a=this.getMovieElement();a?(this.cleanUp(a),this.queueEvent("swfupload_loaded_handler")):this.debug("Flash called back ready but the flash movie can't be found.")};
SWFUpload.prototype.cleanUp=function(a){try{if(this.movieElement&&"unknown"===typeof a.CallFunction){this.debug("Removing Flash functions hooks (this should only run in IE and should prevent memory leaks)");for(var b in a)try{"function"===typeof a[b]&&(a[b]=null)}catch(c){}}}catch(d){}window.__flash__removeCallback=function(a,b){try{a&&(a[b]=null)}catch(c){}}};SWFUpload.prototype.fileDialogStart=function(){this.queueEvent("file_dialog_start_handler")};
SWFUpload.prototype.fileQueued=function(a){a=this.unescapeFilePostParams(a);this.queueEvent("file_queued_handler",a)};SWFUpload.prototype.fileQueueError=function(a,b,c){a=this.unescapeFilePostParams(a);this.queueEvent("file_queue_error_handler",[a,b,c])};SWFUpload.prototype.fileDialogComplete=function(a,b,c){this.queueEvent("file_dialog_complete_handler",[a,b,c])};SWFUpload.prototype.uploadStart=function(a){a=this.unescapeFilePostParams(a);this.queueEvent("return_upload_start_handler",a)};
SWFUpload.prototype.returnUploadStart=function(a){var b;if("function"===typeof this.settings.upload_start_handler)a=this.unescapeFilePostParams(a),b=this.settings.upload_start_handler.call(this,a);else if(void 0!=this.settings.upload_start_handler)throw"upload_start_handler must be a function";void 0===b&&(b=!0);this.callFlash("ReturnUploadStart",[!!b])};SWFUpload.prototype.uploadProgress=function(a,b,c){a=this.unescapeFilePostParams(a);this.queueEvent("upload_progress_handler",[a,b,c])};
SWFUpload.prototype.uploadError=function(a,b,c){a=this.unescapeFilePostParams(a);this.queueEvent("upload_error_handler",[a,b,c])};SWFUpload.prototype.uploadSuccess=function(a,b,c){a=this.unescapeFilePostParams(a);this.queueEvent("upload_success_handler",[a,b,c])};SWFUpload.prototype.uploadComplete=function(a){a=this.unescapeFilePostParams(a);this.queueEvent("upload_complete_handler",a)};SWFUpload.prototype.debug=function(a){this.queueEvent("debug_handler",a)};
SWFUpload.prototype.debugMessage=function(a){if(this.settings.debug){var b=[];if("object"===typeof a&&"string"===typeof a.name&&"string"===typeof a.message){for(var c in a)a.hasOwnProperty(c)&&b.push(c+": "+a[c]);a=b.join("\n")||"";b=a.split("\n");a="EXCEPTION: "+b.join("\nEXCEPTION: ")}SWFUpload.Console.writeLine(a)}};SWFUpload.Console={};
SWFUpload.Console.writeLine=function(a){var b,c;try{b=document.getElementById("SWFUpload_Console"),b||(c=document.createElement("form"),document.getElementsByTagName("body")[0].appendChild(c),b=document.createElement("textarea"),b.id="SWFUpload_Console",b.style.fontFamily="monospace",b.setAttribute("wrap","off"),b.wrap="off",b.style.overflow="auto",b.style.width="700px",b.style.height="350px",b.style.margin="5px",c.appendChild(b)),b.value+=a+"\n",b.scrollTop=b.scrollHeight-b.clientHeight}catch(d){alert("Exception: "+
d.name+" Message: "+d.message)}};
(function(a){var b={init:function(b,e){return this.each(function(){var f=a(this),g=f.clone(),h=a.extend({id:f.attr("id"),swf:"uploadify.swf",uploader:"uploadify.php",auto:!0,buttonClass:"",buttonCursor:"hand",buttonImage:null,buttonText:"SELECT FILES",checkExisting:!1,debug:!1,fileObjName:"Filedata",fileSizeLimit:0,fileTypeDesc:"All Files",fileTypeExts:"*.*",height:30,method:"post",multi:!0,formData:{},preventCaching:!0,progressData:"percentage",queueID:!1,queueSizeLimit:999,removeCompleted:!0,removeTimeout:3,
requeueErrors:!1,successTimeout:30,uploadLimit:0,width:120,overrideEvents:[]},b),k={assume_success_timeout:h.successTimeout,button_placeholder_id:h.id,button_width:h.width,button_height:h.height,button_text:null,button_text_style:null,button_text_top_padding:0,button_text_left_padding:0,button_action:h.multi?SWFUpload.BUTTON_ACTION.SELECT_FILES:SWFUpload.BUTTON_ACTION.SELECT_FILE,button_disabled:!1,button_cursor:"arrow"==h.buttonCursor?SWFUpload.CURSOR.ARROW:SWFUpload.CURSOR.HAND,button_window_mode:SWFUpload.WINDOW_MODE.TRANSPARENT,
debug:h.debug,requeue_on_error:h.requeueErrors,file_post_name:h.fileObjName,file_size_limit:h.fileSizeLimit,file_types:h.fileTypeExts,file_types_description:h.fileTypeDesc,file_queue_limit:h.queueSizeLimit,file_upload_limit:h.uploadLimit,flash_url:h.swf,prevent_swf_caching:h.preventCaching,post_params:h.formData,upload_url:h.uploader,use_query_string:"get"==h.method,file_dialog_complete_handler:c.onDialogClose,file_dialog_start_handler:c.onDialogOpen,file_queued_handler:c.onSelect,file_queue_error_handler:c.onSelectError,
swfupload_loaded_handler:h.onSWFReady,upload_complete_handler:c.onUploadComplete,upload_error_handler:c.onUploadError,upload_progress_handler:c.onUploadProgress,upload_start_handler:c.onUploadStart,upload_success_handler:c.onUploadSuccess};e&&(k=a.extend(k,e));k=a.extend(k,h);if(9<=swfobject.getFlashPlayerVersion().major){window["uploadify_"+h.id]=new SWFUpload(k);k=window["uploadify_"+h.id];f.data("uploadify",k);var m=a("<div />",{id:h.id,"class":"uploadify",css:{height:h.height+"px",width:h.width+
"px"}});a("#"+k.movieName).wrap(m);m=a("#"+h.id);m.data("uploadify",k);var r=a("<div />",{id:h.id+"-button","class":"uploadify-button "+h.buttonClass});h.buttonImage&&r.css({"background-image":"url('"+h.buttonImage+"')","text-indent":"-9999px"});r.html('<span class="uploadify-button-text">'+h.buttonText+"</span>").css({height:h.height+"px","line-height":h.height+"px",width:h.width+"px"});m.append(r);a("#"+k.movieName).css({position:"absolute","z-index":1});if(!h.queueID){var D=a("<div />",{id:h.id+
"-queue","class":"uploadify-queue"});m.after(D);k.settings.queueID=h.id+"-queue";k.settings.defaultQueue=!0}k.queueData={files:{},filesSelected:0,filesQueued:0,filesReplaced:0,filesCancelled:0,filesErrored:0,uploadsSuccessful:0,uploadsErrored:0,averageSpeed:0,queueLength:0,queueSize:0,uploadSize:0,queueBytesUploaded:0,uploadQueue:[],errorMsg:"Some files were not added to the queue:"};k.original=g;k.wrapper=m;k.button=r;k.queue=D;h.onInit&&h.onInit.call(f,k)}else h.onFallback&&h.onFallback.call(f)})},
cancel:function(b,c){var f=arguments;this.each(function(){var b=a(this),c=b.data("uploadify"),d=c.settings,e=-1;if(f[0])if("*"==f[0]){var r=c.queueData.queueLength;a("#"+d.queueID).find(".uploadify-queue-item").each(function(){e++;!0===f[1]?c.cancelUpload(a(this).attr("id"),!1):c.cancelUpload(a(this).attr("id"));a(this).find(".data").removeClass("data").html(" - Cancelled");a(this).find(".uploadify-progress-bar").remove();a(this).delay(1E3+100*e).fadeOut(500,function(){a(this).remove()})});c.queueData.queueSize=
0;c.queueData.queueLength=0;d.onClearQueue&&d.onClearQueue.call(b,r)}else for(b=0;b<f.length;b++)c.cancelUpload(f[b]),a("#"+f[b]).find(".data").removeClass("data").html(" - Cancelled"),a("#"+f[b]).find(".uploadify-progress-bar").remove(),a("#"+f[b]).delay(1E3+100*b).fadeOut(500,function(){a(this).remove()});else b=a("#"+d.queueID).find(".uploadify-queue-item").get(0),$item=a(b),c.cancelUpload($item.attr("id")),$item.find(".data").removeClass("data").html(" - Cancelled"),$item.find(".uploadify-progress-bar").remove(),
$item.delay(1E3).fadeOut(500,function(){a(this).remove()})})},destroy:function(){this.each(function(){var b=a(this).data("uploadify"),c=b.settings;b.destroy();c.defaultQueue&&a("#"+c.queueID).remove();a("#"+c.id).replaceWith(b.original);c.onDestroy&&c.onDestroy.call(this);delete b})},disable:function(b){this.each(function(){var c=a(this).data("uploadify"),f=c.settings;b?(c.button.addClass("disabled"),f.onDisable&&f.onDisable.call(this)):(c.button.removeClass("disabled"),f.onEnable&&f.onEnable.call(this));
c.setButtonDisabled(b)})},settings:function(b,c,f){var g=arguments,h=c;this.each(function(){var k=a(this).data("uploadify"),m=k.settings;if("object"==typeof g[0])for(var r in c)setData(r,c[r]);if(1===g.length)h=m[b];else{switch(b){case "uploader":k.setUploadURL(c);break;case "formData":f||(c=a.extend(m.formData,c));k.setPostParams(m.formData);break;case "method":"get"==c?k.setUseQueryString(!0):k.setUseQueryString(!1);break;case "fileObjName":k.setFilePostName(c);break;case "fileTypeExts":k.setFileTypes(c,
m.fileTypeDesc);break;case "fileTypeDesc":k.setFileTypes(m.fileTypeExts,c);break;case "fileSizeLimit":k.setFileSizeLimit(c);break;case "uploadLimit":k.setFileUploadLimit(c);break;case "queueSizeLimit":k.setFileQueueLimit(c);break;case "buttonImage":k.button.css("background-image",settingValue);break;case "buttonCursor":"arrow"==c?k.setButtonCursor(SWFUpload.CURSOR.ARROW):k.setButtonCursor(SWFUpload.CURSOR.HAND);break;case "buttonText":a("#"+m.id+"-button").find(".uploadify-button-text").html(c);break;
case "width":k.setButtonDimensions(c,m.height);break;case "height":k.setButtonDimensions(m.width,c);break;case "multi":c?k.setButtonAction(SWFUpload.BUTTON_ACTION.SELECT_FILES):k.setButtonAction(SWFUpload.BUTTON_ACTION.SELECT_FILE)}m[b]=c}});if(1===g.length)return h},stop:function(){this.each(function(){var b=a(this).data("uploadify");b.queueData.averageSpeed=0;b.queueData.uploadSize=0;b.queueData.bytesUploaded=0;b.queueData.uploadQueue=[];b.stopUpload()})},upload:function(){var b=arguments;this.each(function(){var c=
a(this).data("uploadify");c.queueData.averageSpeed=0;c.queueData.uploadSize=0;c.queueData.bytesUploaded=0;c.queueData.uploadQueue=[];if(b[0])if("*"==b[0])c.queueData.uploadSize=c.queueData.queueSize,c.queueData.uploadQueue.push("*"),c.startUpload();else{for(var f=0;f<b.length;f++)c.queueData.uploadSize+=c.queueData.files[b[f]].size,c.queueData.uploadQueue.push(b[f]);c.startUpload(c.queueData.uploadQueue.shift())}else c.startUpload()})}},c={onDialogOpen:function(){var a=this.settings;this.queueData.errorMsg=
"Some files were not added to the queue:";this.queueData.filesReplaced=0;this.queueData.filesCancelled=0;a.onDialogOpen&&a.onDialogOpen.call(this)},onDialogClose:function(b,c,f){var g=this.settings;this.queueData.filesErrored=b-c;this.queueData.filesSelected=b;this.queueData.filesQueued=c-this.queueData.filesCancelled;this.queueData.queueLength=f;0>a.inArray("onDialogClose",g.overrideEvents)&&0<this.queueData.filesErrored&&alert(this.queueData.errorMsg);g.onDialogClose&&g.onDialogClose.call(this,
this.queueData);g.auto&&a("#"+g.id).uploadify("upload","*")},onSelect:function(b){var c=this.settings,f={},g;for(g in this.queueData.files)if(f=this.queueData.files[g],!0!=f.uploaded&&f.name==b.name)if(confirm('The file named "'+b.name+'" is already in the queue.\nDo you want to replace the existing item in the queue?'))a("#"+f.id).remove(),this.cancelUpload(f.id),this.queueData.filesReplaced++;else return this.cancelUpload(b.id),this.queueData.filesCancelled++,!1;f=Math.round(b.size/1024);g="KB";
1E3<f&&(f=Math.round(f/1E3),g="MB");var h=f.toString().split("."),f=h[0];1<h.length&&(f+="."+h[1].substr(0,2));f+=g;g=b.name;25<g.length&&(g=g.substr(0,25)+"...");0>a.inArray("onSelect",c.overrideEvents)&&a("#"+c.queueID).append('<div id="'+b.id+'" class="uploadify-queue-item">\t\t\t\t\t<div class="cancel">\t\t\t\t\t\t<a href="javascript:$(\'#'+c.id+"').uploadify('cancel', '"+b.id+'\')">X</a>\t\t\t\t\t</div>\t\t\t\t\t<span class="fileName">'+g+" ("+f+')</span><span class="data"></span>\t\t\t\t\t<div class="uploadify-progress">\t\t\t\t\t\t<div class="uploadify-progress-bar">\x3c!--Progress Bar--\x3e</div>\t\t\t\t\t</div>\t\t\t\t</div>');
this.queueData.queueSize+=b.size;this.queueData.files[b.id]=b;c.onSelect&&c.onSelect.apply(this,arguments)},onSelectError:function(b,c,f){var g=this.settings;if(0>a.inArray("onSelectError",g.overrideEvents))switch(c){case SWFUpload.QUEUE_ERROR.QUEUE_LIMIT_EXCEEDED:this.queueData.errorMsg=g.queueSizeLimit>f?this.queueData.errorMsg+("\nThe number of files selected exceeds the remaining upload limit ("+f+")."):this.queueData.errorMsg+("\nThe number of files selected exceeds the queue size limit ("+g.queueSizeLimit+
").");break;case SWFUpload.QUEUE_ERROR.FILE_EXCEEDS_SIZE_LIMIT:this.queueData.errorMsg+='\nThe file "'+b.name+'" exceeds the size limit ('+g.fileSizeLimit+").";break;case SWFUpload.QUEUE_ERROR.ZERO_BYTE_FILE:this.queueData.errorMsg+='\nThe file "'+b.name+'" is empty.';break;case SWFUpload.QUEUE_ERROR.FILE_EXCEEDS_SIZE_LIMIT:this.queueData.errorMsg+='\nThe file "'+b.name+'" is not an accepted file type ('+g.fileTypeDesc+")."}c!=SWFUpload.QUEUE_ERROR.QUEUE_LIMIT_EXCEEDED&&delete this.queueData.files[b.id];
g.onSelectError&&g.onSelectError.apply(this,arguments)},onQueueComplete:function(){this.settings.onQueueComplete&&this.settings.onQueueComplete.call(this,this.settings.queueData)},onUploadComplete:function(b){var c=this.settings,f=this,g=this.getStats();this.queueData.queueLength=g.files_queued;"*"==this.queueData.uploadQueue[0]?0<this.queueData.queueLength?this.startUpload():(this.queueData.uploadQueue=[],c.onQueueComplete&&c.onQueueComplete.call(this,this.queueData)):0<this.queueData.uploadQueue.length?
this.startUpload(this.queueData.uploadQueue.shift()):(this.queueData.uploadQueue=[],c.onQueueComplete&&c.onQueueComplete.call(this,this.queueData));if(0>a.inArray("onUploadComplete",c.overrideEvents))if(c.removeCompleted)switch(b.filestatus){case SWFUpload.FILE_STATUS.COMPLETE:setTimeout(function(){a("#"+b.id)&&(f.queueData.queueSize-=b.size,f.queueData.queueLength-=1,delete f.queueData.files[b.id],a("#"+b.id).fadeOut(500,function(){a(this).remove()}))},1E3*c.removeTimeout);break;case SWFUpload.FILE_STATUS.ERROR:c.requeueErrors||
setTimeout(function(){a("#"+b.id)&&(f.queueData.queueSize-=b.size,f.queueData.queueLength-=1,delete f.queueData.files[b.id],a("#"+b.id).fadeOut(500,function(){a(this).remove()}))},1E3*c.removeTimeout)}else b.uploaded=!0;c.onUploadComplete&&c.onUploadComplete.call(this,b)},onUploadError:function(b,c,f){var g=this.settings,h="Error";switch(c){case SWFUpload.UPLOAD_ERROR.HTTP_ERROR:h="HTTP Error ("+f+")";break;case SWFUpload.UPLOAD_ERROR.MISSING_UPLOAD_URL:h="Missing Upload URL";break;case SWFUpload.UPLOAD_ERROR.IO_ERROR:h=
"IO Error";break;case SWFUpload.UPLOAD_ERROR.SECURITY_ERROR:h="Security Error";break;case SWFUpload.UPLOAD_ERROR.UPLOAD_LIMIT_EXCEEDED:alert("The upload limit has been reached ("+f+").");h="Exceeds Upload Limit";break;case SWFUpload.UPLOAD_ERROR.UPLOAD_FAILED:h="Failed";break;case SWFUpload.UPLOAD_ERROR.FILE_VALIDATION_FAILED:h="Validation Error";break;case SWFUpload.UPLOAD_ERROR.FILE_CANCELLED:h="Cancelled";this.queueData.queueSize-=b.size;this.queueData.queueLength-=1;if(b.status==SWFUpload.FILE_STATUS.IN_PROGRESS||
0<=a.inArray(b.id,this.queueData.uploadQueue))this.queueData.uploadSize-=b.size;g.onCancel&&g.onCancel.call(this,b);delete this.queueData.files[b.id];break;case SWFUpload.UPLOAD_ERROR.UPLOAD_STOPPED:h="Stopped"}0>a.inArray("onUploadError",g.overrideEvents)&&(c!=SWFUpload.UPLOAD_ERROR.FILE_CANCELLED&&c!=SWFUpload.UPLOAD_ERROR.UPLOAD_STOPPED&&a("#"+b.id).addClass("uploadify-error"),a("#"+b.id).find(".uploadify-progress-bar").css("width","1px"),c!=SWFUpload.UPLOAD_ERROR.SPECIFIED_FILE_ID_NOT_FOUND&&
b.status!=SWFUpload.FILE_STATUS.COMPLETE&&a("#"+b.id).find(".data").html(" - "+h));var k=this.getStats();this.queueData.uploadsErrored=k.upload_errors;g.onUploadError&&g.onUploadError.call(this,b,c,f,h)},onUploadProgress:function(b,c,f){var g=this.settings,h=(new Date).getTime(),k=h-this.timer;500<k&&(this.timer=h);var m=c-this.bytesLoaded;this.bytesLoaded=c;var h=this.queueData.queueBytesUploaded+c,r=Math.round(c/f*100),D="KB/s",w=0,m=Math.floor(m/1024/(k/1E3)*10)/10;this.queueData.averageSpeed=
0<this.queueData.averageSpeed?Math.floor((this.queueData.averageSpeed+m)/2):Math.floor(m);1E3<m&&(w=0.001*m,this.queueData.averageSpeed=Math.floor(w),D="MB/s");0>a.inArray("onUploadProgress",g.overrideEvents)&&("percentage"==g.progressData?a("#"+b.id).find(".data").html(" - "+r+"%"):"speed"==g.progressData&&500<k&&a("#"+b.id).find(".data").html(" - "+this.queueData.averageSpeed+D),a("#"+b.id).find(".uploadify-progress-bar").css("width",r+"%"));g.onUploadProgress&&g.onUploadProgress.call(this,b,c,
f,h,this.queueData.uploadSize)},onUploadStart:function(b){var c=this.settings;this.timer=(new Date).getTime();this.bytesLoaded=0;0==this.queueData.uploadQueue.length&&(this.queueData.uploadSize=b.size);c.checkExisting&&a.ajax({type:"POST",async:!1,url:c.checkExisting,data:{filename:b.name},success:function(c){1!=c||confirm('A file with the name "'+b.name+'" already exists on the server.\nWould you like to replace the existing file?')||(this.cancelUpload(b.id),a("#"+b.id).remove(),0<this.queueData.uploadQueue.length&&
0<this.queueData.queueLength&&("*"==this.queueData.uploadQueue[0]?this.startUpload():this.startUpload(this.queueData.uploadQueue.shift())))}});c.onUploadStart&&c.onUploadStart.call(this,b)},onUploadSuccess:function(b,c,f){var g=this.settings,h=this.getStats();this.queueData.uploadsSuccessful=h.successful_uploads;this.queueData.queueBytesUploaded+=b.size;0>a.inArray("onUploadSuccess",g.overrideEvents)&&a("#"+b.id).find(".data").html(" - Complete");g.onUploadSuccess&&g.onUploadSuccess.call(this,b,c,
f)}};a.fn.uploadify=function(c){if(b[c])return b[c].apply(this,Array.prototype.slice.call(arguments,1));if("object"!==typeof c&&c)a.error("The method "+c+" does not exist in $.uploadify");else return b.init.apply(this,arguments)}})($);(function(a){jQuery.fn.html5_upload=function(b){function c(a){return a.name||a.fileName}function d(){function d(r){if(r==f)w.triggerHandler("html5_upload.onFinish",[f]),b.setStatus(b.genStatus(1,!0)),w.attr("disabled",!1),b.autoclear&&w.val("");else{var m=e[r];if(!w.triggerHandler("html5_upload.onStartOne",[c(m),r,f]))return d(r+1);b.setStatus(b.genStatus(0));b.setName(b.genName(c(m),r,f));b.setProgress(b.genProgress(0,m.size||m.fileSize));E.upload.onprogress=function(a){w.triggerHandler("html5_upload.onProgress",
[a.loaded/a.total,c(m),r,f]);b.setStatus(b.genStatus(a.loaded/a.total));b.setProgress(b.genProgress(a.loaded,a.total))};E.onload=function(a){200!=E.status?(w.triggerHandler("html5_upload.onError",[c(m),a]),b.stopOnFirstError||d(r+1)):(w.triggerHandler("html5_upload.onFinishOne",[E.responseText,c(m),r,f]),b.setStatus(b.genStatus(1,!0)),b.setProgress(b.genProgress(m.size||m.fileSize,m.size||m.fileSize)),d(r+1))};E.onabort=function(){w[0].html5_upload.continue_after_abort?d(r+1):(w.attr("disabled",!1),
b.autoclear&&w.val(""))};E.onerror=function(a){w.triggerHandler("html5_upload.onError",[c(m),a]);b.stopOnFirstError||d(r+1)};E.open(b.method,"function"==typeof b.url?b.url(r):b.url,!0);a.each(b.headers,function(a,d){d="function"==typeof d?d(m):d;w.prev().prev().val(c(m));w.prev().prev().prev().val(c(m)+";"+b.uuid);if(!1===d)return!0;E.setRequestHeader(a,encodeURIComponent(d))});if(b.sendBoundary)if(window.FormData){var D=new FormData;D.append("function"==typeof b.fieldName?b.fieldName():b.fieldName,
m);a.each(b.extraFields,function(a,b){D.append(a,b)});E.send(D)}else if(m.getAsBinary){var K="------multipartformboundary"+(new Date).getTime(),v;v="--"+K;v+="\r\n";v+='Content-Disposition: form-data; name="'+("function"==typeof b.fieldName?b.fieldName():b.fieldName)+'"';fileName=unescape(encodeURIComponent(c(m)));v+='; filename="'+fileName+'"';v+="\r\n";v+="Content-Type: "+m.type;v+="\r\n";v+="\r\n";v+=m.getAsBinary();v+="\r\n";v+="--";v+=K;v+="--";v+="\r\n";E.setRequestHeader("content-type","multipart/form-data; boundary="+
K);E.sendAsBinary(v)}else b.onBrowserIncompatible();else E.send(m)}}for(var e=this.files,f=e.length,m=0;m<f;m++){var r=c(e[m]),r=globalURL+"web/default/upload_action_uploadify_exists.jsp?filename="+encodeURIComponent(escape(r)),D=!0;a.ajax({type:"get",url:r,async:!1,success:function(b,c){"1"==a.trim(b)&&(confirm(EELang.replaceFile)||(D=!1))}});if(!D)return}var w=a(this);if(!w.triggerHandler("html5_upload.onStart",[f]))return!1;this.disabled=!0;var E=this.html5_upload.xhr;this.html5_upload.continue_after_abort=
!0;d(0);return!0}var e="onStart onStartOne onProgress onFinishOne onFinish onError".split(" ");b=jQuery.extend({onStart:function(a,b){return!0},onStartOne:function(a,b,c,d){return!0},onProgress:function(a,b,c,d,e){},onFinishOne:function(a,b,c,d,e){},onFinish:function(a,b){},onError:function(a,b,c){},onBrowserIncompatible:function(){alert("Sorry, but your browser is incompatible with uploading files using HTML5 (at least, with current preferences.\n Please install the latest version of Firefox, Safari or Chrome")},
autostart:!0,uuid:"",autoclear:!0,stopOnFirstError:!1,sendBoundary:!1,fieldName:"user_file[]",oldFileValue:"",extraFields:{},method:"post",STATUSES:{STARTED:"Started",PROGRESS:"Progress",LOADED:"Loaded",FINISHED:"Finished"},headers:{"Cache-Control":"no-cache","X-Requested-With":"XMLHttpRequest","X-File-Name":function(a){return c(a)},"X-File-Size":function(a){return a.size||a.fileSize},"X-CSRF-Token":a('meta[name="csrf-token"]').attr("content"),"Content-Type":function(a){return b.sendBoundary?!1:"multipart/form-data"}},
setName:function(a){},setStatus:function(a){},setProgress:function(a){},genName:function(a,b,c){return a},genStatus:function(a,c){return c?b.STATUSES.FINISHED:0==a?b.STATUSES.STARTED:1==a?b.STATUSES.LOADED:b.STATUSES.PROGRESS},genProgress:function(a,b){return a/b}},b);try{return this.each(function(){this.html5_upload={xhr:new XMLHttpRequest,continue_after_abort:!0};b.autostart&&a(this).bind("change",d);for(event in e)b[e[event]]&&a(this).bind("html5_upload."+e[event],b[e[event]]);a(this).bind("html5_upload.start",
d).bind("html5_upload.cancelOne",function(){this.html5_upload.xhr.abort()}).bind("html5_upload.cancelAll",function(){this.html5_upload.continue_after_abort=!1;this.html5_upload.xhr.abort()}).bind("html5_upload.destroy",function(){this.html5_upload.continue_after_abort=!1;this.xhr.abort();delete this.html5_upload;a(this).unbind("html5_upload.*").unbind("change",d)})})}catch(f){return b.onBrowserIncompatible(),!1}}})(jQuery);(function(a){function b(a){for(var b=[];a=h(a);)b[b.length]=a[0];return b}function c(b){return a("table.treeTable tbody tr."+k.childPrefix+b[0].id)}function d(a){a=parseInt(a[0].style.paddingLeft,10);return isNaN(a)?m:a}function e(b,f){var g=a(b.children("td")[k.treeColumn]);g[0].style.paddingLeft=d(g)+f+"px";c(b).each(function(){e(a(this),f)})}function f(b){if(!b.hasClass("initialized")){b.addClass("initialized");var e=c(b);!b.hasClass("parent")&&0<e.length&&b.addClass("parent");if(b.hasClass("parent")){var f=
a(b.children("td")[k.treeColumn]),g=d(f)+k.indent;e.each(function(){a(this).children("td")[k.treeColumn].style.paddingLeft=g+"px"});k.expandable&&(f.prepend('<span style="margin-left: -'+k.indent+"px; padding-left: "+k.indent+'px" class="expander"></span>'),a(f[0].firstChild).click(function(){b.toggleBranch()}),k.clickableNodeNames&&(f[0].style.cursor="pointer",a(f).click(function(a){"expander"!=a.target.className&&b.toggleBranch()})),b.hasClass("expanded")||b.hasClass("collapsed")||b.addClass(k.initialState),
b.hasClass("expanded")&&b.expand())}}}function g(b,d){b.insertAfter(d);c(b).reverse().each(function(){g(a(this),b[0])})}function h(b){b=b[0].className.split(" ");for(key in b)if(b[key].match("child-of-"))return a("#"+b[key].substring(9))}var k,m;a.fn.treeTable=function(b){k=a.extend({},a.fn.treeTable.defaults,b);return this.each(function(){a(this).addClass("treeTable").find("tbody tr").each(function(){k.expandable&&-1!=a(this)[0].className.search("child-of-")?"collapsed"==k.initialState&&(this.style.display=
"none"):(isNaN(m)&&(m=parseInt(a(a(this).children("td")[k.treeColumn]).css("padding-left"),10)),f(a(this)))})})};a.fn.treeTable.defaults={childPrefix:"child-of-",clickableNodeNames:!1,expandable:!0,indent:19,initialState:"collapsed",treeColumn:0};a.fn.collapse=function(){a(this).addClass("collapsed");c(a(this)).each(function(){a(this).hasClass("collapsed")||a(this).collapse();this.style.display="none"});return this};a.fn.expand=function(){a(this).removeClass("collapsed").addClass("expanded");c(a(this)).each(function(){f(a(this));
a(this).is(".expanded.parent")&&a(this).expand();a(this).show()});return this};a.fn.appendBranchTo=function(c){var d=a(this),f=h(d),m=a.map(b(a(c)),function(a){return a.id});-1!=a.inArray(d[0].id,m)||f&&c.id==f[0].id||c.id==d[0].id||(e(d,b(d).length*k.indent*-1),f&&d.removeClass(k.childPrefix+f[0].id),d.addClass(k.childPrefix+c.id),g(d,c),e(d,b(d).length*k.indent));return this};a.fn.reverse=function(){return this.pushStack(this.get().reverse(),arguments)};a.fn.toggleBranch=function(){a(this).hasClass("collapsed")?
a(this).expand():a(this).removeClass("expanded").collapse();return this}})(jQuery);(function(a){a.fn.extend({elastic:function(){var b="paddingTop paddingRight paddingBottom paddingLeft fontSize lineHeight fontFamily width fontWeight".split(" ");return this.each(function(){function c(a,b){curratedHeight=Math.floor(parseInt(a,10));e.height()!=curratedHeight&&e.css({height:curratedHeight+"px",overflow:b})}function d(){var a=e.val().replace(/&/g,"&amp;").replace(/  /g,"&nbsp;").replace(/<|>/g,"&gt;").replace(/\n/g,"<br />"),b=f.html();a+"&nbsp;"!=b&&(f.html(a+"&nbsp;"),3<Math.abs(f.height()+
g-e.height())&&(a=f.height()+g,a>=k?c(k,"auto"):a<=h?c(h,"hidden"):c(a,"hidden")))}if("textarea"!=this.type)return!1;var e=a(this),f=a("<div />").css({position:"absolute",display:"none","word-wrap":"break-word"}),g=parseInt(e.css("line-height"),10)||parseInt(e.css("font-size"),"10"),h=parseInt(e.css("height"),10)||3*g,k=parseInt(e.css("max-height"),10)||Number.MAX_VALUE,m=0;0>k&&(k=Number.MAX_VALUE);f.appendTo(e.parent());for(m=b.length;m--;)f.css(b[m].toString(),e.css(b[m].toString()));e.css({overflow:"hidden"});
e.keyup(function(){d()});e.live("input paste",function(a){setTimeout(d,250)});d()})}})})(jQuery);(function(a){var b,c,d,e,f,g,h={},k={},m={},r=0,D={treeId:"",treeObj:null,view:{addDiyDom:null,autoCancelSelected:!0,dblClickExpand:!0,expandSpeed:"fast",fontCss:{},nameIsHTML:!1,selectedMulti:!0,showIcon:!0,showLine:!0,showTitle:!0},data:{key:{children:"children",name:"name",title:""},simpleData:{enable:!1,idKey:"id",pIdKey:"pId",rootPId:null},keep:{parent:!1,leaf:!1}},async:{enable:!1,contentType:"application/x-www-form-urlencoded",type:"post",dataType:"text",url:"",autoParam:[],otherParam:[],dataFilter:null},
callback:{beforeAsync:null,beforeClick:null,beforeRightClick:null,beforeMouseDown:null,beforeMouseUp:null,beforeExpand:null,beforeCollapse:null,onAsyncError:null,onAsyncSuccess:null,onNodeCreated:null,onClick:null,onRightClick:null,onMouseDown:null,onMouseUp:null,onExpand:null,onCollapse:null}},w=[function(a){var b=a.treeObj,c=s.event;b.unbind(c.NODECREATED);b.bind(c.NODECREATED,function(b,c,d){t.apply(a.callback.onNodeCreated,[b,c,d])});b.unbind(c.CLICK);b.bind(c.CLICK,function(b,c,d,z){t.apply(a.callback.onClick,
[b,c,d,z])});b.unbind(c.EXPAND);b.bind(c.EXPAND,function(b,c,d){t.apply(a.callback.onExpand,[b,c,d])});b.unbind(c.COLLAPSE);b.bind(c.COLLAPSE,function(b,c,d){t.apply(a.callback.onCollapse,[b,c,d])});b.unbind(c.ASYNC_SUCCESS);b.bind(c.ASYNC_SUCCESS,function(b,c,d,z){t.apply(a.callback.onAsyncSuccess,[b,c,d,z])});b.unbind(c.ASYNC_ERROR);b.bind(c.ASYNC_ERROR,function(b,c,d,z,e,f){t.apply(a.callback.onAsyncError,[b,c,d,z,e,f])})}],E=[function(a){var b=p.getCache(a);b||(b={},p.setCache(a,b));b.nodes=[];
b.doms=[]}],F=[function(a,b,c,d,e,f){if(c){var g=a.data.key.children;c.level=b;c.tId=a.treeId+"_"+ ++r;c.parentTId=d?d.tId:null;c[g]&&0<c[g].length?("string"==typeof c.open&&(c.open=t.eqs(c.open,"true")),c.open=!!c.open,c.isParent=!0,c.zAsync=!0):(c.open=!1,"string"==typeof c.isParent&&(c.isParent=t.eqs(c.isParent,"true")),c.isParent=!!c.isParent,c.zAsync=!c.isParent);c.isFirstNode=e;c.isLastNode=f;c.getParentNode=function(){return p.getNodeCache(a,c.parentTId)};c.getPreNode=function(){return p.getPreNode(a,
c)};c.getNextNode=function(){return p.getNextNode(a,c)};c.isAjaxing=!1;p.fixPIdKeyValue(a,c)}}],O=[function(a){var z=a.target,H=h[a.data.treeId],I="",k=null,m="",L="",r=null,q=null,v=null;if(t.eqs(a.type,"mousedown"))L="mousedown";else if(t.eqs(a.type,"mouseup"))L="mouseup";else if(t.eqs(a.type,"contextmenu"))L="contextmenu";else if(t.eqs(a.type,"click"))if(t.eqs(z.tagName,"button")&&z.blur(),t.eqs(z.tagName,"button")&&null!==z.getAttribute("treeNode"+s.id.SWITCH))I=z.parentNode.id,m="switchNode";
else{if(v=t.getMDom(H,z,[{tagName:"a",attrName:"treeNode"+s.id.A}]))I=v.parentNode.id,m="clickNode"}else t.eqs(a.type,"dblclick")&&(L="dblclick",v=t.getMDom(H,z,[{tagName:"a",attrName:"treeNode"+s.id.A}]))&&(I=v.parentNode.id,m="switchNode");0<L.length&&0==I.length&&(v=t.getMDom(H,z,[{tagName:"a",attrName:"treeNode"+s.id.A}]))&&(I=v.parentNode.id);if(0<I.length)switch(k=p.getNodeCache(H,I),m){case "switchNode":k.isParent?t.eqs(a.type,"click")||t.eqs(a.type,"dblclick")&&t.apply(H.view.dblClickExpand,
[H.treeId,k],H.view.dblClickExpand)?r=b:m="":m="";break;case "clickNode":r=c}switch(L){case "mousedown":q=d;break;case "mouseup":q=e;break;case "dblclick":q=f;break;case "contextmenu":q=g}return{stop:!1,node:k,nodeEventType:m,nodeEventCallback:r,treeEventType:L,treeEventCallback:q}}],B=[function(a){var b=p.getRoot(a);b||(b={},p.setRoot(a,b));b.children=[];b.expandTriggerFlag=!1;b.curSelectedList=[];b.noSelection=!0;b.createdNodes=[]}],K=[],v=[],R=[],T=[],ba=[],p={addNodeCache:function(a,b){p.getCache(a).nodes[b.tId]=
b},addAfterA:function(a){v.push(a)},addBeforeA:function(a){K.push(a)},addInnerAfterA:function(a){T.push(a)},addInnerBeforeA:function(a){R.push(a)},addInitBind:function(a){w.push(a)},addInitCache:function(a){E.push(a)},addInitNode:function(a){F.push(a)},addInitProxy:function(a){O.push(a)},addInitRoot:function(a){B.push(a)},addNodesData:function(a,b,c){var d=a.data.key.children;b[d]||(b[d]=[]);0<b[d].length&&(b[d][b[d].length-1].isLastNode=!1,q.setNodeLineIcos(a,b[d][b[d].length-1]));b.isParent=!0;
b[d]=b[d].concat(c)},addSelectedNode:function(a,b){var c=p.getRoot(a);p.isSelectedNode(a,b)||c.curSelectedList.push(b)},addCreatedNode:function(a,b){(a.callback.onNodeCreated||a.view.addDiyDom)&&p.getRoot(a).createdNodes.push(b)},addZTreeTools:function(a){ba.push(a)},exSetting:function(b){a.extend(!0,D,b)},fixPIdKeyValue:function(a,b){a.data.simpleData.enable&&(b[a.data.simpleData.pIdKey]=b.parentTId?b.getParentNode()[a.data.simpleData.idKey]:a.data.simpleData.rootPId)},getAfterA:function(a,b,c){for(var d=
0,e=v.length;d<e;d++)v[d].apply(this,arguments)},getBeforeA:function(a,b,c){for(var d=0,e=K.length;d<e;d++)K[d].apply(this,arguments)},getInnerAfterA:function(a,b,c){for(var d=0,e=T.length;d<e;d++)T[d].apply(this,arguments)},getInnerBeforeA:function(a,b,c){for(var d=0,e=R.length;d<e;d++)R[d].apply(this,arguments)},getCache:function(a){return m[a.treeId]},getNextNode:function(a,b){if(!b)return null;var c=a.data.key.children,d=b.parentTId?b.getParentNode():p.getRoot(a);if(!b.isLastNode){if(b.isFirstNode)return d[c][1];
for(var e=1,f=d[c].length-1;e<f;e++)if(d[c][e]===b)return d[c][e+1]}return null},getNodeByParam:function(a,b,c,d){if(!b||!c)return null;for(var e=a.data.key.children,f=0,g=b.length;f<g;f++){if(b[f][c]==d)return b[f];var h=p.getNodeByParam(a,b[f][e],c,d);if(h)return h}return null},getNodeCache:function(a,b){if(!b)return null;var c=m[a.treeId].nodes[b];return c?c:null},getNodes:function(a){return p.getRoot(a)[a.data.key.children]},getNodesByParam:function(a,b,c,d){if(!b||!c)return[];for(var e=a.data.key.children,
f=[],g=0,h=b.length;g<h;g++)b[g][c]==d&&f.push(b[g]),f=f.concat(p.getNodesByParam(a,b[g][e],c,d));return f},getNodesByParamFuzzy:function(a,b,c,d){if(!b||!c)return[];for(var e=a.data.key.children,f=[],g=0,h=b.length;g<h;g++)"string"==typeof b[g][c]&&-1<b[g][c].indexOf(d)&&f.push(b[g]),f=f.concat(p.getNodesByParamFuzzy(a,b[g][e],c,d));return f},getPreNode:function(a,b){if(!b)return null;var c=a.data.key.children,d=b.parentTId?b.getParentNode():p.getRoot(a);if(!b.isFirstNode){if(b.isLastNode)return d[c][d[c].length-
2];for(var e=1,f=d[c].length-1;e<f;e++)if(d[c][e]===b)return d[c][e-1]}return null},getRoot:function(a){return a?k[a.treeId]:null},getSetting:function(a){return h[a]},getSettings:function(){return h},getTitleKey:function(a){return""===a.data.key.title?a.data.key.name:a.data.key.title},getZTreeTools:function(a){return(a=this.getRoot(this.getSetting(a)))?a.treeTools:null},initCache:function(a){for(var b=0,c=E.length;b<c;b++)E[b].apply(this,arguments)},initNode:function(a,b,c,d,e,f){for(var g=0,h=F.length;g<
h;g++)F[g].apply(this,arguments)},initRoot:function(a){for(var b=0,c=B.length;b<c;b++)B[b].apply(this,arguments)},isSelectedNode:function(a,b){for(var c=p.getRoot(a),d=0,e=c.curSelectedList.length;d<e;d++)if(b===c.curSelectedList[d])return!0;return!1},removeNodeCache:function(a,b){var c=a.data.key.children;if(b[c])for(var d=0,e=b[c].length;d<e;d++)arguments.callee(a,b[c][d]);delete p.getCache(a).nodes[b.tId]},removeSelectedNode:function(a,b){for(var c=p.getRoot(a),d=0,e=c.curSelectedList.length;d<
e;d++)b!==c.curSelectedList[d]&&p.getNodeCache(a,c.curSelectedList[d].tId)||(c.curSelectedList.splice(d,1),d--,e--)},setCache:function(a,b){m[a.treeId]=b},setRoot:function(a,b){k[a.treeId]=b},setZTreeTools:function(a,b){for(var c=0,d=ba.length;c<d;c++)ba[c].apply(this,arguments)},transformToArrayFormat:function(a,b){if(!b)return[];var c=a.data.key.children,d=[];if(t.isArray(b))for(var e=0,f=b.length;e<f;e++)d.push(b[e]),b[e][c]&&(d=d.concat(p.transformToArrayFormat(a,b[e][c])));else d.push(b),b[c]&&
(d=d.concat(p.transformToArrayFormat(a,b[c])));return d},transformTozTreeFormat:function(a,b){var c,d,e=a.data.simpleData.idKey,f=a.data.simpleData.pIdKey,g=a.data.key.children;if(!e||""==e||!b)return[];if(t.isArray(b)){var h=[],k=[];c=0;for(d=b.length;c<d;c++)k[b[c][e]]=b[c];c=0;for(d=b.length;c<d;c++)k[b[c][f]]&&b[c][e]!=b[c][f]?(k[b[c][f]][g]||(k[b[c][f]][g]=[]),k[b[c][f]][g].push(b[c])):h.push(b[c]);return h}return[b]}},n={bindEvent:function(a){for(var b=0,c=w.length;b<c;b++)w[b].apply(this,arguments)},
bindTree:function(a){var b={treeId:a.treeId};a=a.treeObj;a.unbind("click",n.proxy);a.bind("click",b,n.proxy);a.unbind("dblclick",n.proxy);a.bind("dblclick",b,n.proxy);a.unbind("mouseover",n.proxy);a.bind("mouseover",b,n.proxy);a.unbind("mouseout",n.proxy);a.bind("mouseout",b,n.proxy);a.unbind("mousedown",n.proxy);a.bind("mousedown",b,n.proxy);a.unbind("mouseup",n.proxy);a.bind("mouseup",b,n.proxy);a.unbind("contextmenu",n.proxy);a.bind("contextmenu",b,n.proxy)},doProxy:function(a){for(var b=[],c=
0,d=O.length;c<d;c++){var e=O[c].apply(this,arguments);b.push(e);if(e.stop)break}return b},proxy:function(b){var c=p.getSetting(b.data.treeId);if(!t.uCanDo(c,b))return!0;for(var d=n.doProxy(b),e=!0,f=!1,g=0,h=d.length;g<h;g++){var k=d[g];k.nodeEventCallback&&(f=!0,e=k.nodeEventCallback.apply(k,[b,k.node])&&e);k.treeEventCallback&&(f=!0,e=k.treeEventCallback.apply(k,[b,k.node])&&e)}try{f&&0==a("input:focus").length&&t.noSel(c)}catch(m){}return e}};b=function(a,b){var c=h[a.data.treeId];if(b.open){if(!1==
t.apply(c.callback.beforeCollapse,[c.treeId,b],!0))return!0}else if(!1==t.apply(c.callback.beforeExpand,[c.treeId,b],!0))return!0;p.getRoot(c).expandTriggerFlag=!0;q.switchNode(c,b);return!0};c=function(a,b){var c=h[a.data.treeId],d=c.view.autoCancelSelected&&a.ctrlKey&&p.isSelectedNode(c,b)?0:c.view.autoCancelSelected&&a.ctrlKey&&c.view.selectedMulti?2:1;if(!1==t.apply(c.callback.beforeClick,[c.treeId,b,d],!0))return!0;0===d?q.cancelPreSelectedNode(c,b):q.selectNode(c,b,2===d);c.treeObj.trigger(s.event.CLICK,
[c.treeId,b,d]);return!0};d=function(a,b){var c=h[a.data.treeId];t.apply(c.callback.beforeMouseDown,[c.treeId,b],!0)&&t.apply(c.callback.onMouseDown,[a,c.treeId,b]);return!0};e=function(a,b){var c=h[a.data.treeId];t.apply(c.callback.beforeMouseUp,[c.treeId,b],!0)&&t.apply(c.callback.onMouseUp,[a,c.treeId,b]);return!0};f=function(a,b){var c=h[a.data.treeId];t.apply(c.callback.beforeDblClick,[c.treeId,b],!0)&&t.apply(c.callback.onDblClick,[a,c.treeId,b]);return!0};g=function(a,b){var c=h[a.data.treeId];
t.apply(c.callback.beforeRightClick,[c.treeId,b],!0)&&t.apply(c.callback.onRightClick,[a,c.treeId,b]);return"function"!=typeof c.callback.onRightClick};var t={apply:function(a,b,c){return"function"==typeof a?a.apply(W,b?b:[]):c},canAsync:function(a,b){var c=a.data.key.children;return b&&b.isParent&&!(b.zAsync||b[c]&&0<b[c].length)},clone:function(a){var b;if(a instanceof Array){b=[];for(var c=a.length;c--;)b[c]=arguments.callee(a[c]);return b}if("function"==typeof a)return a;if(a instanceof Object){b=
{};for(c in a)b[c]=arguments.callee(a[c]);return b}return a},eqs:function(a,b){return a.toLowerCase()===b.toLowerCase()},isArray:function(a){return"[object Array]"===Object.prototype.toString.apply(a)},getMDom:function(a,b,c){if(!b)return null;for(;b&&b.id!==a.treeId;){for(var d=0,e=c.length;b.tagName&&d<e;d++)if(t.eqs(b.tagName,c[d].tagName)&&null!==b.getAttribute(c[d].attrName))return b;b=b.parentNode}return null},noSel:function(a){if(p.getRoot(a).noSelection)try{window.getSelection?window.getSelection().removeAllRanges():
document.selection.empty()}catch(b){}},uCanDo:function(){return!0}},q={addNodes:function(b,c,d,e){if(!b.data.keep.leaf||!c||c.isParent)if(t.isArray(d)||(d=[d]),b.data.simpleData.enable&&(d=p.transformTozTreeFormat(b,d)),c){var f=a("#"+c.tId+s.id.SWITCH),g=a("#"+c.tId+s.id.ICON),k=a("#"+c.tId+s.id.UL);c.open||(q.replaceSwitchClass(c,f,s.folder.CLOSE),q.replaceIcoClass(c,g,s.folder.CLOSE),c.open=!1,k.css({display:"none"}));p.addNodesData(b,c,d);q.createNodes(b,c.level+1,d,c);e||q.expandCollapseParentNode(b,
c,!0)}else p.addNodesData(b,p.getRoot(b),d),q.createNodes(b,0,d,null)},appendNodes:function(a,b,c,d,e,f){if(!c)return[];for(var g=[],k=a.data.key.children,h=a.data.key.name,m=p.getTitleKey(a),r=0,v=c.length;r<v;r++){var n=c[r],w=(d?d:p.getRoot(a))[k].length==c.length&&0==r,D=r==c.length-1;e&&(p.initNode(a,b,n,d,w,D,f),p.addNodeCache(a,n));w=[];n[k]&&0<n[k].length&&(w=q.appendNodes(a,b+1,n[k],n,e,f&&n.open));if(f){var D=q.makeNodeUrl(a,n),B=q.makeNodeFontCss(a,n),E=[],F;for(F in B)E.push(F,":",B[F],
";");g.push("<li id='",n.tId,"' class='level",n.level,"' treenode>","<button type='button' hidefocus='true'",n.isParent?"":"disabled"," id='",n.tId,s.id.SWITCH,"' title='' class='",q.makeNodeLineClass(a,n),"' treeNode",s.id.SWITCH,"></button>");p.getBeforeA(a,n,g);g.push("<a id='",n.tId,s.id.A,"' class='level",n.level,"' treeNode",s.id.A,' onclick="',n.click||"",'" ',null!=D&&0<D.length?"href='"+D+"'":""," target='",q.makeNodeTarget(n),"' style='",E.join(""),"'");t.apply(a.view.showTitle,[a.treeId,
n],a.view.showTitle)&&n[m]&&g.push("title='",n[m].replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),"'");g.push(">");p.getInnerBeforeA(a,n,g);D=a.view.nameIsHTML?n[h]:n[h].replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");g.push("<button type='button' hidefocus='true' id='",n.tId,s.id.ICON,"' title='' treeNode",s.id.ICON," class='",q.makeNodeIcoClass(a,n),"' style='",q.makeNodeIcoStyle(a,n),"'></button><span id='",n.tId,s.id.SPAN,"'>",D,"</span>");p.getInnerAfterA(a,n,
g);g.push("</a>");p.getAfterA(a,n,g);n.isParent&&n.open&&q.makeUlHtml(a,n,g,w.join(""));g.push("</li>");p.addCreatedNode(a,n)}}return g},appendParentULDom:function(b,c){var d=[],e=a("#"+c.tId),f=a("#"+c.tId+s.id.UL),g=q.appendNodes(b,c.level+1,c[b.data.key.children],c,!1,!0);q.makeUlHtml(b,c,d,g.join(""));!e.get(0)&&c.parentTId&&(q.appendParentULDom(b,c.getParentNode()),e=a("#"+c.tId));f.get(0)&&f.remove();e.append(d.join(""));q.createNodeCallback(b)},asyncNode:function(b,c,d,e){var f,g;if(c&&!c.isParent)return t.apply(e),
!1;if(c&&c.isAjaxing)return!1;if(!1==t.apply(b.callback.beforeAsync,[b.treeId,c],!0))return t.apply(e),!1;c&&(c.isAjaxing=!0,a("#"+c.tId+s.id.ICON).attr({style:"","class":"ico_loading"}));var k="application/json"==b.async.contentType,h=k?"{":"",m="";f=0;for(g=b.async.autoParam.length;c&&f<g;f++){var r=b.async.autoParam[f].split("="),n=r;1<r.length&&(n=r[1],r=r[0]);k?(m="string"==typeof c[r]?'"':"",h+='"'+n+('":'+m+c[r]).replace(/'/g,"\\'")+m+","):h+=n+("="+c[r]).replace(/&/g,"%26")+"&"}if(t.isArray(b.async.otherParam))for(f=
0,g=b.async.otherParam.length;f<g;f+=2)k?(m="string"==typeof b.async.otherParam[f+1]?'"':"",h+='"'+b.async.otherParam[f]+('":'+m+b.async.otherParam[f+1]).replace(/'/g,"\\'")+m+","):h+=b.async.otherParam[f]+("="+b.async.otherParam[f+1]).replace(/&/g,"%26")+"&";else for(var p in b.async.otherParam)k?(m="string"==typeof b.async.otherParam[p]?'"':"",h+='"'+p+('":'+m+b.async.otherParam[p]).replace(/'/g,"\\'")+m+","):h+=p+("="+b.async.otherParam[p]).replace(/&/g,"%26")+"&";1<h.length&&(h=h.substring(0,
h.length-1));k&&(h+="}");a.ajax({contentType:b.async.contentType,type:b.async.type,url:t.apply(b.async.url,[b.treeId,c],b.async.url),data:h,dataType:b.async.dataType,success:function(a){var f=[];try{f=a&&0!=a.length?"string"==typeof a?eval("("+a+")"):a:[]}catch(g){}c&&(c.isAjaxing=null,c.zAsync=!0);q.setNodeLineIcos(b,c);f&&""!=f?(f=t.apply(b.async.dataFilter,[b.treeId,c,f],f),q.addNodes(b,c,t.clone(f),!!d)):q.addNodes(b,c,[],!!d);b.treeObj.trigger(s.event.ASYNC_SUCCESS,[b.treeId,c,a]);t.apply(e)},
error:function(a,d,e){q.setNodeLineIcos(b,c);c&&(c.isAjaxing=null);b.treeObj.trigger(s.event.ASYNC_ERROR,[b.treeId,c,a,d,e])}});return!0},cancelPreSelectedNode:function(b,c){for(var d=p.getRoot(b).curSelectedList,e=d.length-1;0<=e;e--)if(!c||c===d[e])if(a("#"+d[e].tId+s.id.A).removeClass(s.node.CURSELECTED),q.setNodeName(b,d[e]),c){p.removeSelectedNode(b,c);break}c||(p.getRoot(b).curSelectedList=[])},createNodeCallback:function(a){if(a.callback.onNodeCreated||a.view.addDiyDom)for(var b=p.getRoot(a);0<
b.createdNodes.length;){var c=b.createdNodes.shift();t.apply(a.view.addDiyDom,[a.treeId,c]);a.callback.onNodeCreated&&a.treeObj.trigger(s.event.NODECREATED,[a.treeId,c])}},createNodes:function(b,c,d,e){if(d&&0!=d.length){var f=p.getRoot(b),g=b.data.key.children,g=!e||e.open||!!a("#"+e[g][0].tId).get(0);f.createdNodes=[];c=q.appendNodes(b,c,d,e,!0,g);e?(e=a("#"+e.tId+s.id.UL),e.get(0)&&e.append(c.join(""))):b.treeObj.append(c.join(""));q.createNodeCallback(b)}},expandCollapseNode:function(b,c,d,e,
f){var g=p.getRoot(b),h=b.data.key.children;if(c){if(g.expandTriggerFlag){var k=f;f=function(){k&&k();c.open?b.treeObj.trigger(s.event.EXPAND,[b.treeId,c]):b.treeObj.trigger(s.event.COLLAPSE,[b.treeId,c])};g.expandTriggerFlag=!1}if(c.open==d)t.apply(f,[]);else{!c.open&&c.isParent&&(!a("#"+c.tId+s.id.UL).get(0)||c[h]&&0<c[h].length&&!a("#"+c[h][0].tId).get(0))&&q.appendParentULDom(b,c);d=a("#"+c.tId+s.id.UL);var g=a("#"+c.tId+s.id.SWITCH),m=a("#"+c.tId+s.id.ICON);c.isParent?(c.open=!c.open,c.iconOpen&&
c.iconClose&&m.attr("style",q.makeNodeIcoStyle(b,c)),c.open?(q.replaceSwitchClass(c,g,s.folder.OPEN),q.replaceIcoClass(c,m,s.folder.OPEN),!1==e||""==b.view.expandSpeed?(d.show(),t.apply(f,[])):c[h]&&0<c[h].length?d.slideDown(b.view.expandSpeed,f):(d.show(),t.apply(f,[]))):(q.replaceSwitchClass(c,g,s.folder.CLOSE),q.replaceIcoClass(c,m,s.folder.CLOSE),!1==e||""==b.view.expandSpeed?(d.hide(),t.apply(f,[])):d.slideUp(b.view.expandSpeed,f))):t.apply(f,[])}}else t.apply(f,[])},expandCollapseParentNode:function(a,
b,c,d,e){b&&(b.parentTId?(q.expandCollapseNode(a,b,c,d),b.parentTId&&q.expandCollapseParentNode(a,b.getParentNode(),c,d,e)):q.expandCollapseNode(a,b,c,d,e))},expandCollapseSonNode:function(a,b,c,d,e){var f=p.getRoot(a),g=a.data.key.children,f=b?b[g]:f[g],g=b?!1:d,h=p.getRoot(a).expandTriggerFlag;p.getRoot(a).expandTriggerFlag=!1;if(f)for(var k=0,m=f.length;k<m;k++)f[k]&&q.expandCollapseSonNode(a,f[k],c,g);p.getRoot(a).expandTriggerFlag=h;q.expandCollapseNode(a,b,c,d,e)},makeNodeFontCss:function(a,
b){var c=t.apply(a.view.fontCss,[a.treeId,b],a.view.fontCss);return c&&"function"!=typeof c?c:{}},makeNodeIcoClass:function(a,b){var c=["ico"];b.isAjaxing||(c[0]=(b.iconSkin?b.iconSkin+"_":"")+c[0],b.isParent?c.push(b.open?s.folder.OPEN:s.folder.CLOSE):c.push(s.folder.DOCU));return c.join("_")},makeNodeIcoStyle:function(a,b){var c=[];if(!b.isAjaxing){var d=b.isParent&&b.iconOpen&&b.iconClose?b.open?b.iconOpen:b.iconClose:b.icon;d&&c.push("background:url(",d,") 0 0 no-repeat;");!1!=a.view.showIcon&&
t.apply(a.view.showIcon,[a.treeId,b],!0)||c.push("width:0px;height:0px;")}return c.join("")},makeNodeLineClass:function(a,b){var c=[];a.view.showLine?0==b.level&&b.isFirstNode&&b.isLastNode?c.push(s.line.ROOT):0==b.level&&b.isFirstNode?c.push(s.line.ROOTS):b.isLastNode?c.push(s.line.BOTTOM):c.push(s.line.CENTER):c.push(s.line.NOLINE);b.isParent?c.push(b.open?s.folder.OPEN:s.folder.CLOSE):c.push(s.folder.DOCU);return q.makeNodeLineClassEx(b)+c.join("_")},makeNodeLineClassEx:function(a){return"level"+
a.level+" switch "},makeNodeTarget:function(a){return a.target||"_blank"},makeNodeUrl:function(a,b){return b.url?b.url:null},makeUlHtml:function(a,b,c,d){c.push("<ul id='",b.tId,s.id.UL,"' class='level",b.level," ",q.makeUlLineClass(a,b),"' style='display:",b.open?"block":"none","'>");c.push(d);c.push("</ul>")},makeUlLineClass:function(a,b){return a.view.showLine&&!b.isLastNode?s.line.LINE:""},replaceIcoClass:function(a,b,c){if(b&&!a.isAjaxing&&(a=b.attr("class"),void 0!=a)){a=a.split("_");switch(c){case s.folder.OPEN:case s.folder.CLOSE:case s.folder.DOCU:a[a.length-
1]=c}b.attr("class",a.join("_"))}},replaceSwitchClass:function(a,b,c){if(b){var d=b.attr("class");if(void 0!=d){d=d.split("_");switch(c){case s.line.ROOT:case s.line.ROOTS:case s.line.CENTER:case s.line.BOTTOM:case s.line.NOLINE:d[0]=q.makeNodeLineClassEx(a)+c;break;case s.folder.OPEN:case s.folder.CLOSE:case s.folder.DOCU:d[1]=c}b.attr("class",d.join("_"));c!==s.folder.DOCU?b.removeAttr("disabled"):b.attr("disabled","disabled")}}},selectNode:function(b,c,d){d||q.cancelPreSelectedNode(b);a("#"+c.tId+
s.id.A).addClass(s.node.CURSELECTED);p.addSelectedNode(b,c)},setNodeFontCss:function(b,c){var d=a("#"+c.tId+s.id.A),e=q.makeNodeFontCss(b,c);e&&d.css(e)},setNodeLineIcos:function(b,c){if(c){var d=a("#"+c.tId+s.id.SWITCH),e=a("#"+c.tId+s.id.UL),f=a("#"+c.tId+s.id.ICON),g=q.makeUlLineClass(b,c);0==g.length?e.removeClass(s.line.LINE):e.addClass(g);d.attr("class",q.makeNodeLineClass(b,c));c.isParent?d.removeAttr("disabled"):d.attr("disabled","disabled");f.removeAttr("style");f.attr("style",q.makeNodeIcoStyle(b,
c));f.attr("class",q.makeNodeIcoClass(b,c))}},setNodeName:function(b,c){var d=b.data.key.name,e=p.getTitleKey(b),f=a("#"+c.tId+s.id.SPAN);f.empty();b.view.nameIsHTML?f.html(c[d]):f.text(c[d]);t.apply(b.view.showTitle,[b.treeId,c],b.view.showTitle)&&c[e]&&a("#"+c.tId+s.id.A).attr("title",c[e])},setNodeTarget:function(b){a("#"+b.tId+s.id.A).attr("target",q.makeNodeTarget(b))},setNodeUrl:function(b,c){var d=a("#"+c.tId+s.id.A),e=q.makeNodeUrl(b,c);null==e||0==e.length?d.removeAttr("href"):d.attr("href",
e)},switchNode:function(a,b){b.open||!t.canAsync(a,b)?q.expandCollapseNode(a,b,!b.open):a.async.enable?q.asyncNode(a,b)||q.expandCollapseNode(a,b,!b.open):b&&q.expandCollapseNode(a,b,!b.open)}};a.fn.zTree={consts:{event:{NODECREATED:"ztree_nodeCreated",CLICK:"ztree_click",EXPAND:"ztree_expand",COLLAPSE:"ztree_collapse",ASYNC_SUCCESS:"ztree_async_success",ASYNC_ERROR:"ztree_async_error"},id:{A:"_a",ICON:"_ico",SPAN:"_span",SWITCH:"_switch",UL:"_ul"},line:{ROOT:"root",ROOTS:"roots",CENTER:"center",
BOTTOM:"bottom",NOLINE:"noline",LINE:"line"},folder:{OPEN:"open",CLOSE:"close",DOCU:"docu"},node:{CURSELECTED:"curSelectedNode"}},_z:{tools:t,view:q,event:n,data:p},getZTreeObj:function(a){return(a=p.getZTreeTools(a))?a:null},init:function(b,c,d){var e=t.clone(D);a.extend(!0,e,c);e.treeId=b.attr("id");e.treeObj=b;e.treeObj.empty();h[e.treeId]=e;a.browser.msie&&7>parseInt(a.browser.version)&&(e.view.expandSpeed="");p.initRoot(e);b=p.getRoot(e);c=e.data.key.children;d=d?t.clone(t.isArray(d)?d:[d]):
[];b[c]=e.data.simpleData.enable?p.transformTozTreeFormat(e,d):d;p.initCache(e);n.bindTree(e);n.bindEvent(e);d={setting:e,cancelSelectedNode:function(a){q.cancelPreSelectedNode(this.setting,a)},expandAll:function(a){a=!!a;q.expandCollapseSonNode(this.setting,null,a,!0);return a},expandNode:function(b,c,d,f,g){if(!b||!b.isParent)return null;!0!==c&&!1!==c&&(c=!b.open);if((g=!!g)&&c&&!1==t.apply(e.callback.beforeExpand,[e.treeId,b],!0)||g&&!c&&!1==t.apply(e.callback.beforeCollapse,[e.treeId,b],!0))return null;
c&&b.parentTId&&q.expandCollapseParentNode(this.setting,b.getParentNode(),c,!1);if(c===b.open&&!d)return null;p.getRoot(e).expandTriggerFlag=g;d?q.expandCollapseSonNode(this.setting,b,c,!0,function(){!1!==f&&a("#"+b.tId+s.id.ICON).focus().blur()}):(b.open=!c,q.switchNode(this.setting,b),!1!==f&&a("#"+b.tId+s.id.ICON).focus().blur());return c},getNodes:function(){return p.getNodes(this.setting)},getNodeByParam:function(a,b,c){return a?p.getNodeByParam(this.setting,c?c[this.setting.data.key.children]:
p.getNodes(this.setting),a,b):null},getNodeByTId:function(a){return p.getNodeCache(this.setting,a)},getNodesByParam:function(a,b,c){return a?p.getNodesByParam(this.setting,c?c[this.setting.data.key.children]:p.getNodes(this.setting),a,b):null},getNodesByParamFuzzy:function(a,b,c){return a?p.getNodesByParamFuzzy(this.setting,c?c[this.setting.data.key.children]:p.getNodes(this.setting),a,b):null},getNodeIndex:function(a){if(!a)return null;for(var b=e.data.key.children,c=a.parentTId?a.getParentNode():
p.getRoot(this.setting),d=0,f=c[b].length;d<f;d++)if(c[b][d]==a)return d;return-1},getSelectedNodes:function(){for(var a=[],b=p.getRoot(this.setting).curSelectedList,c=0,d=b.length;c<d;c++)a.push(b[c]);return a},isSelectedNode:function(a){return p.isSelectedNode(this.setting,a)},reAsyncChildNodes:function(b,c,d){if(this.setting.async.enable){var e=!b;e&&(b=p.getRoot(this.setting));"refresh"==c&&(b[this.setting.data.key.children]=[],e?this.setting.treeObj.empty():a("#"+b.tId+s.id.UL).empty());q.asyncNode(this.setting,
e?null:b,!!d)}},refresh:function(){this.setting.treeObj.empty();var a=p.getRoot(this.setting),b=a[this.setting.data.key.children];p.initRoot(this.setting);a[this.setting.data.key.children]=b;p.initCache(this.setting);q.createNodes(this.setting,0,a[this.setting.data.key.children])},selectNode:function(b,c){b&&t.uCanDo(this.setting)&&(c=e.view.selectedMulti&&c,b.parentTId?q.expandCollapseParentNode(this.setting,b.getParentNode(),!0,!1,function(){a("#"+b.tId+s.id.ICON).focus().blur()}):a("#"+b.tId+s.id.ICON).focus().blur(),
q.selectNode(this.setting,b,c))},transformTozTreeNodes:function(a){return p.transformTozTreeFormat(this.setting,a)},transformToArray:function(a){return p.transformToArrayFormat(this.setting,a)},updateNode:function(b){b&&a("#"+b.tId).get(0)&&t.uCanDo(this.setting)&&(q.setNodeName(this.setting,b),q.setNodeTarget(b),q.setNodeUrl(this.setting,b),q.setNodeLineIcos(this.setting,b),q.setNodeFontCss(this.setting,b))}};b.treeTools=d;p.setZTreeTools(e,d);b[c]&&0<b[c].length?q.createNodes(e,0,b[c]):e.async.enable&&
e.async.url&&""!==e.async.url&&q.asyncNode(e);return d}};var W=a.fn.zTree,s=W.consts})(jQuery);(function(a,b,c){function d(a){a=a||location.href;return"#"+a.replace(/^[^#]*#?(.*)$/,"$1")}var e="hashchange",f=document,g,h=a.event.special,k=f.documentMode,m="on"+e in b&&(k===c||7<k);a.fn[e]=function(a){return a?this.bind(e,a):this.trigger(e)};a.fn[e].delay=50;h[e]=a.extend(h[e],{setup:function(){if(m)return!1;a(g.start)},teardown:function(){if(m)return!1;a(g.stop)}});g=function(){function g(){var c=d(),f=B(E);c!==E?(O(E=c,f),a(b).trigger(e)):f!==E&&(location.href=location.href.replace(/#.*/,
"")+f);k=setTimeout(g,a.fn[e].delay)}var h={},k,E=d(),F=function(a){return a},O=F,B=F;h.start=function(){k||g()};h.stop=function(){k&&clearTimeout(k);k=c};a.browser.msie&&!m&&function(){var b,c;h.start=function(){b||(c=(c=a.fn[e].src)&&c+d(),b=a('<iframe tabindex="-1" title="empty"/>').hide().one("load",function(){c||O(d());g()}).attr("src",c||"javascript:0").insertAfter("body")[0].contentWindow,f.onpropertychange=function(){try{"title"===event.propertyName&&(b.document.title=f.title)}catch(a){}})};
h.stop=F;B=function(){return d(b.location.href)};O=function(c,d){var g=b.document,h=a.fn[e].domain;c!==d&&(g.title=f.title,g.open(),h&&g.write('<script>document.domain="'+h+'"\x3c/script>'),g.close(),b.location.hash=c)}}();return h}()})(jQuery,this);var oldSelectName="",treePrefix=globalURL;-1==treePrefix.indexOf("/default")&&(treePrefix=globalURL+"web/default/");function WebFXTreePersistence(){}var _p=WebFXTreePersistence.prototype;_p.getExpanded=function(a){return!1};_p.setExpanded=function(a,b){};function WebFXCookie(){}_p=WebFXCookie.prototype;_p.setCookie=function(a,b,c){var d="";"number"==typeof c&&(d=new Date,d.setTime(d.getTime()+864E5*c),d="; expires="+d.toGMTString());document.cookie=a+"="+escape(b)+d+"; path=/"};
_p.getCookie=function(a){a=RegExp("(;|^)[^;]*("+a+")=([^;]*)(;|$)").exec(document.cookie);return null!=a?unescape(a[3]):null};_p.removeCookie=function(a){this.setCookie(a,"",-1)};function WebFXTreeCookiePersistence(){this._openedMap={};this._cookies=new WebFXCookie;var a=this._cookies.getCookie(this.cookieName);if(a)for(var a=a.split("+"),b=a.length-1;0<=b;b--)this._openedMap[a[b]]=!0}_p=WebFXTreeCookiePersistence.prototype=new WebFXTreePersistence;_p.cookieName="webfx-tree-cookie-persistence";
_p.getExpanded=function(a){return a.id in this._openedMap};_p.setExpanded=function(a,b){if(this.getExpanded(a)!=b){b?this._openedMap[a.id]=!0:delete this._openedMap[a.id];var c=[],d=0,e;for(e in this._openedMap)c[d++]=e;this._cookies.setCookie(this.cookieName,c.join("+"))}};
var arrayHelper={indexOf:function(a,b){for(var c=0;c<a.length;c++)if(a[c]==b)return c;return-1},insertBefore:function(a,b,c){c=this.indexOf(a,c);-1==c?a.push(b):a.splice(c,0,b)},remove:function(a,b){var c=this.indexOf(a,b);-1!=c&&a.splice(c,1)}},webFXTreeConfig={rootIcon:treePrefix+"images/xp/folder.png",openRootIcon:treePrefix+"images/xp/openfolder.png",folderIcon:treePrefix+"images/xp/folder.png",openFolderIcon:treePrefix+"images/xp/openfolder.png",fileIcon:treePrefix+"images/xp/file.png",iIcon:treePrefix+
"images/xp/I.png",lIcon:treePrefix+"images/xp/L.png",lMinusIcon:treePrefix+"images/xp/Lminus.png",lPlusIcon:treePrefix+"images/xp/Lplus.png",tIcon:treePrefix+"images/xp/T.png",tMinusIcon:treePrefix+"images/xp/Tminus.png",tPlusIcon:treePrefix+"images/xp/Tplus.png",blankIcon:treePrefix+"images/xp/blank.png",iconPath:treePrefix+"/images/icons/",defaultText:"Tree Item",defaultAction:"javascript:void(0);",defaultBehavior:"classic",usePersistence:!1},webFXTreeHandler={ie:/msie/i.test(navigator.userAgent),
opera:/opera/i.test(navigator.userAgent),idCounter:0,idPrefix:"wfxt-",getUniqueId:function(){return this.idPrefix+this.idCounter++},all:{},selected:null,resetContext:function(){},getNodeById:function(a){return all[a]},addNode:function(a){this.all[a.id]=a},removeNode:function(a){delete this.all[a.id]},handleEvent:function(a){for(var b=a.target||a.srcElement;null!=b&&!this.all[b.id];)b=b.parentNode;if(null==b)return!1;b=this.all[b.id];return"function"==typeof b["_on"+a.type]?b["_on"+a.type](a):!1},
dispose:function(){if(!this.disposed){for(var a in this.all)this.all[a].dispose();this.disposed=!0}},htmlToText:function(a){return String(a).replace(/\s+|<([^>])+>|&amp;|&lt;|&gt;|&quot;|&nbsp;/gi,this._htmlToText)},_htmlToText:function(a){switch(a){case "&amp;":return"&";case "&lt;":return"<";case "&gt;":return">";case "&quot;":return'"';case "&nbsp;":return String.fromCharCode(160);default:return/\s+/.test(a)?" ":/^<BR/gi.test(a)?"\n":""}},textToHtml:function(a){return String(a).replace(/&|<|>|\n|\"\u00A0/g,
this._textToHtml)},_textToHtml:function(a){switch(a){case "&":return"&amp;";case "<":return"&lt;";case ">":return"&gt;";case "\n":return"<BR>";case '"':return"&quot;";default:return"&nbsp;"}},persistenceManager:new WebFXTreeCookiePersistence};
function WebFXTreeAbstractNode(a,b){this.childNodes=[];a&&(this.text=a);b&&(this.action=b);this.id=webFXTreeHandler.getUniqueId();webFXTreeConfig.usePersistence&&(this.open=webFXTreeHandler.persistenceManager.getExpanded(this));webFXTreeHandler.addNode(this)}_p=WebFXTreeAbstractNode.prototype;_p._selected=!1;_p.indentWidth=19;_p.open=!1;_p.text=webFXTreeConfig.defaultText;_p.action=null;_p.target=null;_p.toolTip=null;_p._focused=!1;
_p.add=function(a,b){var c,d=0==this.childNodes.length,e=a.parentNode;if(null==b)null!=e&&e.remove(a),c=this.getLastChild(),this.childNodes.push(a);else{if(b.parentNode!=this)throw Error("Can only add nodes before siblings");null!=e&&e.remove(a);arrayHelper.insertBefore(this.childNodes,a,b)}b?(b==this.firstChild&&(this.firstChild=a),a.previousSibling=b.previousSibling,b.previousSibling=a,a.nextSibling=b):(this.firstChild||(this.firstChild=a),this.lastChild&&(this.lastChild.nextSibling=a),a.previousSibling=
this.lastChild,this.lastChild=a);a.parentNode=this;if(e=this.getTree())a.tree=e;var f=this.getDepth();null!=f&&(a.depth=f+1);if(this.getCreated()&&!e.getSuspendRedraw()){var f=this.getChildrenElement(),g=a.create(),h=b?b.getElement():null;f.insertBefore(g,h);c&&c.updateExpandIcon();d&&(this.setExpanded(this.getExpanded()),e&&"classic"!=e.getBehavior()&&this.updateIcon())}return a};
_p.remove=function(a){if(0==arguments.length)return this.parentNode?this.parentNode.remove(this):null;var b=this.getTree(),c=b?b.getSelected():null;if(c==a||a.contains(c))c.getFocused()?(this.select(),window.setTimeout('WebFXTreeAbstractNode._onTimeoutFocus("'+this.id+'")',10)):this.select();if(a.parentNode!=this)throw Error("Can only remove children");arrayHelper.remove(this.childNodes,a);this.lastChild==a&&(this.lastChild=a.previousSibling);this.firstChild==a&&(this.firstChild=a.nextSibling);a.previousSibling&&
(a.previousSibling.nextSibling=a.nextSibling);a.nextSibling&&(a.nextSibling.previousSibling=a.previousSibling);c=a.isLastSibling();a.parentNode=null;a.tree=null;a.depth=null;if(b&&this.getCreated()&&!b.getSuspendRedraw()){var b=this.getChildrenElement(),d=a.getElement();b.removeChild(d);c&&(c=this.getLastChild())&&c.updateExpandIcon();this.hasChildren()||(b.style.display="none",this.updateExpandIcon(),this.updateIcon())}return a};WebFXTreeAbstractNode._onTimeoutFocus=function(a){webFXTreeHandler.all[a].focus()};
_p.getId=function(){return this.id};_p.getTree=function(){throw Error("getTree called on Abstract Node");};_p.getDepth=function(){throw Error("getDepth called on Abstract Node");};_p.getCreated=function(){var a=this.getTree();return a&&a.rendered};_p.getParent=function(){return this.parentNode};_p.contains=function(a){return null==a?!1:a==this?!0:this.contains(a.parentNode)};_p.getChildren=_p.getChildNodes=function(){return this.childNodes};_p.getFirstChild=function(){return this.childNodes[0]};
_p.getLastChild=function(){return this.childNodes[this.childNodes.length-1]};_p.getPreviousSibling=function(){return this.previousSibling};_p.getNextSibling=function(){return this.nextSibling};_p.hasChildren=function(){return 0<this.childNodes.length};_p.isLastSibling=function(){return null==this.nextSibling};
_p.findChildByText=function(a,b){b||(b=0);for(var c=a instanceof RegExp,d=0;d<this.childNodes.length;d++)if(c&&a.test(this.childNodes[d].getText())||this.childNodes[d].getText()==a){if(0==b)return this.childNodes[d];b--}return null};_p.findNodeByText=function(a,b){b||(b=0);if(a instanceof RegExp&&a.test(this.getText())||this.getText()==a){if(0==b)return this.childNodes[d];b--}for(var c,d=0;d<this.childNodes.length;d++)if(c=this.childNodes[d].findNodeByText(a,b))return c;return null};
_p.setId=function(a){var b=this.getElement();webFXTreeHandler.removeNode(this);this.id=a;b&&(b.id=a);webFXTreeHandler.addNode(this)};_p.isSelected=function(){return this._selected};_p.select=function(){this._setSelected(!0);webFXTreeHandler.selected=this};_p.deselect=function(){this._setSelected(!1)};
_p._setSelected=function(a){var b=this.getTree();if(b&&this._selected!=a){this._selected=a;var c=!1,d=b.getSelected();if(a&&null!=d&&d!=this){var e=b._fireChange,c=d._focused;b._fireChange=!1;d._setSelected(!1);b._fireChange=e}if(d=this.getRowElement())d.className=this.getRowClassName();a?(this._setTabIndex(b.tabIndex),b._selectedItem=this,b._fireOnChange(),b.setSelected(this),c&&this.focus()):this._setTabIndex(-1);"classic"!=b.getBehavior()&&this.updateIcon()}};_p.getExpanded=function(){return this.open};
_p.setExpanded=function(a){var b;this.open=a;var c=this.getTree();if(this.hasChildren()){b=c?c.getSelected():null;!a&&this.contains(b)&&this.select();if(this.getElement()){if(b=this.getChildrenElement())b.style.display=a?"block":"none";if(b=this.getExpandIconElement())b.src=this.getExpandIconSrc()}webFXTreeConfig.usePersistence&&webFXTreeHandler.persistenceManager.setExpanded(this,a)}else if(b=this.getChildrenElement())b.style.display="none";c&&"classic"==c.getBehavior()&&this.updateIcon()};
_p.toggle=function(){this.setExpanded(!this.getExpanded())};_p.expand=function(){this.setExpanded(!0)};_p.collapse=function(){this.setExpanded(!1)};_p.collapseChildren=function(){for(var a=this.childNodes,b=0;b<a.length;b++)a[b].collapseAll()};_p.collapseAll=function(){this.collapseChildren();this.collapse()};_p.expandChildren=function(){for(var a=this.childNodes,b=0;b<a.length;b++)a[b].expandAll()};_p.expandAll=function(){this.expandChildren();this.expand()};
_p.reveal=function(){var a=this.getParent();a&&(a.setExpanded(!0),a.reveal())};_p.openPath=function(a,b,c){if(""==a)b&&this.select(),c&&window.setTimeout('WebFXTreeAbstractNode._onTimeoutFocus("'+this.id+'")',10);else{var d=a.split("/"),e=d.slice(1).join("/"),d=this.getTree();if("/"==a.charAt(0))if(d)d.openPath(e,b,c);else throw"Invalid path";else{this.setExpanded(!0);d=a.split("/");a=this.findChildByText(d[0]);if(!a)throw'Could not find child node with text "'+d[0]+'"';a.openPath(e,b,c)}}};
_p.focus=function(){var a=this.getLabelElement();a&&a.focus()};_p.getFocused=function(){return this._focused};_p._setTabIndex=function(a){var b=this.getLabelElement();b&&b.setAttribute("tabindex",a)};
_p.toHtml=function(){for(var a=[],b=this.childNodes,c=b.length,d=0;d<c;d++)a[d]=b[d].toHtml();b=this.getTree();a='<div class="webfx-tree-children'+(!b.getShowLines()||b==this.parentNode&&!b.getShowRootLines()?"-nolines":"")+'" style="'+this.getLineStyle()+(this.getExpanded()&&this.hasChildren()?"":"display:none;")+'">'+a.join("")+"</div>";return'<div class="webfx-tree-item" id="'+this.id+'"'+this.getEventHandlersHtml()+">"+this.getRowHtml()+a+"</div>"};
_p.getRowHtml=function(){this.getTree();return'<div class="'+this.getRowClassName()+'" style="padding-left:'+Math.max(0,(this.getDepth()-1)*this.indentWidth)+'px">'+this.getExpandIconHtml()+this.getIconHtml()+this.getLabelHtml()+"</div>"};_p.getRowClassName=function(){return"webfx-tree-row"+(this.isSelected()?" selected":"")+(this.action?"":" no-action")};
_p.getLabelHtml=function(){var a=this.getToolTip(),b=this.getTarget();return'<a href="'+webFXTreeHandler.textToHtml(this._getHref())+'" class="webfx-tree-item-label" tabindex="-1"'+(a?' title="'+webFXTreeHandler.textToHtml(a)+'"':"")+(b?' target="'+b+'"':"")+' onfocus="webFXTreeHandler.handleEvent(event)" onblur="webFXTreeHandler.handleEvent(event)">'+this.getHtml()+"</a>"};_p._getHref=function(){return"string"==typeof this.action?this.action:"#"};_p.getEventHandlersHtml=function(){return""};
_p.getIconHtml=function(){return'<img class="webfx-tree-icon" src="'+this.getIconSrc()+'">'};_p.getIconSrc=function(){throw Error("getIconSrc called on Abstract Node");};_p.getExpandIconHtml=function(){return'<img class="webfx-tree-expand-icon" src="'+this.getExpandIconSrc()+'">'};
_p.getExpandIconSrc=function(){var a=this.getTree(),b=!a.getShowLines()||a==this.parentNode&&!a.getShowRootLines();if(this.hasChildren()){var c=0;a&&a.getShowExpandIcons()&&(c=this.getExpanded()?2:1);a&&!b&&(c=this.isLastSibling()?c+4:c+8);switch(c){case 1:return webFXTreeConfig.plusIcon;case 2:return webFXTreeConfig.minusIcon;case 4:return webFXTreeConfig.lIcon;case 5:return webFXTreeConfig.lPlusIcon;case 6:return webFXTreeConfig.lMinusIcon;case 8:return webFXTreeConfig.tIcon;case 9:return webFXTreeConfig.tPlusIcon;
case 10:return webFXTreeConfig.tMinusIcon;default:return webFXTreeConfig.blankIcon}}else return a&&b?webFXTreeConfig.blankIcon:this.isLastSibling()?webFXTreeConfig.lIcon:webFXTreeConfig.tIcon};_p.getLineStyle=function(){return"background-position:"+this.getLineStyle2()+";"};_p.getLineStyle2=function(){return(this.isLastSibling()?"-100":(this.getDepth()-1)*this.indentWidth)+"px 0"};_p.getElement=function(){return document.getElementById(this.id)};
_p.getRowElement=function(){var a=this.getElement();return a?a.firstChild:null};_p.getExpandIconElement=function(){var a=this.getRowElement();return a?a.firstChild:null};_p.getIconElement=function(){var a=this.getRowElement();return a?a.childNodes[1]:null};_p.getLabelElement=function(){var a=this.getRowElement();return a?a.lastChild:null};_p.getChildrenElement=function(){var a=this.getElement();return a?a.lastChild:null};
_p.create=webFXTreeHandler.ie?function(){var a=document.createElement("div");a.style.display="none";document.body.appendChild(a);a.innerHTML=this.toHtml();var b=a.removeChild(a.firstChild);document.body.removeChild(a);return b}:function(){var a=document.createElement("div");a.innerHTML=this.toHtml();return a.removeChild(a.firstChild)};_p.setIcon=function(a){this.icon=a;this.getCreated()&&this.updateIcon()};_p.getIcon=function(){return this.icon};
_p.setOpenIcon=function(a){this.openIcon=a;this.getCreated()&&this.updateIcon()};_p.getOpenIcon=function(){return this.openIcon};_p.setText=function(a){this.setHtml(webFXTreeHandler.textToHtml(a))};_p.getText=function(){return webFXTreeHandler.htmlToText(this.getHtml())};_p.setHtml=function(a){this.text=a;var b=this.getLabelElement();b&&(b.innerHTML=a)};_p.getHtml=function(){return this.text};_p.setTarget=function(a){this.target=a};_p.getTarget=function(){return this.target};
_p.setToolTip=function(a){this.toolTip=a;var b=this.getLabelElement();b&&(b.title=a)};_p.getToolTip=function(){return this.toolTip};_p.setAction=function(a){this.action=a;if(a=this.getLabelElement())a.href=this._getHref();if(a=this.getRowElement())a.className=this.getRowClassName()};_p.getAction=function(){return this.action};
_p.update=function(){var a=this.getTree();if(!a.suspendRedraw){var b=this.getElement();if(b&&b.parentNode){var c=this.create();b.parentNode.replaceChild(c,b);try{this.setTabIndex(this.tabIndex)}catch(d){}(a=a.getSelected())&&a.getFocused()&&a.focus()}}};_p.updateExpandIcon=function(){this.getTree().suspendRedraw||(this.getExpandIconElement().src=this.getExpandIconSrc(),this.getChildrenElement().style.backgroundPosition=this.getLineStyle2())};
_p.updateIcon=function(){this.getTree().suspendRedraw||(this.getIconElement().src=this.getIconSrc())};_p._callSuspended=function(a){var b=this.getTree(),c=b.getSuspendRedraw();b.setSuspendRedraw(!0);a.call(this);b.setSuspendRedraw(c)};
_p._onmousedown=function(a){if(/webfx-tree-expand-icon/.test((a.target||a.srcElement).className)&&this.hasChildren())return this.toggle(),webFXTreeHandler.ie&&window.setTimeout('WebFXTreeAbstractNode._onTimeoutFocus("'+this.id+'")',10),!1;this.select();webFXTreeHandler.opera||(webFXTreeHandler.ie?window.setTimeout('WebFXTreeAbstractNode._onTimeoutFocus("'+this.id+'")',10):this.focus());if(a=this.getRowElement())a.className=this.getRowClassName();return!1};
_p._onclick=function(a){if(/webfx-tree-expand-icon/.test((a.target||a.srcElement).className)&&this.hasChildren())return!1;"function"==typeof this.action?this.action():null!=this.action&&(0==this.action.indexOf("javascript:")?eval(this.action):(alert("Open the href"),window.open(this.action,this.target||"_self")));window.event?a.cancelBubble=!0:a.stopPropagation();return!1};
_p._ondblclick=function(a){if(!/webfx-tree-expand-icon/.test((a.target||a.srcElement).className)||!this.hasChildren())if(a=!1,(a=this.getExpanded())&&null!=this.src&&""!=this.src)try{this.reload()}catch(b){this.toggle()}else this.toggle()};_p._onfocus=function(a){this.select();this._focused=!0};_p._onblur=function(a){this._focused=!1};
_p._onkeydown=function(a){var b;b=!0;switch(a.keyCode){case 39:if(a.altKey){b=!0;break}this.hasChildren()&&(this.getExpanded()?this.getFirstChild().focus():this.setExpanded(!0));b=!1;break;case 37:if(a.altKey){b=!0;break}if(this.hasChildren()&&this.getExpanded())this.setExpanded(!1);else{b=this.getParent();var c=this.getTree();b&&(c.showRootNode||b!=c)&&b.focus()}b=!1;break;case 40:(b=this.getNextShownNode())&&b.focus();b=!1;break;case 38:(b=this.getPreviousShownNode())&&b.focus(),b=!1}!b&&a.preventDefault&&
a.preventDefault();return a.returnValue=b};_p._onkeypress=function(a){if(!a.altKey&&37<=a.keyCode&&40>=a.keyCode)return a.preventDefault&&a.preventDefault(),a.returnValue=!1};_p.dispose=function(){if(!this.disposed){for(var a=this.childNodes.length-1;0<=a;a--)this.childNodes[a].dispose();this.childNodes=this.parentNode=this.tree=null;this.disposed=!0}};_p.getLastShownDescendant=function(){return this.getExpanded()&&this.hasChildren()?this.getLastChild().getLastShownDescendant():this};
_p.getNextShownNode=function(){if(this.hasChildren()&&this.getExpanded())return this.getFirstChild();for(var a=this,b;null!=a;){b=a.getNextSibling();if(null!=b)return b;a=a.getParent()}return null};_p.getPreviousShownNode=function(){var a=this.getPreviousSibling();if(null!=a)return a.getLastShownDescendant();var a=this.getParent(),b=this.getTree();return b.showRootNode||a!=b?a:null};
function WebFXTree(a,b,c,d,e){WebFXTreeAbstractNode.call(this,a,b);d&&(this.icon=d);e&&(this.openIcon=e);c&&(this.behavior=c)}_p=WebFXTree.prototype=new WebFXTreeAbstractNode;_p.indentWidth=19;_p.open=!0;_p._selectedItem=null;_p._fireChange=!0;_p.rendered=!1;_p.suspendRedraw=!1;_p.showLines=!0;_p.showExpandIcons=!0;_p.showRootNode=!0;_p.showRootLines=!0;_p.getTree=function(){return this};_p.getDepth=function(){return 0};_p.getCreated=function(){return this.rendered};
_p.getExpanded=function(){return!this.showRootNode||WebFXTreeAbstractNode.prototype.getExpanded.call(this)};_p.setExpanded=function(a){this.showRootNode?WebFXTreeAbstractNode.prototype.setExpanded.call(this,a):this.open=a};_p.getExpandIconHtml=function(){return""};_p.getIconElement=function(){var a=this.getRowElement();return a?a.firstChild:null};_p.getExpandIconElement=function(a){return null};_p.updateExpandIcon=function(){};
_p.getRowClassName=function(){return WebFXTreeAbstractNode.prototype.getRowClassName.call(this)+(this.showRootNode?"":" webfx-tree-hide-root")};
_p.getIconSrc=function(){var a=this.getTree()?this.getTree().getBehavior():webFXTreeConfig.defaultBehavior;return(a="classic"==a&&this.getExpanded()||"classic"!=a&&this.isSelected())&&this.openIcon?-1==this.openIcon.indexOf("exedo")?webFXTreeConfig.iconPath+this.openIcon:this.openIcon:!a&&this.icon?-1==this.icon.indexof("exedo")?webFXTreeConfig.iconPath+this.icon:this.icon:a?webFXTreeConfig.openRootIcon:webFXTreeConfig.rootIcon};_p.getEventHandlersHtml=function(){return' onclick="return webFXTreeHandler.handleEvent(event)" onmousedown="return webFXTreeHandler.handleEvent(event)" ondblclick="return webFXTreeHandler.handleEvent(event)" onkeydown="return webFXTreeHandler.handleEvent(event)" onkeypress="return webFXTreeHandler.handleEvent(event)"'};
_p.setSelected=function(a){this._selectedItem!=a&&a&&a._setSelected(!0)};_p._fireOnChange=function(){if(this._fireChange&&"function"==typeof this.onchange)this.onchange()};_p.getSelected=function(){return this._selectedItem};_p.tabIndex="";_p.setTabIndex=function(a){var b=this._selectedItem||(this.showRootNode?this:this.firstChild);this.tabIndex=a;b&&b._setTabIndex(a)};_p.getTabIndex=function(){return this.tabIndex};_p.setBehavior=function(a){this.behavior=a};
_p.getBehavior=function(){return this.behavior||webFXTreeConfig.defaultBehavior};_p.setShowLines=function(a){this.showLines!=a&&(this.showLines=a,this.rendered&&this.update())};_p.getShowLines=function(){return this.showLines};_p.setShowRootLines=function(a){this.showRootLines!=a&&(this.showRootLines=a,this.rendered&&this.update())};_p.getShowRootLines=function(){return this.showRootLines};_p.setShowExpandIcons=function(a){this.showExpandIcons!=a&&(this.showExpandIcons=a,this.rendered&&this.getTree().update())};
_p.getShowExpandIcons=function(){return this.showExpandIcons};_p.setShowRootNode=function(a){this.showRootNode!=a&&(this.showRootNode=a,this.rendered&&this.getTree().update())};_p.getShowRoootNode=function(){return this.showRootNode};_p.onchange=function(){};_p.create=function(){var a=WebFXTreeAbstractNode.prototype.create.call(this);this.setTabIndex(this.tabIndex);this.rendered=!0;return a};_p.write=function(){document.write(this.toHtml());this.setTabIndex(this.tabIndex);this.rendered=!0};
_p.setSuspendRedraw=function(a){this.suspendRedraw=a};_p.getSuspendRedraw=function(){return this.suspendRedraw};function WebFXTreeItem(a,b,c,d,e){WebFXTreeAbstractNode.call(this,a,b);d&&(this.icon=d);e&&(this.openIcon=e);c&&c.add(this)}_p=WebFXTreeItem.prototype=new WebFXTreeAbstractNode;_p.tree=null;_p.getDepth=function(){if(null!=this.depth)return this.depth;if(this.parentNode){var a=this.parentNode.getDepth();return this.depth=null!=a?a+1:null}return null};
_p.getTree=function(){return this.tree?this.tree:this.parentNode?this.tree=this.parentNode.getTree():null};_p.getCreated=function(){var a=this.getTree();return a&&a.getCreated()};
_p.getIconSrc=function(){var a=this.getTree()?this.getTree().getBehavior():webFXTreeConfig.defaultBehavior;return(a="classic"==a&&this.getExpanded()||"classic"!=a&&this.isSelected())&&this.openIcon?-1==this.openIcon.indexOf("exedo")?webFXTreeConfig.iconPath+this.openIcon:this.openIcon:!a&&this.icon?-1==this.icon.indexOf("exedo")?webFXTreeConfig.iconPath+this.icon:this.icon:this.hasChildren()?a?webFXTreeConfig.openFolderIcon:webFXTreeConfig.folderIcon:webFXTreeConfig.fileIcon};
window.attachEvent&&window.attachEvent("onunload",function(){for(var a in webFXTreeHandler.all)webFXTreeHandler.all[a].dispose()});webFXTreeConfig.loadingText="Loading...";webFXTreeConfig.loadingIcon="../xp/loading.gif";function WebFXLoadTree(a,b,c,d,e,f,g){WebFXTree.call(this,a,c,d,e,f,g);webFXTreeHandler&&(webFXTreeHandler.selected=this);this.src=b;this.baksrc=g;this.loading=!b;this.loaded=!b;this.errorText="";this.src&&(this._loadingItem=WebFXLoadTree.createLoadingItem(),this.add(this._loadingItem),this.getExpanded()&&WebFXLoadTree.loadXmlDocument(this))}
WebFXLoadTree.createLoadingItem=function(){return new WebFXTreeItem(webFXTreeConfig.loadingText,null,null,webFXTreeConfig.loadingIcon)};_p=WebFXLoadTree.prototype=new WebFXTree;_p.setExpanded=function(a){WebFXTree.prototype.setExpanded.call(this,a);this.src&&a&&(this.loaded||this.loading||WebFXLoadTree.loadXmlDocument(this))};
function WebFXLoadTreeItem(a,b,c,d,e,f,g){WebFXTreeItem.call(this,a,c,d,e,f,g);this.src=b;this.baksrc=g;this.loading=!b;this.loaded=!b;this.errorText="";this.src&&(this._loadingItem=WebFXLoadTree.createLoadingItem(),this.add(this._loadingItem),this.getExpanded()&&WebFXLoadTree.loadXmlDocument(this))}_p=WebFXLoadTreeItem.prototype=new WebFXTreeItem;_p.setExpanded=function(a){WebFXTreeItem.prototype.setExpanded.call(this,a);this.src&&a&&(this.loaded||this.loading||WebFXLoadTree.loadXmlDocument(this))};
WebFXLoadTree.prototype.reload=_p.reload=function(){if(this.loaded){var a=this.getTree(),b=this.getExpanded(),c=a.getSuspendRedraw();for(a.setSuspendRedraw(!0);0<this.childNodes.length;)this.remove(this.childNodes[this.childNodes.length-1]);this.loaded=!1;this._loadingItem=WebFXLoadTree.createLoadingItem();this.add(this._loadingItem);b&&this.setExpanded(!0);a.setSuspendRedraw(c);this.update()}else this.open&&!this.loading&&WebFXLoadTree.loadXmlDocument(this)};
WebFXLoadTree.prototype.setSrc=_p.setSrc=function(a){if(a!=this.src){var b=this.getExpanded();this._callSuspended(function(){for(;0<this.childNodes.length;)this.remove(this.childNodes[this.childNodes.length-1])});this.update();this.loading=this.loaded=!1;this._loadingItem&&(this._loadingItem.dispose(),this._loadingItem=null);if(this.src=a)this._loadingItem=WebFXLoadTree.createLoadingItem(),this.add(this._loadingItem);this.setExpanded(b)}};WebFXLoadTree.prototype.getSrc=_p.getSrc=function(){return this.src};
WebFXLoadTree.prototype.dispose=function(){WebFXTree.prototype.dispose.call(this);if(this._xmlHttp){this._xmlHttp.dispose&&this._xmlHttp.dispose();try{this._xmlHttp.onreadystatechange=null,this._xmlHttp.abort()}catch(a){}this._xmlHttp=null}};_p.dispose=function(){WebFXTreeItem.prototype.dispose.call(this);if(this._xmlHttp){this._xmlHttp.dispose&&this._xmlHttp.dispose();try{this._xmlHttp.onreadystatechange=null,this._xmlHttp.abort()}catch(a){}this._xmlHttp=null}};
WebFXLoadTree.prototype.openPath=_p.openPath=function(a,b,c){delete this._pathToOpen;this._selectPathOnLoad=b;this._focusPathOnLoad=c;if(""==a)b&&this.select(),c&&window.setTimeout('WebFXTreeAbstractNode._onTimeoutFocus("'+this.getId()+'")',10);else{var d=a.split("/"),e=d.slice(1).join("/");if("/"==a.charAt(0))this.getTree().openPath(e,b,c);else if(this.setExpanded(!0),this.loaded){d=a.split("/");a=this.findChildByText(d[0]);if(!a)throw'Could not find child node with text "'+d[0]+'"';a.openPath(e,
b,c)}else this._pathToOpen=a}};WebFXLoadTree._attrs=["text","src","action","id","target"];
WebFXLoadTree.createItemFromElement=function(a){var b={},c=a.attributes,d,e;e=c.length;for(d=0;d<e;d++)null!=c[d]&&(b[c[d].nodeName]=c[d].nodeValue);for(d=0;d<WebFXLoadTree._attrs.length;d++)e=WebFXLoadTree._attrs[d],(value=a.getAttribute(e))&&(b[e]=value);var f;b.onaction?f=new Function(b.onaction):b.action&&(f=b.action);f=new WebFXLoadTreeItem(b.html||"",b.src,f,null,b.icon,b.openIcon,b.baksrc);b.text&&f.setText(b.text);b.target&&(f.target=b.target);b.id&&f.setId(b.id);b.toolTip&&(f.toolTip=b.toolTip);
b.expanded&&f.setExpanded("false"!=b.expanded);b.onload&&(f.onload=new Function(b.onload));b.onerror&&(f.onerror=new Function(b.onerror));f.attributes=b;a=a.childNodes;e=a.length;for(d=0;d<e;d++)"tree"==a[d].tagName&&f.add(WebFXLoadTree.createItemFromElement(a[d]));return f};
WebFXLoadTree.loadXmlDocument=function(a){if(!a.loading&&!a.loaded){a.loading=!0;var b=a.getId();a._xmlHttp=window.XMLHttpRequest?new XMLHttpRequest:new window.ActiveXObject("Microsoft.XmlHttp");a._xmlHttp.open("GET",a.src,!0);a._xmlHttp.onreadystatechange=new Function('WebFXLoadTree._onload("'+b+'")');window.setTimeout('WebFXLoadTree._ontimeout("'+b+'")',10)}};
WebFXLoadTree._onload=function(a){a=webFXTreeHandler.all[a];4==a._xmlHttp.readyState&&(WebFXLoadTree.documentLoaded(a),webFXLoadTreeQueue.remove(a),a._xmlHttp.dispose&&a._xmlHttp.dispose(),a._xmlHttp=null)};WebFXLoadTree._ontimeout=function(a){webFXLoadTreeQueue.add(webFXTreeHandler.all[a])};
WebFXLoadTree.documentLoaded=function(a){if(!a.loaded){a.errorText="";a.loaded=!0;a.loading=!1;var b=a.getTree(),c=!1;try{c=b.getSuspendRedraw()}catch(d){}b.setSuspendRedraw(!0);var e=a._xmlHttp.responseXML;try{if(!e||e.parserError&&0!=e.parseError.errorCode||!e.documentElement)a.errorText=e&&0!=e.parseError.errorCode?"Error loading "+a.src+" ("+e.parseError.reason+")":"Error loading "+a.src+" ("+a._xmlHttp.status+": "+a._xmlHttp.statusText+")";else for(var f=0,g=e.documentElement.childNodes,h=g.length,
e=0;e<h;e++)if("tree"==g[e].tagName){var k=WebFXLoadTree.createItemFromElement(g[e]);try{""!=oldSelectName&&k.text==oldSelectName&&(k.select(),oldSelectName="")}catch(m){}a.add(k);f++}if(""!=a.errorText){if(a._loadingItem.text=a.errorText,a._loadingItem.action=WebFXLoadTree._reloadParent,a._loadingItem.toolTip="Click to reload",b.setSuspendRedraw(c),a._loadingItem.update(),"function"==typeof a.onerror)a.onerror()}else if(null!=a._loadingItem&&a.remove(a._loadingItem),a._pathToOpen&&a.openPath(a._pathToOpen,
a._selectPathOnLoad,a._focusPathOnLoad),b.setSuspendRedraw(c),a.update(),"function"==typeof a.onload)a.onload()}catch(r){}}};WebFXLoadTree._reloadParent=function(){this.getParent().reload()};
var webFXLoadTreeQueue={_nodes:[],_ie:/msie/i.test(navigator.userAgent),_opera:/opera/i.test(navigator.userAgent),add:function(a){this._ie||this._opera?(this._nodes.push(a),1==this._nodes.length&&this._send()):a._xmlHttp.send(null)},remove:function(a){if(this._ie||this._opera)arrayHelper.remove(this._nodes,a),0<this._nodes.length&&this._send()},_send:function(){var a=this._nodes[0].getId();(a=webFXTreeHandler.all[a])&&(a._xmlHttp?a._xmlHttp.send(null):this.remove(a))}};(function(a,b){function c(a){return a?"[object Array]"===Object.prototype.toString.call(a):!1}function d(a){return a?"[object Function]"===Object.prototype.toString.call(a):!1}function e(a,b){for(var c=0,d=b.length;c<d;c++)if(a===b[c])return c;return-1}function f(a,b){if(c(a))for(var d=0,e=a.length;d<e&&!1!==b.call(a[d],d,a[d]);d++);else for(d in a)if(a.hasOwnProperty(d)&&!1===b.call(a[d],d,a[d]))break}function g(a){return a.replace(/(?:^[ \t\n\r]+)|(?:[ \t\n\r]+$)/g,"")}function h(a,c,d){d=d===b?
",":d;return 0<=(d+c+d).indexOf(d+a+d)}function k(a){return a&&/^\d+$/.test(a)?a+"px":a}function m(a){var b;return a&&(b=/(\d+)/.exec(a))?parseInt(b[1],10):0}function r(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}function D(a){return a.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&amp;/g,"&")}function w(a){var b=a.split("-");a="";f(b,function(b,c){a+=0<b?c.charAt(0).toUpperCase()+c.substr(1):c});return a}function E(a){function b(a){a=
parseInt(a,10).toString(16).toUpperCase();return 1<a.length?a:"0"+a}return a.replace(/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/ig,function(a,c,u,d){return"#"+b(c)+b(u)+b(d)})}function F(a,A){A=A===b?",":A;var d={},e=c(a)?a:a.split(A),g;f(e,function(a,b){if(g=/^(\d+)\.\.(\d+)$/.exec(b))for(var c=parseInt(g[1],10);c<=parseInt(g[2],10);c++)d[c.toString()]=!0;else d[b]=!0});return d}function O(a,b){return Array.prototype.slice.call(a,b||0)}function B(a,c){return a===b?c:a}function K(a,b,c){c||(c=
b,b=null);var d;if(b){var e=function(){};e.prototype=b.prototype;d=new e;f(c,function(a,b){d[a]=b})}else d=c;d.constructor=a;a.prototype=d;a.parent=b?b.prototype:null}function v(a){var b;if(b=/\{[\s\S]*\}|\[[\s\S]*\]/.exec(a))a=b[0];b=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;b.lastIndex=0;b.test(a)&&(a=a.replace(b,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,
"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return eval("("+a+")");throw"JSON parse error";}function R(a,b,c){a.addEventListener?a.addEventListener(b,c,gb):a.attachEvent&&a.attachEvent("on"+b,c)}function T(a,b,c){a.removeEventListener?a.removeEventListener(b,c,gb):a.detachEvent&&a.detachEvent("on"+b,c)}function ba(a,b){this.init(a,b)}function p(a){try{delete a[qa]}catch(b){a.removeAttribute&&a.removeAttribute(qa)}}function n(a,
c,d){if(0<=c.indexOf(","))f(c.split(","),function(){n(a,this,d)});else{var Z=a[qa]||null;Z||(a[qa]=++hb,Z=hb);N[Z]===b&&(N[Z]={});var g=N[Z][c];g&&0<g.length?T(a,c,g[0]):(N[Z][c]=[],N[Z].el=a);g=N[Z][c];0===g.length&&(g[0]=function(c){var A=c?new ba(a,c):b;f(g,function(b,c){0<b&&c&&c.call(a,A)})});0>e(d,g)&&g.push(d);R(a,c,g[0])}}function t(a,c,d){if(c&&0<=c.indexOf(","))f(c.split(","),function(){t(a,this,d)});else{var e=a[qa]||null;if(e)if(c===b)e in N&&(f(N[e],function(b,c){"el"!=b&&0<c.length&&
T(a,b,c[0])}),delete N[e],p(a));else if(N[e]){var g=N[e][c];if(g&&0<g.length){d===b?(T(a,c,g[0]),delete N[e][c]):(f(g,function(a,b){0<a&&b===d&&g.splice(a,1)}),1==g.length&&(T(a,c,g[0]),delete N[e][c]));var h=0;f(N[e],function(){h++});2>h&&(delete N[e],p(a))}}}}function q(a,b){if(0<=b.indexOf(","))f(b.split(","),function(){q(a,this)});else{var c=a[qa]||null;if(c){var d=N[c][b];if(N[c]&&d&&0<d.length)d[0]()}}}function W(a,b,c){b=/^\d{2,}$/.test(b)?b:b.toUpperCase().charCodeAt(0);n(a,"keydown",function(d){d.ctrlKey&&
d.which==b&&!d.shiftKey&&!d.altKey&&(c.call(a),d.stop())})}function s(a){for(var b={},c=/\s*([\w\-]+)\s*:([^;]*)(;|$)/g,d;d=c.exec(a);){var e=g(d[1].toLowerCase());d=g(E(d[2]));b[e]=d}return b}function J(a){for(var b={},c=/\s+(?:([\w\-:]+)|(?:([\w\-:]+)=([^\s"'<>]+))|(?:([\w\-:"]+)="([^"]*)")|(?:([\w\-:"]+)='([^']*)'))(?=(?:\s|\/|>)+)/g,d;d=c.exec(a);){var e=(d[1]||d[2]||d[4]||d[6]).toLowerCase();b[e]=(d[2]?d[3]:d[4]?d[5]:d[7])||""}return b}function z(a,b){return a=/\s+class\s*=/.test(a)?a.replace(/(\s+class=["']?)([^"']*)(["']?[\s>])/,
function(a,c,u,d){return 0>(" "+u+" ").indexOf(" "+b+" ")?""===u?c+b+d:c+u+" "+b+d:a}):a.substr(0,a.length-1)+' class="'+b+'">'}function H(a){var b="";f(s(a),function(a,c){b+=a+":"+c+";"});return b}function I(a,c,d,f){function g(a){a=a.split("/");for(var b=[],c=0,u=a.length;c<u;c++){var d=a[c];".."==d?0<b.length&&b.pop():""!==d&&"."!=d&&b.push(d)}return"/"+b.join("/")}function h(b,c){if(a.substr(0,b.length)===b){for(var d=[],A=0;A<c;A++)d.push("..");A=".";0<d.length&&(A+="/"+d.join("/"));"/"==f&&
(A+="/");return A+a.substr(b.length)}if(l=/^(.*)\//.exec(b))return h(l[1],++c)}c=B(c,"").toLowerCase();if(0>e(c,["absolute","relative","domain"]))return a;d=d||location.protocol+"//"+location.host;if(f===b){var k=location.pathname.match(/^(\/.*)\//);f=k?k[1]:""}var l;if(l=/^(\w+:\/\/[^\/]*)/.exec(a)){if(l[1]!==d)return a}else if(/^\w+:/.test(a))return a;/^\//.test(a)?a=d+g(a.substr(1)):/^\w+:\/\//.test(a)||(a=d+g(f+"/"+a));"relative"===c?a=h(d+f,0).substr(2):"absolute"===c&&a.substr(0,d.length)===
d&&(a=a.substr(d.length));return a}function P(a,b,c,d,Q){c=c||"";d=B(d,!1);Q=B(Q,"\t");var h="xx-small x-small small medium large x-large xx-large".split(" ");a=a.replace(/(<(?:pre|pre\s[^>]*)>)([\s\S]*?)(<\/pre>)/ig,function(a,b,c,u){return b+c.replace(/<(?:br|br\s[^>]*)>/ig,"\n")+u});a=a.replace(/<(?:br|br\s[^>]*)\s*\/?>\s*<\/p>/ig,"</p>");a=a.replace(/(<(?:p|p\s[^>]*)>)\s*(<\/p>)/ig,"$1<br />$2");a=a.replace(/\u200B/g,"");var l={};b&&(f(b,function(a,b){for(var c=a.split(","),u=0,d=c.length;u<d;u++)l[c[u]]=
F(b)}),l.script||(a=a.replace(/(<(?:script|script\s[^>]*)>)([\s\S]*?)(<\/script>)/ig,"")),l.style||(a=a.replace(/(<(?:style|style\s[^>]*)>)([\s\S]*?)(<\/style>)/ig,"")));var k=[];a=a.replace(/(\s*)<(\/)?([\w\-:]+)((?:\s+|(?:\s+[\w\-:]+)|(?:\s+[\w\-:]+=[^\s"'<>]+)|(?:\s+[\w\-:"]+="[^"]*")|(?:\s+[\w\-:"]+='[^']*'))*)(\/)?>(\s*)/g,function(a,u,g,m,r,n,p){u=u||"";g=g||"";var q=m.toLowerCase(),t=r||"";m=n?" "+n:"";p=p||"";if(b&&!l[q])return"";""===m&&ib[q]&&(m=" /");jb[q]&&(u&&(u=" "),p&&(p=" "));Oa[q]&&
(g?p="\n":u="\n");d&&"br"==q&&(p="\n");if(kb[q]&&!Oa[q])if(d){g&&0<k.length&&k[k.length-1]===q?k.pop():k.push(q);p=u="\n";r=0;for(n=g?k.length:k.length-1;r<n;r++)u+=Q,g||(p+=Q);m?k.pop():g||(p+=Q)}else u=p="";if(""!==t){var v=J(a);if("font"===q){var z={},w="";f(v,function(a,b){"color"===a&&(z.color=b,delete v[a]);"size"===a&&(z["font-size"]=h[parseInt(b,10)-1]||"",delete v[a]);"face"===a&&(z["font-family"]=b,delete v[a]);"style"===a&&(w=b)});w&&!/;$/.test(w)&&(w+=";");f(z,function(a,b){""!==b&&(/\s/.test(b)&&
(b="'"+b+"'"),w+=a+":"+b+";")});v.style=w}f(v,function(a,u){Lb[a]&&(v[a]=a);0<=e(a,["src","href"])&&(v[a]=I(u,c));(b&&"style"!==a&&!l[q]["*"]&&!l[q][a]||"body"===q&&"contenteditable"===a||/^kindeditor_\d+$/.test(a))&&delete v[a];if("style"===a&&""!==u){var d=s(u);f(d,function(a){b&&!l[q].style&&!l[q]["."+a]&&delete d[a]});var g="";f(d,function(a,b){g+=a+":"+b+";"});v.style=g}});t="";f(v,function(a,b){"style"===a&&""===b||(b=b.replace(/"/g,"&quot;"),t+=" "+a+'="'+b+'"')})}"font"===q&&(q="span");return u+
"<"+g+q+t+m+">"+p});a=a.replace(/(<(?:pre|pre\s[^>]*)>)([\s\S]*?)(<\/pre>)/ig,function(a,b,c,u){return b+c.replace(/\n/g,'<span id="__kindeditor_pre_newline__">\n')+u});a=a.replace(/\n\s*\n/g,"\n");a=a.replace(/<span id="__kindeditor_pre_newline__">\n/g,"\n");return g(a)}function aa(a,b){a=a.replace(/<meta[\s\S]*?>/ig,"").replace(/<![\s\S]*?>/ig,"").replace(/<style[^>]*>[\s\S]*?<\/style>/ig,"").replace(/<script[^>]*>[\s\S]*?<\/script>/ig,"").replace(/<w:[^>]+>[\s\S]*?<\/w:[^>]+>/ig,"").replace(/<o:[^>]+>[\s\S]*?<\/o:[^>]+>/ig,
"").replace(/<xml>[\s\S]*?<\/xml>/ig,"").replace(/<(?:table|td)[^>]*>/ig,function(a){return a.replace(/border-bottom:([#\w\s]+)/ig,"border:$1")});return P(a,b)}function L(a){return/\.(rm|rmvb)(\?|$)/i.test(a)?"audio/x-pn-realaudio-plugin":/\.(swf|flv)(\?|$)/i.test(a)?"application/x-shockwave-flash":"video/x-ms-asf-plugin"}function ja(a){return J(unescape(a))}function U(a){var b="<embed ";f(a,function(a,c){b+=a+'="'+c+'" '});return b+="/>"}function pa(a,b){var c=b.width,d=b.height,e=b.type||L(b.src),
f=U(b),g="";0<c&&(g+="width:"+c+"px;");0<d&&(g+="height:"+d+"px;");c=/realaudio/i.test(e)?"ke-rm":/flash/i.test(e)?"ke-flash":"ke-media";c='<img class="'+c+'" src="'+a+'" ';""!==g&&(c+='style="'+g+'" ');return c+='data-ke-tag="'+escape(f)+'" alt="" />'}function ka(a,b){if(9==a.nodeType&&9!=b.nodeType)return!0;for(;b=b.parentNode;)if(b==a)return!0;return!1}function C(a,b){b=b.toLowerCase();var c=null;if(G&&8>V&&"script"!=a.nodeName.toLowerCase()){var d=a.ownerDocument.createElement("div");d.appendChild(a.cloneNode(!1));
d=J(D(d.innerHTML));b in d&&(c=d[b])}else try{c=a.getAttribute(b,2)}catch(e){c=a.getAttribute(b,1)}"style"===b&&null!==c&&(c=H(c));return c}function Ba(a,b){function c(a){return"string"!=typeof a?a:a.replace(/([^\w\-])/g,"\\$1")}function d(a,b){return"*"===a||a.toLowerCase()===c(b.toLowerCase())}function g(a,b,c){var u=[];(a=(c.ownerDocument||c).getElementById(a.replace(/\\/g,"")))&&d(b,a.nodeName)&&ka(c,a)&&u.push(a);return u}function h(a,b,c){var u=c.ownerDocument||c,A=[],M,e,f;if(c.getElementsByClassName)for(u=
c.getElementsByClassName(a.replace(/\\/g,"")),M=0,e=u.length;M<e;M++)f=u[M],d(b,f.nodeName)&&A.push(f);else if(u.querySelectorAll)for(u=u.querySelectorAll(("#document"!==c.nodeName?c.nodeName+" ":"")+b+"."+a),M=0,e=u.length;M<e;M++)f=u[M],ka(c,f)&&A.push(f);else for(u=c.getElementsByTagName(b),a=" "+a+" ",M=0,e=u.length;M<e;M++)(f=u[M],1==f.nodeType)&&(b=f.className)&&-1<(" "+b+" ").indexOf(a)&&A.push(f);return A}function l(a,b,u,d){var A=[];u=d.getElementsByTagName(u);for(var e=0,f=u.length;e<f;e++)d=
u[e],1==d.nodeType&&(null===b?null!==C(d,a)&&A.push(d):b===c(C(d,a))&&A.push(d));return A}function k(a,b){var c=[],u,A=(u=/^((?:\\.|[^.#\s\[<>])+)/.exec(a))?u[1]:"*";if(u=/#((?:[\w\-]|\\.)+)$/.exec(a))c=g(u[1],A,b);else if(u=/\.((?:[\w\-]|\\.)+)$/.exec(a))c=h(u[1],A,b);else if(u=/\[((?:[\w\-]|\\.)+)\]/.exec(a))c=l(u[1].toLowerCase(),null,A,b);else if(u=/\[((?:[\w\-]|\\.)+)\s*=\s*['"]?((?:\\.|[^'"]+)+)['"]?\]/.exec(a)){c=u[1].toLowerCase();u=u[2];if("id"===c)A=g(u,A,b);else if("class"===c)A=h(u,A,
b);else if("name"===c){c=[];u=(b.ownerDocument||b).getElementsByName(u.replace(/\\/g,""));for(var M,e=0,f=u.length;e<f;e++)M=u[e],d(A,M.nodeName)&&ka(b,M)&&M.getAttributeNode("name")&&c.push(M);A=c}else A=l(c,u,A,b);c=A}else for(A=b.getElementsByTagName(A),M=0,e=A.length;M<e;M++)u=A[M],1==u.nodeType&&c.push(u);return c}var da=a.split(",");if(1<da.length){var m=[];f(da,function(){f(Ba(this,b),function(){0>e(this,m)&&m.push(this)})});return m}b=b||document;for(var da=[],r,p=/((?:\\.|[^\s>])+|[\s>])/g;r=
p.exec(a);)" "!==r[1]&&da.push(r[1]);r=[];if(1==da.length)return k(da[0],b);var p=!1,n,q,s,t,v,w,z,D,B,E;w=0;for(lenth=da.length;w<lenth;w++)if(n=da[w],">"===n)p=!0;else{if(0<w){q=[];z=0;for(B=r.length;z<B;z++)for(t=r[z],s=k(n,t),D=0,E=s.length;D<E;D++)v=s[D],p?t===v.parentNode&&q.push(v):q.push(v);r=q}else r=k(n,b);if(0===r.length)return[]}return r}function na(a){return a?a.ownerDocument||a.document||a:document}function ia(b){if(!b)return a;b=na(b);return b.parentWindow||b.defaultView}function Jb(a,
b){if(1==a.nodeType){var c=na(a);try{a.innerHTML='<img id="__kindeditor_temp_tag__" width="0" height="0" style="display:none;" />'+b;var d=c.getElementById("__kindeditor_temp_tag__");d.parentNode.removeChild(d)}catch(e){l(a).empty(),l("@"+b,c).each(function(){a.appendChild(this)})}}}function La(a,b,c){G&&8>V&&"class"==b.toLowerCase()&&(b="className");a.setAttribute(b,""+c)}function Ma(a){return a&&a.nodeName?a.nodeName.toLowerCase():""}function Kb(a,b){var c=ia(a),d=w(b),e="";c.getComputedStyle?(c=
c.getComputedStyle(a,null),e=c[d]||c.getPropertyValue(b)||a.style[d]):a.currentStyle&&(e=a.currentStyle[d]||a.style[d]);return e}function X(a){a=a||document;return la?a.body:a.documentElement}function oa(a){a=a||document;var b;G||Pa?(b=X(a).scrollLeft,a=X(a).scrollTop):(b=ia(a).scrollX,a=ia(a).scrollY);return{x:b,y:a}}function Y(a){this.init(a)}function cb(a){a.collapsed=a.startContainer===a.endContainer&&a.startOffset===a.endOffset;return a}function Na(a,b,c){function d(e,f,g){var Z=e.nodeValue.length,
Q;b&&(Q=e.cloneNode(!0),Q=0<f?Q.splitText(f):Q,g<Z&&Q.splitText(g-f));if(c){var k=e;0<f&&(k=e.splitText(f),a.setStart(e,f));g<Z&&(e=k.splitText(g-f),a.setEnd(e,0));h.push(k)}return Q}function e(){c&&a.up().collapse(!0);for(var b=0,d=h.length;b<d;b++){var A=h[b];A.parentNode&&A.parentNode.removeChild(A)}}function f(e,Q){for(var n=e.firstChild,q;n;){q=(new ea(g)).selectNode(n);l=q.compareBoundaryPoints(xa,a);0<=l&&0>=m&&(m=q.compareBoundaryPoints(ya,a));0<=m&&0>=r&&(r=q.compareBoundaryPoints(ra,a));
0<=r&&0>=p&&(p=q.compareBoundaryPoints(za,a));if(0<=p)return!1;q=n.nextSibling;if(0<l)if(1==n.nodeType)if(0<=m&&0>=r)b&&Q.appendChild(n.cloneNode(!0)),c&&h.push(n);else{var s;b&&(s=n.cloneNode(!1),Q.appendChild(s));if(!1===f(n,s))return!1}else if(3==n.nodeType&&(n=n==k.startContainer?d(n,k.startOffset,n.nodeValue.length):n==k.endContainer?d(n,0,k.endOffset):d(n,0,n.nodeValue.length),b))try{Q.appendChild(n)}catch(t){}n=q}}var g=a.doc,h=[],k=a.cloneRange().down(),l=-1,m=-1,r=-1,p=-1,n=a.commonAncestor(),
q=g.createDocumentFragment();if(3==n.nodeType)return n=d(n,a.startOffset,a.endOffset),b&&q.appendChild(n),e(),b?q:a;f(n,q);c&&a.up().collapse(!0);for(var n=0,s=h.length;n<s;n++){var t=h[n];t.parentNode&&t.parentNode.removeChild(t)}return b?q:a}function wa(a,b){for(var c=b;c;){var d=l(c);if("marquee"==d.name||"select"==d.name)return;c=c.parentNode}try{a.moveToElementText(b)}catch(e){}}function db(a,b){var c=a.parentElement().ownerDocument,d=a.duplicate();d.collapse(b);var e=d.parentElement(),f=e.childNodes;
if(0===f.length)return{node:e.parentNode,offset:l(e).index()};var g=c,h=0,k=-1,m=a.duplicate();wa(m,e);for(var n=0,r=f.length;n<r;n++){var p=f[n],k=m.compareEndPoints("StartToStart",d);if(0===k)return{node:p.parentNode,offset:n};if(1==p.nodeType){var q=a.duplicate(),s,t=l(p),v=p;t.isControl()&&(s=c.createElement("span"),t.after(s),v=s,h+=t.text().replace(/\r\n|\n|\r/g,"").length);wa(q,v);m.setEndPoint("StartToEnd",q);0<k?h+=q.text.replace(/\r\n|\n|\r/g,"").length:h=0;s&&l(s).remove()}else 3==p.nodeType&&
(m.moveStart("character",p.nodeValue.length),h+=p.nodeValue.length);0>k&&(g=p)}if(0>k&&1==g.nodeType)return{node:e,offset:l(e.lastChild).index()+1};if(0<k)for(;g.nextSibling&&1==g.nodeType;)g=g.nextSibling;m=a.duplicate();wa(m,e);m.setEndPoint("StartToEnd",d);h-=m.text.replace(/\r\n|\n|\r/g,"").length;if(0<k&&3==g.nodeType)for(c=g.previousSibling;c&&3==c.nodeType;)h-=c.nodeValue.length,c=c.previousSibling;return{node:g,offset:h}}function eb(a,b){var c=a.ownerDocument||a,d=c.body.createTextRange();
if(c==a)return d.collapse(!0),d;if(1==a.nodeType&&0<a.childNodes.length){var e=a.childNodes,f;0===b?(f=e[0],e=!0):(f=e[b-1],e=!1);if(!f)return d;if("head"===l(f).name)return 1===b&&(e=!0),2===b&&(e=!1),d.collapse(e),d;if(1==f.nodeType){var g=l(f),h;g.isControl()&&(h=c.createElement("span"),e?g.before(h):g.after(h),f=h);wa(d,f);d.collapse(e);h&&l(h).remove();return d}a=f;b=e?0:f.nodeValue.length}c=c.createElement("span");l(a).before(c);wa(d,c);d.moveStart("character",b);l(c).remove();return d}function lb(a){function b(a){"tr"==
l(a.node).name&&(a.node=a.node.cells[a.offset],a.offset=0)}var c;if(G){if(a.item)return c=na(a.item(0)),c=new ea(c),c.selectNode(a.item(0)),c;c=a.parentElement().ownerDocument;var d=db(a,!0);a=db(a,!1);b(d);b(a);c=new ea(c);c.setStart(d.node,d.offset);c.setEnd(a.node,a.offset);return c}d=a.startContainer;c=d.ownerDocument||d;c=new ea(c);c.setStart(d,a.startOffset);c.setEnd(a.endContainer,a.endOffset);return c}function ea(a){this.init(a)}function Qa(a){return a.nodeName?new ea(a):a.constructor===ea?
a:lb(a)}function fa(a,b,c){try{a.execCommand(b,!1,c)}catch(d){}}function mb(a,b){var c="";try{c=a.queryCommandValue(b)}catch(d){}"string"!==typeof c&&(c="");return c}function Ra(a){var b=ia(a);return a.selection||b.getSelection()}function nb(a){var b={},c,d;f(a,function(a,u){c=a.split(",");for(var e=0,f=c.length;e<f;e++)d=c[e],b[d]=u});return b}function Sa(a,b){return ob(a,b,"*")||ob(a,b)}function ob(a,b,c){c=c||a.name;if(1!==a.type)return!1;b=nb(b);if(!b[c])return!1;c=b[c].split(",");b=0;for(var d=
c.length;b<d;b++){var e=c[b];if("*"===e)return!0;var f=/^(\.?)([^=]+)(?:=([^=]*))?$/.exec(e),g=f[1]?"css":"attr",e=f[2],f=f[3]||"";if(""===f&&""!==a[g](e)||""!==f&&a[g](e)===f)return!0}return!1}function Ta(a,b){1==a.type&&(pb(a,b,"*"),pb(a,b))}function pb(a,b,c){c=c||a.name;if(1===a.type&&(b=nb(b),b[c])){c=b[c].split(",");b=!1;for(var d=0,e=c.length;d<e;d++){var f=c[d];if("*"===f){b=!0;break}var g=/^(\.?)([^=]+)(?:=([^=]*))?$/.exec(f),f=g[2];g[1]?(f=w(f),a[0].style[f]&&(a[0].style[f]="")):a.removeAttr(f)}b&&
a.remove(!0)}}function Ua(a){for(;a.first();)a=a.first();return a}function sa(a){return 1==a.type&&""===a.html().replace(/<[^>]+>/g,"")}function Mb(a,b,c){f(b,function(b,c){"style"!==b&&a.attr(b,c)});f(c,function(b,c){a.css(b,c)})}function qb(a){for(;a&&"body"!=a.name;){if(Oa[a.name]||"div"==a.name&&a.hasClass("ke-script"))return!0;a=a.parent()}return!1}function Ca(a){this.init(a)}function rb(a){a.nodeName&&(a=na(a),a=Qa(a).selectNodeContents(a.body).collapse(!1));return new Ca(a)}function Va(a){var c=
a.moveEl,d=a.moveFn,e=a.clickEl||c,g=a.beforeDrag,h=[document],k=[{x:0,y:0}],fb=[];(a.iframeFix===b||a.iframeFix)&&l("iframe").each(function(){var a;try{a=Wa(this),l(a)}catch(b){a=null}a&&(h.push(a),k.push(l(this).pos()))});e.mousedown(function(a){var b=e.get(),u=m(c.css("left")),n=m(c.css("top")),r=c.width(),p=c.height(),q=a.pageX,s=a.pageY,t=!0;g&&g();f(h,function(a,c){function A(b){if(t){var c=ga(k[a].x+b.pageX-q),f=ga(k[a].y+b.pageY-s);d.call(e,u,n,r,p,c,f)}b.stop()}function g(a){a.stop()}function h(a){t=
!1;b.releaseCapture&&b.releaseCapture();f(fb,function(){l(this.doc).unbind("mousemove",this.move).unbind("mouseup",this.up).unbind("selectstart",this.select)});a.stop()}l(c).mousemove(A).mouseup(h).bind("selectstart",g);fb.push({doc:c,move:A,up:h,select:g})});b.setCapture&&b.setCapture();a.stop()})}function ha(a){this.init(a)}function Xa(a){return new ha(a)}function Wa(a){a=l(a)[0];return a.contentDocument||a.contentWindow.document}function Nb(a,b,d,e){var g=['<html><head><meta charset="utf-8" /><title>KindEditor</title>',
"<style>","html {margin:0;padding:0;}","body {margin:0;padding:5px;}",'body, td {font:12px/1.5 "sans serif",tahoma,verdana,helvetica;}',"body, p, div {word-wrap: break-word;}","p {margin:5px 0;}","table {border-collapse:collapse;}","img {border:0;}","table.ke-zeroborder td {border:1px dotted #AAA;}","img.ke-flash {","\tborder:1px solid #AAA;","\tbackground-image:url("+a+"common/flash.gif);","\tbackground-position:center center;","\tbackground-repeat:no-repeat;","\twidth:100px;","\theight:100px;",
"}","img.ke-rm {","\tborder:1px solid #AAA;","\tbackground-image:url("+a+"common/rm.gif);","\tbackground-position:center center;","\tbackground-repeat:no-repeat;","\twidth:100px;","\theight:100px;","}","img.ke-media {","\tborder:1px solid #AAA;","\tbackground-image:url("+a+"common/media.gif);","\tbackground-position:center center;","\tbackground-repeat:no-repeat;","\twidth:100px;","\theight:100px;","}","img.ke-anchor {","\tborder:1px dashed #666;","\twidth:16px;","\theight:16px;","}",".ke-script {",
"\tdisplay:none;","\tfont-size:0;","\twidth:0;","\theight:0;","}",".ke-pagebreak {","\tborder:1px dotted #AAA;","\tfont-size:0;","\theight:2px;","}","</style>"];c(d)||(d=[d]);f(d,function(a,b){b&&g.push('<link href="'+b+'" rel="stylesheet" />')});e&&g.push("<style>"+e+"</style>");g.push("</head><body "+(b?'class="'+b+'"':"")+"></body></html>");return g.join("\n")}function ta(a,b){return a.hasVal()?a.val(b):a.html(b)}function Da(a){this.init(a)}function sb(a){return new Da(a)}function tb(a,b){var c=
this.get(a);c&&!c.hasClass("ke-disabled")&&b(c)}function Ya(a){this.init(a)}function ub(a){return new Ya(a)}function Ea(a){this.init(a)}function Za(a){return new Ea(a)}function Fa(a){this.init(a)}function vb(a){return new Fa(a)}function wb(a){this.init(a)}function Ga(a){this.init(a)}function xb(a){return new Ga(a)}function $a(a,b){var c=document.getElementsByTagName("head")[0]||(la?document.body:document.documentElement),d=document.createElement("script");c.appendChild(d);d.src=a;d.charset="utf-8";
d.onload=d.onreadystatechange=function(){this.readyState&&"loaded"!==this.readyState||(b&&b(),d.onload=d.onreadystatechange=null,c.removeChild(d))}}function ab(a){for(var b=document.getElementsByTagName("head")[0]||(la?document.body:document.documentElement),c=document.createElement("link"),d=I(a,"absolute"),e=l('link[rel="stylesheet"]',b),f=0,g=e.length;f<g;f++)if(I(e[f].href,"absolute")===d)return;b.appendChild(c);c.href=a;c.rel="stylesheet"}function yb(a,b){if(!b)return ua[a];ua[a]=b}function zb(a){var b,
c="core";if(b=/^(\w+)\.(\w+)$/.exec(a))c=b[1],a=b[2];return{ns:c,key:a}}function Ab(a,c){c=c===b?l.options.langType:c;if("string"===typeof a){if(!ca[c])return"no language";var d=a.length-1;if("."===a.substr(d))return ca[c][a.substr(0,d)];d=zb(a);return ca[c][d.ns][d.key]}f(a,function(a,b){var d=zb(a);ca[c]||(ca[c]={});ca[c][d.ns]||(ca[c][d.ns]={});ca[c][d.ns][d.key]=b})}function Ha(a,b){if(!a.collapsed){a=a.cloneRange().up();var c=a.startContainer,d=a.startOffset;if((va||a.isControl())&&(c=l(c.childNodes[d]))&&
"img"==c.name&&b(c))return c}}function Ob(){var a=this;l(a.edit.doc).contextmenu(function(b){a.menu&&a.hideMenu();if(a.useContextmenu){if(0!==a._contextmenus.length){var c=0,d=[];for(f(a._contextmenus,function(){"-"==this.title?d.push(this):this.cond&&this.cond()&&(d.push(this),this.width&&this.width>c)&&(c=this.width)});0<d.length&&"-"==d[0].title;)d.shift();for(;0<d.length&&"-"==d[d.length-1].title;)d.pop();var e=null;f(d,function(a){"-"==this.title&&"-"==e.title&&delete d[a];e=this});if(0<d.length){b.preventDefault();
var g=l(a.edit.iframe).pos(),h=Za({x:g.x+b.clientX,y:g.y+b.clientY,width:c,css:{visibility:"hidden"},shadowMode:a.shadowMode});f(d,function(){this.title&&h.addItem(this)});var g=X(h.doc),k=h.div.height();b.clientY+k>=g.clientHeight-100&&h.pos(h.x,m(h.y)-k);h.div.css("visibility","visible");a.menu=h}}}else b.preventDefault()})}function Pb(){function a(b){for(b=l(b.commonAncestor());b&&(1!=b.type||b.isStyle());)b=b.parent();return b.name}var b=this,c=b.edit.doc,d=b.newlineTag;if(!(G&&"br"!==d||Aa&&
3>V&&"p"!==d||Pa)){var e=F("h1,h2,h3,h4,h5,h6,pre,li"),f=F("p,h1,h2,h3,h4,h5,h6,pre,li,blockquote");l(c).keydown(function(g){if(!(13!=g.which||g.shiftKey||g.ctrlKey||g.altKey)){b.cmd.selection();var h=a(b.cmd.range);"marquee"==h||"select"==h||("br"!==d||e[h]?f[h]||fa(c,"formatblock","<p>"):(g.preventDefault(),b.insertHtml("<br />")))}});l(c).keyup(function(e){if(!(13!=e.which||e.shiftKey||e.ctrlKey||e.altKey)&&"br"!=d&&(b.cmd.selection(),e=a(b.cmd.range),"marquee"!=e&&"select"!=e)&&(f[e]||fa(c,"formatblock",
"<p>"),e=b.cmd.commonAncestor("div"))){for(var g=l("<p></p>"),h=e[0].firstChild;h;){var k=h.nextSibling;g.append(h);h=k}e.before(g);e.remove();b.cmd.range.selectNodeContents(g[0]);b.cmd.select()}})}}function Qb(){var a=this,b=a.edit.doc;l(b).keydown(function(c){if(9==c.which)if(c.preventDefault(),a.afterTab)a.afterTab.call(a,c);else{c=a.cmd;var d=c.range;d.shrink();d.collapsed&&1==d.startContainer.nodeType&&(d.insertNode(l("@&nbsp;",b)[0]),c.select());a.insertHtml("&nbsp;&nbsp;&nbsp;&nbsp;")}})}function Rb(){var a=
this;l(a.edit.textarea[0],a.edit.win).focus(function(b){a.afterFocus&&a.afterFocus.call(a,b)}).blur(function(b){a.afterBlur&&a.afterBlur.call(a,b)})}function ma(a){return g(a.replace(/<span [^>]*id="?__kindeditor_bookmark_\w+_\d+__"?[^>]*><\/span>/ig,""))}function Bb(a){return a.replace(/<div[^>]+class="?__kindeditor_paste__"?[^>]*>[\s\S]*?<\/div>/ig,"")}function Cb(a,b){if(0===a.length)a.push(b);else{var c=a[a.length-1];ma(b.html)!==ma(c.html)&&a.push(b)}}function Db(a,b){var c=this.edit,d=c.doc.body,
e,f;if(0===a.length)return this;c.designMode?(e=this.cmd.range,f=e.createBookmark(!0),f.html=d.innerHTML):f={html:d.innerHTML};Cb(b,f);var g=a.pop();ma(f.html)===ma(g.html)&&0<a.length&&(g=a.pop());c.designMode?(c.html(g.html),g.start&&(e.moveToBookmark(g),this.select())):l(d).html(ma(g.html));return this}function Ia(a){function c(a,u){Ia.prototype[a]===b&&(d[a]=u);d.options[a]=u}var d=this;d.options={};f(a,function(b){c(b,a[b])});f(l.options,function(a,u){d[a]===b&&c(a,u)});c("width",B(d.width,d.minWidth));
c("height",B(d.height,d.minHeight));c("width",k(d.width));c("height",k(d.height));Eb&&(d.designMode=!1);var e=l(d.srcElement||"<textarea/>");d.srcElement=e;d.initContent=ta(e);d.plugin={};d.isCreated=!1;d.isLoading=!1;d._handlers={};d._contextmenus=[];d._undoStack=[];d._redoStack=[];d._calledPlugins={};d._firstAddBookmark=!0;d.menu=d.contextmenu=null;d.dialogs=[]}if(!a.KindEditor){a.console||(a.console={});console.log||(console.log=function(){});var S=navigator.userAgent.toLowerCase(),G=-1<S.indexOf("msie")&&
-1==S.indexOf("opera"),Aa=-1<S.indexOf("gecko")&&-1==S.indexOf("khtml"),va=-1<S.indexOf("applewebkit"),Pa=-1<S.indexOf("opera"),Eb=-1<S.indexOf("mobile"),la="CSS1Compat"!=document.compatMode,V=(S=/(?:msie|firefox|webkit|opera)[\/:\s](\d+)/.exec(S))?S[1]:"0",Ja=(new Date).getTime(),ga=Math.round,l={DEBUG:!1,VERSION:"4.0.4 (2011-12-11)",IE:G,GECKO:Aa,WEBKIT:va,OPERA:Pa,V:V,TIME:Ja,each:f,isArray:c,isFunction:d,inArray:e,inString:h,trim:g,addUnit:k,removeUnit:m,escape:r,unescape:D,toCamel:w,toHex:E,
toMap:F,toArray:O,undef:B,invalidUrl:function(a){return!a||/[<>"]/.test(a)},addParam:function(a,b){return 0<=a.indexOf("?")?a+"&"+b:a+"?"+b},extend:K,json:v},jb=F("a,abbr,acronym,b,basefont,bdo,big,br,button,cite,code,del,dfn,em,font,i,img,input,ins,kbd,label,map,q,s,samp,select,small,span,strike,strong,sub,sup,textarea,tt,u,var"),kb=F("address,applet,blockquote,body,center,dd,dir,div,dl,dt,fieldset,form,frameset,h1,h2,h3,h4,h5,h6,head,hr,html,iframe,ins,isindex,li,map,menu,meta,noframes,noscript,object,ol,p,pre,script,style,table,tbody,td,tfoot,th,thead,title,tr,ul"),
ib=F("area,base,basefont,br,col,frame,hr,img,input,isindex,link,meta,param,embed"),Fb=F("b,basefont,big,del,em,font,i,s,small,span,strike,strong,sub,sup,u"),Sb=F("img,table,input,textarea,button"),Oa=F("pre,style,script"),Ka=F("html,head,body,td,tr,table,ol,ul,li");F("colgroup,dd,dt,li,options,p,td,tfoot,th,thead,tr");var Lb=F("checked,compact,declare,defer,disabled,ismap,multiple,nohref,noresize,noshade,nowrap,readonly,selected"),Gb=F("input,button,textarea,select");l.basePath=function(){for(var a=
document.getElementsByTagName("script"),b,c=0,d=a.length;c<d;c++)if(b=a[c].src||"",/kindeditor[\w\-\.]*\.js/.test(b))return b.substring(0,b.lastIndexOf("/")+1);return""}();l.options={designMode:!0,fullscreenMode:!1,filterMode:!1,wellFormatMode:!0,shadowMode:!0,loadStyleMode:!0,basePath:l.basePath,themesPath:l.basePath+"themes/",langPath:l.basePath+"lang/",pluginsPath:l.basePath+"plugins/",themeType:"default",langType:"zh_CN",urlType:"",newlineTag:"p",resizeType:2,syncType:"form",pasteType:2,dialogAlignType:"page",
useContextmenu:!0,bodyClass:"ke-content",indentChar:"\t",cssPath:"",cssData:"",minWidth:650,minHeight:100,minChangeSize:5,items:"source | undo redo | preview print template cut copy paste plainpaste wordpaste | justifyleft justifycenter justifyright justifyfull insertorderedlist insertunorderedlist indent outdent subscript superscript clearhtml quickformat selectall / formatblock fontname fontsize | forecolor hilitecolor bold italic underline strikethrough lineheight removeformat | image flash media insertfile table hr emoticons map code pagebreak anchor link unlink | about".split(" "),
noDisableItems:["source","fullscreen"],colorTable:["#E53333 #E56600 #FF9900 #64451D #DFC5A4 #FFE500".split(" "),"#009900 #006600 #99BB00 #B8D100 #60D978 #00D5FF".split(" "),"#337FE5 #003399 #4C33E5 #9933E5 #CC33E5 #EE33EE".split(" "),"#FFFFFF #CCCCCC #999999 #666666 #333333 #000000".split(" ")],fontSizeTable:"9px 10px 12px 14px 16px 18px 24px 32px".split(" "),htmlTags:{font:["color","size","face",".background-color"],span:".color .background-color .font-size .font-family .background .font-weight .font-style .text-decoration .vertical-align .line-height".split(" "),
div:"align .border .margin .padding .text-align .color .background-color .font-size .font-family .font-weight .background .font-style .text-decoration .vertical-align .margin-left".split(" "),table:"border cellspacing cellpadding width height align bordercolor .padding .margin .border bgcolor .text-align .color .background-color .font-size .font-family .font-weight .font-style .text-decoration .background .width .height .border-collapse".split(" "),"td,th":"align valign width height colspan rowspan bgcolor .text-align .color .background-color .font-size .font-family .font-weight .font-style .text-decoration .vertical-align .background .border".split(" "),
a:["href","target","name"],embed:"src width height type loop autostart quality .width .height align allowscriptaccess".split(" "),img:"src width height border alt title align .width .height .border".split(" "),"p,ol,ul,li,blockquote,h1,h2,h3,h4,h5,h6":"align .text-align .color .background-color .font-size .font-family .background .font-weight .font-style .text-decoration .vertical-align .text-indent .margin-left".split(" "),pre:["class"],hr:["class",".page-break-after"],"br,tbody,tr,strong,b,sub,sup,em,i,u,strike,s,del":[]},
layout:'<div class="container"><div class="toolbar"></div><div class="edit"></div><div class="statusbar"></div></div>'};var gb=!1,Hb=F("8,9,13,32,46,48..57,59,61,65..90,106,109..111,188,190..192,219..222"),S=F("33..40"),bb={};f(Hb,function(a,b){bb[a]=b});f(S,function(a,b){bb[a]=b});var Tb="altKey attrChange attrName bubbles button cancelable charCode clientX clientY ctrlKey currentTarget data detail eventPhase fromElement handler keyCode layerX layerY metaKey newValue offsetX offsetY originalTarget pageX pageY prevValue relatedNode relatedTarget screenX screenY shiftKey srcElement target toElement view wheelDelta which".split(" ");
K(ba,{init:function(a,c){var d=this,e=a.ownerDocument||a.document||a;d.event=c;f(Tb,function(a,b){d[b]=c[b]});d.target||(d.target=d.srcElement||e);3===d.target.nodeType&&(d.target=d.target.parentNode);!d.relatedTarget&&d.fromElement&&(d.relatedTarget=d.fromElement===d.target?d.toElement:d.fromElement);if(null==d.pageX&&null!=d.clientX){var g=e.documentElement,e=e.body;d.pageX=d.clientX+(g&&g.scrollLeft||e&&e.scrollLeft||0)-(g&&g.clientLeft||e&&e.clientLeft||0);d.pageY=d.clientY+(g&&g.scrollTop||e&&
e.scrollTop||0)-(g&&g.clientTop||e&&e.clientTop||0)}!d.which&&(d.charCode||0===d.charCode?d.charCode:d.keyCode)&&(d.which=d.charCode||d.keyCode);!d.metaKey&&d.ctrlKey&&(d.metaKey=d.ctrlKey);d.which||d.button===b||(d.which=d.button&1?1:d.button&2?3:d.button&4?2:0);switch(d.which){case 186:d.which=59;break;case 187:case 107:case 43:d.which=61;break;case 189:case 45:d.which=109;break;case 42:d.which=106;break;case 47:d.which=111;break;case 78:d.which=110}96<=d.which&&105>=d.which&&(d.which-=48)},preventDefault:function(){var a=
this.event;a.preventDefault&&a.preventDefault();a.returnValue=!1},stopPropagation:function(){var a=this.event;a.stopPropagation&&a.stopPropagation();a.cancelBubble=!0},stop:function(){this.preventDefault();this.stopPropagation()}});var qa="kindeditor_"+Ja,hb=0,N={};G&&a.attachEvent("onunload",function(){f(N,function(a,b){b.el&&t(b.el)})});l.ctrl=W;l.ready=function(c){function d(){g||(g=!0,c(KindEditor))}function e(){if(!g){try{document.documentElement.doScroll("left")}catch(a){setTimeout(e,100);return}d()}}
function f(){"complete"===document.readyState&&d()}var g=!1;document.addEventListener?n(document,"DOMContentLoaded",d):document.attachEvent&&(n(document,"readystatechange",f),document.documentElement.doScroll&&a.frameElement===b&&e());n(a,"load",d)};l.formatUrl=I;l.formatHtml=P;l.getCssList=s;l.getAttrList=J;l.mediaType=L;l.mediaAttrs=ja;l.mediaEmbed=U;l.mediaImg=pa;l.clearMsWord=aa;l.query=function(a,b){var c=Ba(a,b);return 0<c.length?c[0]:null};l.queryAll=Ba;K(Y,{init:function(a){for(var b=0,c=
a.length;b<c;b++)this[b]=a[b].constructor===Y?a[b][0]:a[b];this.length=a.length;this.doc=na(this[0]);this.name=Ma(this[0]);this.type=0<this.length?this[0].nodeType:null;this.win=ia(this[0]);this._data={}},each:function(a){for(var b=0;b<this.length&&!1!==a.call(this[b],b,this[b]);b++);return this},bind:function(a,b){this.each(function(){n(this,a,b)});return this},unbind:function(a,b){this.each(function(){t(this,a,b)});return this},fire:function(a){if(1>this.length)return this;q(this[0],a);return this},
hasAttr:function(a){return 1>this.length?!1:!!C(this[0],a)},attr:function(a,c){var d=this;if(a===b)return J(d.outer());if("object"===typeof a)return f(a,function(a,b){d.attr(a,b)}),d;if(c===b)return c=1>d.length?null:C(d[0],a),null===c?"":c;d.each(function(){La(this,a,c)});return d},removeAttr:function(a){this.each(function(){var b=a;G&&8>V&&"class"==b.toLowerCase()&&(b="className");La(this,b,"");this.removeAttribute(b)});return this},get:function(a){return 1>this.length?null:this[a||0]},hasClass:function(a){return 1>
this.length?!1:h(a,this[0].className," ")},addClass:function(a){this.each(function(){h(a,this.className," ")||(this.className=g(this.className+" "+a))});return this},removeClass:function(a){this.each(function(){h(a,this.className," ")&&(this.className=g(this.className.replace(RegExp("(^|\\s)"+a+"(\\s|$)")," ")))});return this},html:function(a){if(a===b)return 1>this.length||1!=this.type?"":P(this[0].innerHTML);this.each(function(){Jb(this,a)});return this},text:function(){return 1>this.length?"":
G?this[0].innerText:this[0].textContent},hasVal:function(){return 1>this.length?!1:!!Gb[Ma(this[0])]},val:function(a){return a===b?1>this.length?"":this.hasVal()?this[0].value:this.attr("value"):(this.each(function(){Gb[Ma(this)]?this.value=a:La(this,"value",a)}),this)},css:function(a,c){var d=this;if(a===b)return s(d.attr("style"));if("object"===typeof a)return f(a,function(a,b){d.css(a,b)}),d;if(c===b)return 1>d.length?"":d[0].style[w(a)]||Kb(d[0],a)||"";d.each(function(){this.style[w(a)]=c});return d},
width:function(a){return a===b?1>this.length?0:this[0].offsetWidth:this.css("width",k(a))},height:function(a){return a===b?1>this.length?0:this[0].offsetHeight:this.css("height",k(a))},opacity:function(a){this.each(function(){this.style.opacity===b?this.style.filter=1==a?"":"alpha(opacity="+100*a+")":this.style.opacity=1==a?"":a});return this},data:function(a,c){if(c===b)return this._data[a];this._data[a]=c;return this},pos:function(){var a=this[0],b=0,c=0;if(a)if(a.getBoundingClientRect)a=a.getBoundingClientRect(),
c=oa(this.doc),b=a.left+c.x,c=a.top+c.y;else for(;a;)b+=a.offsetLeft,c+=a.offsetTop,a=a.offsetParent;return{x:ga(b),y:ga(c)}},clone:function(a){return 1>this.length?new Y([]):new Y([this[0].cloneNode(a)])},append:function(a){this.each(function(){this.appendChild&&this.appendChild(l(a)[0])});return this},appendTo:function(a){this.each(function(){l(a)[0].appendChild(this)});return this},before:function(a){this.each(function(){this.parentNode.insertBefore(l(a)[0],this)});return this},after:function(a){this.each(function(){this.nextSibling?
this.parentNode.insertBefore(l(a)[0],this.nextSibling):this.parentNode.appendChild(l(a)[0])});return this},replaceWith:function(a){var b=[];this.each(function(c,d){t(d);var e=l(a)[0];d.parentNode.replaceChild(e,d);b.push(e)});return l(b)},empty:function(){this.each(function(a,b){for(var c=b.firstChild;c&&b.parentNode;){var d=c.nextSibling;c.parentNode.removeChild(c);c=d}});return this},remove:function(a){var b=this;b.each(function(c,d){if(d.parentNode){t(d);if(a)for(var e=d.firstChild;e;){var f=e.nextSibling;
d.parentNode.insertBefore(e,d);e=f}d.parentNode.removeChild(d);delete b[c]}});b.length=0;b._data={};return b},show:function(a){return this.css("display",a===b?"block":a)},hide:function(){return this.css("display","none")},outer:function(){if(1>this.length)return"";var a=this.doc.createElement("div");a.appendChild(this[0].cloneNode(!0));return P(a.innerHTML)},isSingle:function(){return!!ib[this.name]},isInline:function(){return!!jb[this.name]},isBlock:function(){return!!kb[this.name]},isStyle:function(){return!!Fb[this.name]},
isControl:function(){return!!Sb[this.name]},contains:function(a){return 1>this.length?!1:ka(this[0],l(a)[0])},parent:function(){if(1>this.length)return null;var a=this[0].parentNode;return a?new Y([a]):null},children:function(){if(1>this.length)return[];for(var a=[],b=this[0].firstChild;b;)3==b.nodeType&&""===g(b.nodeValue)||a.push(new Y([b])),b=b.nextSibling;return a},first:function(){var a=this.children();return 0<a.length?a[0]:null},last:function(){var a=this.children();return 0<a.length?a[a.length-
1]:null},index:function(){if(1>this.length)return-1;for(var a=-1,b=this[0];b;)a++,b=b.previousSibling;return a},prev:function(){if(1>this.length)return null;var a=this[0].previousSibling;return a?new Y([a]):null},next:function(){if(1>this.length)return null;var a=this[0].nextSibling;return a?new Y([a]):null},scan:function(a,c){function d(b){for(b=c?b.firstChild:b.lastChild;b;){var e=c?b.nextSibling:b.previousSibling;if(!1===a(b)||!1===d(b))return!1;b=e}}if(!(1>this.length))return c=c===b?!0:c,d(this[0]),
this}});f("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){Y.prototype[b]=function(a){return a?this.bind(b,a):this.fire(b)}});S=l;l=function(a,d){function e(a){a[0]||(a=[]);return new Y(a)}if(a!==b&&null!==a){if("string"===typeof a){d&&(d=l(d)[0]);var f=a.length;"@"===a.charAt(0)&&(a=a.substr(1));if(a.length!==f||/<.+>/.test(a)){var f=
(d?d.ownerDocument||d:document).createElement("div"),g=[];f.innerHTML='<img id="__kindeditor_temp_tag__" width="0" height="0" style="display:none;" />'+a;for(var h=0,k=f.childNodes.length;h<k;h++){var m=f.childNodes[h];"__kindeditor_temp_tag__"!=m.id&&g.push(m)}return e(g)}return e(Ba(a,d))}return a&&a.constructor===Y?a:c(a)?e(a):e(O(arguments))}};f(S,function(a,b){l[a]=b});a.KindEditor=l;var ya=0,xa=1,ra=2,za=3,Ib=0;K(ea,{init:function(a){this.startContainer=a;this.startOffset=0;this.endContainer=
a;this.endOffset=0;this.collapsed=!0;this.doc=a},commonAncestor:function(){function a(b){for(var c=[];b;)c.push(b),b=b.parentNode;return c}for(var b=a(this.startContainer),c=a(this.endContainer),d=0,e=b.length,f=c.length,g,h;++d&&(g=b[e-d],h=c[f-d],g&&h&&g===h););return b[e-d+1]},setStart:function(a,b){var c=this.doc;this.startContainer=a;this.startOffset=b;this.endContainer===c&&(this.endContainer=a,this.endOffset=b);return cb(this)},setEnd:function(a,b){var c=this.doc;this.endContainer=a;this.endOffset=
b;this.startContainer===c&&(this.startContainer=a,this.startOffset=b);return cb(this)},setStartBefore:function(a){return this.setStart(a.parentNode||this.doc,l(a).index())},setStartAfter:function(a){return this.setStart(a.parentNode||this.doc,l(a).index()+1)},setEndBefore:function(a){return this.setEnd(a.parentNode||this.doc,l(a).index())},setEndAfter:function(a){return this.setEnd(a.parentNode||this.doc,l(a).index()+1)},selectNode:function(a){return this.setStartBefore(a).setEndAfter(a)},selectNodeContents:function(a){var b=
l(a);if(3==b.type||b.isSingle())return this.selectNode(a);b=b.children();return 0<b.length?this.setStartBefore(b[0][0]).setEndAfter(b[b.length-1][0]):this.setStart(a,0).setEnd(a,0)},collapse:function(a){return a?this.setEnd(this.startContainer,this.startOffset):this.setStart(this.endContainer,this.endOffset)},compareBoundaryPoints:function(a,b){var c=this.get(),d=b.get();if(G){var e={};e[ya]="StartToStart";e[xa]="EndToStart";e[ra]="EndToEnd";e[za]="StartToEnd";c=c.compareEndPoints(e[a],d);if(0!==
c)return c;var f,g,h,k;if(a===ya||a===za)f=this.startContainer,h=this.startOffset;if(a===xa||a===ra)f=this.endContainer,h=this.endOffset;if(a===ya||a===xa)g=b.startContainer,k=b.startOffset;if(a===ra||a===za)g=b.endContainer,k=b.endOffset;if(f===g)return f=h-k,0<f?1:0>f?-1:0;for(c=g;c&&c.parentNode!==f;)c=c.parentNode;if(c)return l(c).index()>=h?-1:1;for(c=f;c&&c.parentNode!==g;)c=c.parentNode;if(c)return l(c).index()>=k?1:-1;if((c=l(g).next())&&c.contains(f))return 1;if((c=l(f).next())&&c.contains(g))return-1}else return c.compareBoundaryPoints(a,
d)},cloneRange:function(){return(new ea(this.doc)).setStart(this.startContainer,this.startOffset).setEnd(this.endContainer,this.endOffset)},toString:function(){var a=this.get();return(G?a.text:a.toString()).replace(/\r\n|\n|\r/g,"")},cloneContents:function(){return Na(this,!0,!1)},deleteContents:function(){return Na(this,!1,!0)},extractContents:function(){return Na(this,!0,!0)},insertNode:function(a){var b=this.startContainer,c=this.startOffset,d=this.endContainer,e=this.endOffset,f,g,h,k=1;"#document-fragment"===
a.nodeName.toLowerCase()&&(f=a.firstChild,g=a.lastChild,k=a.childNodes.length);1==b.nodeType?(h=b.childNodes[c])?(b.insertBefore(a,h),b===d&&(e+=k)):b.appendChild(a):3==b.nodeType&&(0===c?(b.parentNode.insertBefore(a,b),b.parentNode===d&&(e+=k)):c>=b.nodeValue.length?b.nextSibling?b.parentNode.insertBefore(a,b.nextSibling):b.parentNode.appendChild(a):(h=0<c?b.splitText(c):b,b.parentNode.insertBefore(a,h),b===d&&(d=h,e-=c)));f?this.setStartBefore(f).setEndAfter(g):this.selectNode(a);return 1<=this.compareBoundaryPoints(ra,
this.cloneRange().setEnd(d,e))?this:this.setEnd(d,e)},surroundContents:function(a){a.appendChild(this.extractContents());return this.insertNode(a).selectNode(a)},isControl:function(){var a=this.startContainer,b=this.startOffset,c=this.endContainer,d=this.endOffset;return 1==a.nodeType&&a===c&&b+1===d&&l(a.childNodes[b]).isControl()},get:function(a){var b=this.doc;if(!G){b=b.createRange();try{b.setStart(this.startContainer,this.startOffset),b.setEnd(this.endContainer,this.endOffset)}catch(c){}return b}if(a&&
this.isControl())return b=b.body.createControlRange(),b.addElement(this.startContainer.childNodes[this.startOffset]),b;a=this.cloneRange().down();b=b.body.createTextRange();b.setEndPoint("StartToStart",eb(a.startContainer,a.startOffset));b.setEndPoint("EndToStart",eb(a.endContainer,a.endOffset));return b},html:function(){return l(this.cloneContents()).outer()},down:function(){function a(c,d,e){if(1==c.nodeType&&(c=l(c).children(),0!==c.length)){var f,u,g,h;0<d&&(f=c[d-1]);d<c.length&&(u=c[d]);f&&
3==f.type&&(g=f[0],h=g.nodeValue.length);u&&3==u.type&&(g=u[0],h=0);g&&(e?b.setStart(g,h):b.setEnd(g,h))}}var b=this;a(b.startContainer,b.startOffset,!0);a(b.endContainer,b.endOffset,!1);return b},up:function(){function a(c,d,e){3==c.nodeType&&(0===d?e?b.setStartBefore(c):b.setEndBefore(c):d==c.nodeValue.length&&(e?b.setStartAfter(c):b.setEndAfter(c)))}var b=this;a(b.startContainer,b.startOffset,!0);a(b.endContainer,b.endOffset,!1);return b},enlarge:function(a){function b(d,e,f){d=l(d);if(!(3==d.type||
Ka[d.name]||!a&&d.isBlock()))if(0===e){for(;!d.prev();){e=d.parent();if(!e||Ka[e.name]||!a&&e.isBlock())break;d=e}f?c.setStartBefore(d[0]):c.setEndBefore(d[0])}else if(e==d.children().length){for(;!d.next();){e=d.parent();if(!e||Ka[e.name]||!a&&e.isBlock())break;d=e}f?c.setStartAfter(d[0]):c.setEndAfter(d[0])}}var c=this;c.up();b(c.startContainer,c.startOffset,!0);b(c.endContainer,c.endOffset,!1);return c},shrink:function(){for(var a,b=this.collapsed;1==this.startContainer.nodeType&&(a=this.startContainer.childNodes[this.startOffset])&&
1==a.nodeType&&!l(a).isSingle();)this.setStart(a,0);if(b)return this.collapse(b);for(;1==this.endContainer.nodeType&&0<this.endOffset&&(a=this.endContainer.childNodes[this.endOffset-1])&&1==a.nodeType&&!l(a).isSingle();)this.setEnd(a,a.childNodes.length);return this},createBookmark:function(a){var b,c=l('<span style="display:none;"></span>',this.doc)[0];c.id="__kindeditor_bookmark_start_"+Ib++ +"__";this.collapsed||(b=c.cloneNode(!0),b.id="__kindeditor_bookmark_end_"+Ib++ +"__");b&&this.cloneRange().collapse(!1).insertNode(b).setEndBefore(b);
this.insertNode(c).setStartAfter(c);return{start:a?"#"+c.id:c,end:b?a?"#"+b.id:b:null}},moveToBookmark:function(a){var b=this.doc,c=l(a.start,b);a=a.end?l(a.end,b):null;if(!c||1>c.length)return this;this.setStartBefore(c[0]);c.remove();a&&0<a.length?(this.setEndBefore(a[0]),a.remove()):this.collapse(!0);return this},dump:function(){console.log("--------------------");console.log(3==this.startContainer.nodeType?this.startContainer.nodeValue:this.startContainer,this.startOffset);console.log(3==this.endContainer.nodeType?
this.endContainer.nodeValue:this.endContainer,this.endOffset)}});l.range=Qa;l.START_TO_START=ya;l.START_TO_END=xa;l.END_TO_END=ra;l.END_TO_START=za;K(Ca,{init:function(a){var b=a.doc;this.doc=b;this.win=ia(b);this.sel=Ra(b);this.range=a},selection:function(a){var b=this.doc,c;c=Ra(b);var d;try{d=0<c.rangeCount?c.getRangeAt(0):c.createRange()}catch(e){}c=!G||d&&(d.item||d.parentElement().ownerDocument===b)?d:null;this.sel=Ra(b);if(c)return this.range=Qa(c),"html"==l(this.range.startContainer).name&&
this.range.selectNodeContents(b.body).collapse(!1),this;a&&this.range.selectNodeContents(b.body).collapse(!1);return this},select:function(a){a=B(a,!0);var b=this.sel,c=this.range.cloneRange().shrink(),d=c.startContainer,e=c.startOffset,f=na(d),g=this.win,h,k=!1;if(a&&1==d.nodeType&&c.collapsed){if(G){b=l("<span>&nbsp;</span>",f);c.insertNode(b[0]);h=f.body.createTextRange();try{h.moveToElementText(b[0])}catch(m){}h.collapse(!1);h.select();b.remove();g.focus();return this}va&&(a=d.childNodes,l(d).isInline()||
0<e&&l(a[e-1]).isInline()||a[e]&&l(a[e]).isInline())&&(c.insertNode(f.createTextNode("\u200b")),k=!0)}if(G)try{h=c.get(!0),h.select()}catch(n){}else k&&c.collapse(!1),h=c.get(!0),b.removeAllRanges(),b.addRange(h);g.focus();return this},wrap:function(a){var b=this.range,c;c=l(a,this.doc);if(b.collapsed)return b.shrink(),b.insertNode(c[0]).selectNodeContents(c[0]),this;if(c.isBlock()){for(var d=a=c.clone(!0);d.first();)d=d.first();d.append(b.extractContents());b.insertNode(a[0]).selectNode(a[0]);return this}b.enlarge();
var e=b.createBookmark();a=b.commonAncestor();var f=!1;l(a).scan(function(a){if(!f&&a==e.start)f=!0;else if(f){if(a==e.end)return!1;var b=l(a);if(!qb(b)&&3==b.type&&0<g(a.nodeValue).length){for(var d;(d=b.parent())&&d.isStyle()&&1==d.children().length;)b=d;d=c;d=d.clone(!0);if(3==b.type)Ua(d).append(b.clone(!1)),b.replaceWith(d);else{a=b;for(var u;(u=b.first())&&1==u.children().length;)b=u;u=b.first();for(b=b.doc.createDocumentFragment();u;)b.appendChild(u[0]),u=u.next();u=a.clone(!0);for(var A=Ua(u),
h=u,k=!1;d;){for(;h;)h.name===d.name&&(Mb(h,d.attr(),d.css()),k=!0),h=h.first();k||A.append(d.clone(!1));k=!1;d=d.first()}d=u;b.firstChild&&Ua(d).append(b);a.replaceWith(d)}}}});b.moveToBookmark(e);return this},split:function(a,b){for(var c=this.range,d=c.doc,e=c.cloneRange().collapse(a),f=e.startContainer,g=e.startOffset,h=3==f.nodeType?f.parentNode:f,k=!1,m;h&&h.parentNode;){m=l(h);if(b){if(!m.isStyle())break;if(!Sa(m,b))break}else if(Ka[m.name])break;k=!0;h=h.parentNode}k&&(d=d.createElement("span"),
c.cloneRange().collapse(!a).insertNode(d),a?e.setStartBefore(h.firstChild).setEnd(f,g):e.setStart(f,g).setEndAfter(h.lastChild),f=e.extractContents(),g=f.firstChild,k=f.lastChild,a?(e.insertNode(f),c.setStartAfter(k).setEndBefore(d)):(h.appendChild(f),c.setStartBefore(d).setEndBefore(g)),e=d.parentNode,e==c.endContainer&&(h=l(d).prev(),f=l(d).next(),h&&f&&3==h.type&&3==f.type?c.setEnd(h[0],h[0].nodeValue.length):a||c.setEnd(c.endContainer,c.endOffset-1)),e.removeChild(d));return this},remove:function(a){var b=
this.doc,c=this.range;c.enlarge();if(0===c.startOffset){for(var d=l(c.startContainer),e;(e=d.parent())&&e.isStyle()&&1==e.children().length;)d=e;c.setStart(d[0],0);d=l(c.startContainer);d.isBlock()&&Ta(d,a);(d=d.parent())&&d.isBlock()&&Ta(d,a)}if(c.collapsed)return this.split(!0,a),b=c.startContainer,d=c.startOffset,0<d&&(e=l(b.childNodes[d-1]))&&sa(e)&&(e.remove(),c.setStart(b,d-1)),(d=l(b.childNodes[d]))&&sa(d)&&d.remove(),sa(b)&&(c.startBefore(b),b.remove()),c.collapse(!0),this;this.split(!0,a);
this.split(!1,a);var g=b.createElement("span"),h=b.createElement("span");c.cloneRange().collapse(!1).insertNode(h);c.cloneRange().collapse(!0).insertNode(g);var k=[],m=!1;l(c.commonAncestor()).scan(function(a){if(m||a!=g){if(a==h)return!1;m&&k.push(a)}else m=!0});l(g).remove();l(h).remove();b=c.startContainer;d=c.startOffset;e=c.endContainer;var n=c.endOffset;if(0<d){var r=l(b.childNodes[d-1]);r&&sa(r)&&(r.remove(),c.setStart(b,d-1),b==e&&c.setEnd(e,n-1));(d=l(b.childNodes[d]))&&sa(d)&&(d.remove(),
b==e&&c.setEnd(e,n-1))}(b=l(e.childNodes[c.endOffset]))&&sa(b)&&b.remove();b=c.createBookmark(!0);f(k,function(b,c){Ta(l(c),a)});c.moveToBookmark(b);return this},commonNode:function(a){function b(c){for(var d=c;c;){if(Sa(l(c),a))return l(c);c=c.parentNode}for(;d&&(d=d.lastChild);)if(Sa(l(d),a))return l(d);return null}var c=this.range,d=c.endContainer,c=c.endOffset,e=3==d.nodeType||0===c?d:d.childNodes[c-1],f=b(e);if(f)return f;if(1==e.nodeType||3==d.nodeType&&0===c)if(d=l(e).prev())return b(d);return null},
commonAncestor:function(a){function b(c){for(;c;){if(1==c.nodeType&&c.tagName.toLowerCase()===a)return c;c=c.parentNode}return null}var c=this.range,d=c.startContainer,e=c.startOffset,f=c.endContainer,c=c.endOffset,f=3==f.nodeType||0===c?f:f.childNodes[c-1],d=b(3==d.nodeType||0===e?d:d.childNodes[e-1]),e=b(f);return d&&e&&d===e?l(d):null},state:function(a){var b=this.doc,c=!1;try{c=b.queryCommandState(a)}catch(d){}return c},val:function(a){var b=this.doc;a=a.toLowerCase();var c="";return"fontfamily"===
a||"fontname"===a?(c=mb(b,"fontname"),c=c.replace(/['"]/g,""),c.toLowerCase()):"formatblock"===a?(c=mb(b,a),""===c&&(a=this.commonNode({"h1,h2,h3,h4,h5,h6,p,div,pre,address":"*"}))&&(c=a.name),"Normal"===c&&(c="p"),c.toLowerCase()):"fontsize"===a?((a=this.commonNode({"*":".font-size"}))&&(c=a.css("font-size")),c.toLowerCase()):"forecolor"===a?((a=this.commonNode({"*":".color"}))&&(c=a.css("color")),c=E(c),""===c&&(c="default"),c.toLowerCase()):"hilitecolor"===a?((a=this.commonNode({"*":".background-color"}))&&
(c=a.css("background-color")),c=E(c),""===c&&(c="default"),c.toLowerCase()):c},toggle:function(a,b){this.commonNode(b)?this.remove(b):this.wrap(a);return this.select()},bold:function(){return this.toggle("<strong></strong>",{span:".font-weight=bold",strong:"*",b:"*"})},italic:function(){return this.toggle("<em></em>",{span:".font-style=italic",em:"*",i:"*"})},underline:function(){return this.toggle("<u></u>",{span:".text-decoration=underline",u:"*"})},strikethrough:function(){return this.toggle("<s></s>",
{span:".text-decoration=line-through",s:"*"})},forecolor:function(a){return this.toggle('<span style="color:'+a+';"></span>',{span:".color="+a,font:"color"})},hilitecolor:function(a){return this.toggle('<span style="background-color:'+a+';"></span>',{span:".background-color="+a})},fontsize:function(a){return this.toggle('<span style="font-size:'+a+';"></span>',{span:".font-size="+a,font:"size"})},fontname:function(a){return this.fontfamily(a)},fontfamily:function(a){return this.toggle('<span style="font-family:'+
a+';"></span>',{span:".font-family="+a,font:"face"})},removeformat:function(){var a={"*":".font-weight,.font-style,.text-decoration,.color,.background-color,.font-size,.font-family,.text-indent"};f(Fb,function(b){a[b]="*"});this.remove(a);return this.select()},inserthtml:function(a){function b(a,c){c='<img id="__kindeditor_temp_tag__" width="0" height="0" style="display:none;" />'+c;var e=a.get();e.item?e.item(0).outerHTML=c:e.pasteHTML(c);var f=a.doc.getElementById("__kindeditor_temp_tag__");f.parentNode.removeChild(f);
e=lb(e);a.setEnd(e.endContainer,e.endOffset);a.collapse(!1);d.select(!1)}function c(a,b){var e=a.doc,f=e.createDocumentFragment();l("@"+b,e).each(function(){f.appendChild(this)});a.deleteContents();a.insertNode(f);a.collapse(!1);d.select(!1)}var d=this,e=d.range;if(""===a||qb(l(e.startContainer)))return d;if(G){try{b(e,a)}catch(f){c(e,a)}return d}c(e,a);return d},hr:function(){return this.inserthtml("<hr />")},print:function(){this.win.print();return this},insertimage:function(a,b,c,d,e,f){b=B(b,
"");B(e,0);a='<img src="'+r(a)+'" data-ke-src="'+r(a)+'" ';c&&(a+='width="'+r(c)+'" ');d&&(a+='height="'+r(d)+'" ');b&&(a+='title="'+r(b)+'" ');f&&(a+='align="'+r(f)+'" ');a+='alt="'+r(b)+'" ';return this.inserthtml(a+"/>")},createlink:function(a,b){var c=this.doc,d=this.range;this.select();var e=this.commonNode({a:"*"});e&&!d.isControl()&&(d.selectNode(e.get()),this.select());e='<a href="'+r(a)+'" data-ke-src="'+r(a)+'" ';b&&(e+=' target="'+r(b)+'"');if(d.collapsed)return e+=">"+r(a)+"</a>",this.inserthtml(e);
if(d.isControl()){var f=l(d.startContainer.childNodes[d.startOffset]);f.after(l(e+"></a>",c));f.next().append(f);d.selectNode(f[0]);return this.select()}fa(c,"createlink","__kindeditor_temp_url__");l('a[href="__kindeditor_temp_url__"]',c).each(function(){l(this).attr("href",a).attr("data-ke-src",a);b?l(this).attr("target",b):l(this).removeAttr("target")});return this},unlink:function(){var a=this.doc,b=this.range;this.select();if(b.collapsed){var c=this.commonNode({a:"*"});c&&(b.selectNode(c.get()),
this.select());fa(a,"unlink",null);va&&"img"===l(b.startContainer).name&&(a=l(b.startContainer).parent(),"a"===a.name&&a.remove(!0))}else fa(a,"unlink",null);return this}});f("formatblock selectall justifyleft justifycenter justifyright justifyfull insertorderedlist insertunorderedlist indent outdent subscript superscript".split(" "),function(a,b){Ca.prototype[b]=function(a){this.select();fa(this.doc,b,a);(!G||0<=e(b,["formatblock","selectall","insertorderedlist","insertunorderedlist"]))&&this.selection();
return this}});f(["cut","copy","paste"],function(a,b){Ca.prototype[b]=function(){if(!this.doc.queryCommandSupported(b))throw"not supported";this.select();fa(this.doc,b,null);return this}});l.cmd=rb;K(ha,{init:function(a){var c=this;c.name=a.name||"";c.doc=a.doc||document;c.win=ia(c.doc);c.x=k(a.x);c.y=k(a.y);c.z=a.z;c.width=k(a.width);c.height=k(a.height);c.div=l('<div style="display:block;"></div>');c.options=a;c._alignEl=a.alignEl;c.width&&c.div.css("width",c.width);c.height&&c.div.css("height",
c.height);c.z&&c.div.css({position:"absolute",left:c.x,top:c.y,"z-index":c.z});c.z&&(c.x===b||c.y===b)&&c.autoPos(c.width,c.height);a.cls&&c.div.addClass(a.cls);a.shadowMode&&c.div.addClass("ke-shadow");a.css&&c.div.css(a.css);a.src?l(a.src).replaceWith(c.div):l(c.doc.body).append(c.div);a.html&&c.div.html(a.html);if(a.autoScroll)if(G&&7>V||la){var d=oa();l(c.win).bind("scroll",function(){var a=oa(),b=a.x-d.x,a=a.y-d.y;c.pos(m(c.x)+b,m(c.y)+a,!1)})}else c.div.css("position","fixed")},pos:function(a,
b,c){c=B(c,!0);null!==a&&(a=0>a?0:k(a),this.div.css("left",a),c)&&(this.x=a);null!==b&&(b=0>b?0:k(b),this.div.css("top",b),c)&&(this.y=b);return this},autoPos:function(a,b){var c=m(a)||0,d=m(b)||0,e=oa();if(this._alignEl){var f=l(this._alignEl),g=f.pos(),c=ga(f[0].clientWidth/2-c/2),d=ga(f[0].clientHeight/2-d/2);x=0>c?g.x:g.x+c;y=0>d?g.y:g.y+d}else g=X(this.doc),x=ga(e.x+(g.clientWidth-c)/2),y=ga(e.y+(g.clientHeight-d)/2);G&&7>V||la||(x-=e.x,y-=e.y);return this.pos(x,y)},remove:function(){var a=this;
G&&7>V&&l(a.win).unbind("scroll");a.div.remove();f(a,function(b){a[b]=null});return this},show:function(){this.div.show();return this},hide:function(){this.div.hide();return this},draggable:function(a){var b=this;a=a||{};a.moveEl=b.div;a.moveFn=function(a,c,d,e,f,g){0>(a+=f)&&(a=0);0>(c+=g)&&(c=0);b.pos(a,c)};Va(a);return b}});l.WidgetClass=ha;l.widget=Xa;K(Da,ha,{init:function(a){function b(){var A=Wa(c.iframe);A.open();h&&(A.domain=document.domain);A.write(Nb(d,e,f,g));A.close();c.win=c.iframe[0].contentWindow;
c.doc=A;var k=rb(A);c.afterChange(function(){k.selection()});va&&l(A).click(function(a){"img"===l(a.target).name&&(k.selection(!0),k.range.selectNode(a.target),k.select())});G&&l(A).keydown(function(a){if(8==a.which){k.selection();var b=k.range;b.isControl()&&(b.collapse(!0),l(b.startContainer.childNodes[b.startOffset]).remove(),a.preventDefault())}});c.cmd=k;c.html(ta(c.srcElement));G?(A.body.disabled=!0,A.body.contentEditable=!0,A.body.removeAttribute("disabled")):A.designMode="on";a.afterCreate&&
a.afterCreate.call(c)}var c=this;Da.parent.init.call(c,a);c.srcElement=l(a.srcElement);c.div.addClass("ke-edit");c.designMode=B(a.designMode,!0);c.beforeGetHtml=a.beforeGetHtml;c.beforeSetHtml=a.beforeSetHtml;c.afterSetHtml=a.afterSetHtml;var d=B(a.themesPath,""),e=a.bodyClass,f=a.cssPath,g=a.cssData,h=location.host.replace(/:\d+/,"")!==document.domain,k="document.open();"+(h?'document.domain="'+document.domain+'";':"")+"document.close();",k=G?' src="javascript:void(function(){'+encodeURIComponent(k)+
'}())"':"";c.iframe=l('<iframe class="ke-edit-iframe" hidefocus="true" frameborder="0"'+k+"></iframe>").css("width","100%");c.textarea=l('<textarea class="ke-edit-textarea" hidefocus="true"></textarea>').css("width","100%");c.width&&c.setWidth(c.width);c.height&&c.setHeight(c.height);c.designMode?c.textarea.hide():c.iframe.hide();h&&c.iframe.bind("load",function(){c.iframe.unbind("load");G?b():setTimeout(b,0)});c.div.append(c.iframe);c.div.append(c.textarea);c.srcElement.hide();!h&&b()},setWidth:function(a){this.div.css("width",
k(a));return this},setHeight:function(a){a=k(a);this.div.css("height",a);this.iframe.css("height",a);if(G&&8>V||la)a=k(m(a)-2);this.textarea.css("height",a);return this},remove:function(){var a=this.doc;l(a.body).unbind();l(a).unbind();l(this.win).unbind();ta(this.srcElement,this.html());this.srcElement.show();a.write("");this.iframe.unbind();this.textarea.unbind();Da.parent.remove.call(this)},html:function(a,c){var d=this.doc;if(this.designMode){d=d.body;if(a===b)return a=c?"<!doctype html><html>"+
d.parentNode.innerHTML+"</html>":d.innerHTML,this.beforeGetHtml&&(a=this.beforeGetHtml(a)),Aa&&"<br />"==a&&(a=""),a;this.beforeSetHtml&&(a=this.beforeSetHtml(a));l(d).html(a);this.afterSetHtml&&this.afterSetHtml();return this}if(a===b)return this.textarea.val();this.textarea.val(a);return this},design:function(a){(a===b?!this.designMode:a)?this.designMode||(a=this.html(),this.designMode=!0,this.html(a),this.textarea.hide(),this.iframe.show()):this.designMode&&(a=this.html(),this.designMode=!1,this.html(a),
this.iframe.hide(),this.textarea.show());return this.focus()},focus:function(){this.designMode?this.win.focus():this.textarea[0].focus();return this},blur:function(){if(G){var a=l('<input type="text" style="float:left;width:0;height:0;padding:0;margin:0;border:0;" value="" />',this.div);this.div.append(a);a[0].focus();a.remove()}else this.designMode?this.win.blur():this.textarea[0].blur();return this},afterChange:function(a){function b(c){setTimeout(function(){a(c)},1)}var c=this.doc,d=c.body;l(c).keyup(function(b){!b.ctrlKey&&
!b.altKey&&bb[b.which]&&a(b)});l(c).mouseup(a).contextmenu(a);l(this.win).blur(a);l(d).bind("paste",b);l(d).bind("cut",b);return this}});l.edit=sb;l.iframeDoc=Wa;K(Ya,ha,{init:function(a){function b(a){a=l(a);if(a.hasClass("ke-outline"))return a;if(a.hasClass("ke-toolbar-icon"))return a.parent()}function c(a,d){var e=b(a.target);if(e&&!e.hasClass("ke-disabled")&&!e.hasClass("ke-selected"))e[d]("ke-on")}var d=this;Ya.parent.init.call(d,a);d.disableMode=B(a.disableMode,!1);d.noDisableItemMap=F(B(a.noDisableItems,
[]));d._itemMap={};d.div.addClass("ke-toolbar").bind("contextmenu,mousedown,mousemove",function(a){a.preventDefault()}).attr("unselectable","on");d.div.mouseover(function(a){c(a,"addClass")}).mouseout(function(a){c(a,"removeClass")}).click(function(a){var c=b(a.target);c&&!c.hasClass("ke-disabled")&&d.options.click.call(this,a,c.attr("data-name"))})},get:function(a){return this._itemMap[a]?this._itemMap[a]:this._itemMap[a]=l("span.ke-icon-"+a,this.div).parent()},select:function(a){tb.call(this,a,
function(a){a.addClass("ke-selected")});return self},unselect:function(a){tb.call(this,a,function(a){a.removeClass("ke-selected").removeClass("ke-on")});return self},enable:function(a){if(a=a.get?a:this.get(a))a.removeClass("ke-disabled"),a.opacity(1);return this},disable:function(a){if(a=a.get?a:this.get(a))a.removeClass("ke-selected").addClass("ke-disabled"),a.opacity(0.5);return this},disableAll:function(a,c){var d=this,e=d.noDisableItemMap;c&&(e=F(c));(a===b?!d.disableMode:a)?(l("span.ke-outline",
d.div).each(function(){var a=l(this),b=a[0].getAttribute("data-name",2);e[b]||d.disable(a)}),d.disableMode=!0):(l("span.ke-outline",d.div).each(function(){var a=l(this),b=a[0].getAttribute("data-name",2);e[b]||d.enable(a)}),d.disableMode=!1);return d}});l.toolbar=ub;K(Ea,ha,{init:function(a){a.z=a.z||811213;Ea.parent.init.call(this,a);this.centerLineMode=B(a.centerLineMode,!0);this.div.addClass("ke-menu").bind("click,mousedown",function(a){a.stopPropagation()}).attr("unselectable","on")},addItem:function(a){if("-"===
a.title)this.div.append(l('<div class="ke-menu-separator"></div>'));else{var b=l('<div class="ke-menu-item" unselectable="on"></div>'),c=l('<div class="ke-inline-block ke-menu-item-left"></div>'),d=l('<div class="ke-inline-block ke-menu-item-right"></div>'),e=k(a.height),f=B(a.iconClass,"");this.div.append(b);e&&(b.css("height",e),d.css("line-height",e));var g;this.centerLineMode&&(g=l('<div class="ke-inline-block ke-menu-item-center"></div>'),e&&g.css("height",e));b.mouseover(function(){l(this).addClass("ke-menu-item-on");
g&&g.addClass("ke-menu-item-center-on")}).mouseout(function(){l(this).removeClass("ke-menu-item-on");g&&g.removeClass("ke-menu-item-center-on")}).click(function(b){a.click.call(l(this));b.stopPropagation()}).append(c);g&&b.append(g);b.append(d);a.checked&&(f="ke-icon-checked");""!==f&&c.html('<span class="ke-inline-block ke-toolbar-icon ke-toolbar-icon-url '+f+'"></span>');d.html(a.title);return this}},remove:function(){this.options.beforeRemove&&this.options.beforeRemove.call(this);l(".ke-menu-item",
this.div[0]).unbind();Ea.parent.remove.call(this);return this}});l.menu=Za;K(Fa,ha,{init:function(a){a.z=a.z||811213;Fa.parent.init.call(this,a);var b=a.colors||["#E53333 #E56600 #FF9900 #64451D #DFC5A4 #FFE500".split(" "),"#009900 #006600 #99BB00 #B8D100 #60D978 #00D5FF".split(" "),"#337FE5 #003399 #4C33E5 #9933E5 #CC33E5 #EE33EE".split(" "),"#FFFFFF #CCCCCC #999999 #666666 #333333 #000000".split(" ")];this.selectedColor=(a.selectedColor||"").toLowerCase();this._cells=[];this.div.addClass("ke-colorpicker").bind("click,mousedown",
function(a){a.stopPropagation()}).attr("unselectable","on");a=this.doc.createElement("table");this.div.append(a);a.className="ke-colorpicker-table";a.cellPadding=0;a.cellSpacing=0;a.border=0;var c=a.insertRow(0),d=c.insertCell(0);d.colSpan=b[0].length;this._addAttr(d,"","ke-colorpicker-cell-top");for(var e=0;e<b.length;e++)for(var c=a.insertRow(e+1),f=0;f<b[e].length;f++)d=c.insertCell(f),this._addAttr(d,b[e][f],"ke-colorpicker-cell")},_addAttr:function(a,b,c){var d=this;a=l(a).addClass(c);d.selectedColor===
b.toLowerCase()&&a.addClass("ke-colorpicker-cell-selected");a.attr("title",b||d.options.noColor);a.mouseover(function(){l(this).addClass("ke-colorpicker-cell-on")});a.mouseout(function(){l(this).removeClass("ke-colorpicker-cell-on")});a.click(function(a){a.stop();d.options.click.call(l(this),b)});b?a.append(l('<div class="ke-colorpicker-cell-color" unselectable="on"></div>').css("background-color",b)):a.html(d.options.noColor);l(a).attr("unselectable","on");d._cells.push(a)},remove:function(){f(this._cells,
function(){this.unbind()});Fa.parent.remove.call(this);return this}});l.colorpicker=vb;K(wb,{init:function(a){var b=l(a.button),c=a.fieldName||"file",d=a.url||"",e=b.val(),f=b[0].className||"",g="kindeditor_upload_iframe_"+(new Date).getTime();a.afterError=a.afterError||function(a){alert(a)};c=['<div class="ke-inline-block '+f+'">','<iframe name="'+g+'" style="display:none;"></iframe>','<form class="ke-upload-area ke-form" method="post" enctype="multipart/form-data" target="'+g+'" action="'+d+'">',
'<span class="ke-button-common">','<input type="button" class="ke-button-common ke-button" value="'+e+'" />',"</span>",'<input type="file" class="ke-upload-file" name="'+c+'" tabindex="-1" />',"</form></div>"].join("");c=l(c,b.doc);b.hide();b.before(c);this.div=c;this.button=b;this.iframe=l("iframe",c);this.form=l("form",c);this.fileBox=l(".ke-upload-file",c).width(l(".ke-button-common").width());this.options=a},submit:function(){var a=this,b=a.iframe;b.bind("load",function(){b.unbind();var c=l.iframeDoc(b),
d=c.getElementsByTagName("pre")[0],e="",f,e=d?d.innerHTML:c.body.innerHTML;try{f=l.json(e)}catch(g){a.options.afterError.call(a,"<!doctype html><html>"+c.body.parentNode.innerHTML+"</html>")}f&&a.options.afterUpload.call(a,f)});a.form[0].submit();var c=document.createElement("form");a.fileBox.before(c);l(c).append(a.fileBox);c.reset();l(c).remove(!0);return a},remove:function(){this.fileBox&&this.fileBox.unbind();this.div.remove();this.button.show();return this}});l.uploadbutton=function(a){return new wb(a)};
K(Ga,ha,{init:function(a){var b=a.shadowMode;a.z=a.z||811213;a.shadowMode=!1;Ga.parent.init.call(this,a);var c=a.title,d=l(a.body,this.doc),e=a.previewBtn,g=a.yesBtn,h=a.noBtn,k=a.closeBtn,n=B(a.showMask,!0);this.div.addClass("ke-dialog").bind("click,mousedown",function(a){a.stopPropagation()});var r=l('<div class="ke-dialog-content"></div>').appendTo(this.div);G&&7>V?this.iframeMask=l('<iframe src="about:blank" class="ke-dialog-shadow"></iframe>').appendTo(this.div):b&&l('<div class="ke-dialog-shadow"></div>').appendTo(this.div);
b=l('<div class="ke-dialog-header"></div>');r.append(b);b.html(c);this.closeIcon=l('<span class="ke-dialog-icon-close" title="'+k.name+'"></span>').click(k.click);b.append(this.closeIcon);this.draggable({clickEl:b,beforeDrag:a.beforeDrag});a=l('<div class="ke-dialog-body"></div>');r.append(a);a.append(d);var p=l('<div class="ke-dialog-footer"></div>');(e||g||h)&&r.append(p);f([{btn:e,name:"preview"},{btn:g,name:"yes"},{btn:h,name:"no"}],function(){if(this.btn){var a=this.btn,a=a||{},b=a.name||"",
c=l('<span class="ke-button-common ke-button-outer" title="'+b+'"></span>'),b=l('<input class="ke-button-common ke-button" type="button" value="'+b+'" />');a.click&&b.click(a.click);c.append(b);c.addClass("ke-dialog-"+this.name);p.append(c)}});this.height&&a.height(m(this.height)-b.height()-p.height());this.div.width(this.div.width());this.div.height(this.div.height());this.mask=null;n&&(d=X(this.doc),this.mask=Xa({x:0,y:0,z:this.z-1,cls:"ke-dialog-mask",width:Math.max(d.scrollWidth,d.clientWidth),
height:Math.max(d.scrollHeight,d.clientHeight)}));this.autoPos(this.div.width(),this.div.height());this.footerDiv=p;this.bodyDiv=a;this.headerDiv=b},setMaskIndex:function(a){this.mask.div.css("z-index",a)},showLoading:function(a){a=B(a,"");var b=this.bodyDiv;this.loading=l('<div class="ke-dialog-loading"><div class="ke-inline-block ke-dialog-loading-content" style="margin-top:'+Math.round(b.height()/3)+'px;">'+a+"</div></div>").width(b.width()).height(b.height()).css("top",this.headerDiv.height()+
"px");b.css("visibility","hidden").after(this.loading);return this},hideLoading:function(){this.loading&&this.loading.remove();this.bodyDiv.css("visibility","visible");return this},remove:function(){this.options.beforeRemove&&this.options.beforeRemove.call(this);this.mask&&this.mask.remove();this.iframeMask&&this.iframeMask.remove();this.closeIcon.unbind();l("input",this.div).unbind();this.footerDiv.unbind();this.bodyDiv.unbind();this.headerDiv.unbind();Ga.parent.remove.call(this);return this}});
l.dialog=xb;l.tabs=function(a){var b=Xa(a),c=b.remove,d=a.afterSelect;a=b.div;var e=[];a.addClass("ke-tabs").bind("contextmenu,mousedown,mousemove",function(a){a.preventDefault()});var g=l('<ul class="ke-tabs-ul ke-clearfix"></ul>');a.append(g);b.add=function(a){var b=l('<li class="ke-tabs-li">'+a.title+"</li>");b.data("tab",a);e.push(b);g.append(b)};b.selectedIndex=0;b.select=function(a){b.selectedIndex=a;f(e,function(c,d){d.unbind();c===a?(d.addClass("ke-tabs-li-selected"),l(d.data("tab").panel).show("")):
(d.removeClass("ke-tabs-li-selected").removeClass("ke-tabs-li-on").mouseover(function(){l(this).addClass("ke-tabs-li-on")}).mouseout(function(){l(this).removeClass("ke-tabs-li-on")}).click(function(){b.select(c)}),l(d.data("tab").panel).hide())});d&&d.call(b,a)};b.remove=function(){f(e,function(){this.remove()});g.remove();c.call(b)};return b};l.loadScript=$a;l.loadStyle=ab;l.ajax=function(b,c,d,e,h){d=d||"GET";h=h||"json";var k=a.XMLHttpRequest?new a.XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");
k.open(d,b,!0);k.onreadystatechange=function(){if(4==k.readyState&&200==k.status&&c){var a=g(k.responseText);"json"==h&&(a=v(a));c(a)}};if("POST"==d){var l=[];f(e,function(a,b){l.push(encodeURIComponent(a)+"="+encodeURIComponent(b))});try{k.setRequestHeader("Content-Type","application/x-www-form-urlencoded")}catch(m){}k.send(l.join("&"))}else k.send(null)};var ua={},ca={};Ia.prototype={lang:function(a){return Ab(a,this.langType)},loadPlugin:function(a,b){var c=this;if(ua[a]){if(c._calledPlugins[a])return b&&
b.call(c),c;ua[a].call(c,KindEditor);b&&b.call(c);c._calledPlugins[a]=!0;return c}if(c.isLoading)return c;c.isLoading=!0;$a(c.pluginsPath+a+"/"+a+".js?ver="+encodeURIComponent(l.DEBUG?Ja:"4.0.4 (2011-12-11)"),function(){c.isLoading=!1;ua[a]&&c.loadPlugin(a,b)});return c},handler:function(a,b){var c=this;c._handlers[a]||(c._handlers[a]=[]);if(d(b))return c._handlers[a].push(b),c;f(c._handlers[a],function(){b=this.call(c,b)});return b},clickToolbar:function(a,c){var d=this,e="clickToolbar"+a;if(c===
b){if(d._handlers[e])return d.handler(e);d.loadPlugin(a,function(){d.handler(e)});return d}return d.handler(e,c)},updateState:function(){var a=this;f("justifyleft justifycenter justifyright justifyfull insertorderedlist insertunorderedlist subscript superscript bold italic underline strikethrough".split(" "),function(b,c){a.cmd.state(c)?a.toolbar.select(c):a.toolbar.unselect(c)});return a},addContextmenu:function(a){this._contextmenus.push(a);return this},afterCreate:function(a){return this.handler("afterCreate",
a)},beforeRemove:function(a){return this.handler("beforeRemove",a)},beforeGetHtml:function(a){return this.handler("beforeGetHtml",a)},beforeSetHtml:function(a){return this.handler("beforeSetHtml",a)},afterSetHtml:function(a){return this.handler("afterSetHtml",a)},create:function(){function b(){0===p.height()?setTimeout(b,100):d.resize(f,g)}function c(a,b,e){e=B(e,!0);a&&a>=d.minWidth&&(d.resize(a,null),e)&&(d.width=k(a));b&&b>=d.minHeight&&(d.resize(null,b),e)&&(d.height=k(b))}var d=this,e=d.fullscreenMode;
if(d.isCreated)return d;e?X().style.overflow="hidden":X().style.overflow="";var f=e?X().clientWidth+"px":d.width,g=e?X().clientHeight+"px":d.height;if(G&&8>V||la)g=k(m(g)+2);var h=d.container=l(d.layout);e?l(document.body).append(h):d.srcElement.before(h);var n=l(".toolbar",h),r=l(".edit",h),p=d.statusbar=l(".statusbar",h);h.removeClass("container").addClass("ke-container ke-container-"+d.themeType).css("width",f);e?(h.css({position:"absolute",left:0,top:0,"z-index":811211}),Aa||(d._scrollPos=oa()),
a.scrollTo(0,0),l(document.body).css({height:"1px",overflow:"hidden"}),l(document.body.parentNode).css("overflow","hidden")):d._scrollPos&&(l(document.body).css({height:"",overflow:""}),l(document.body.parentNode).css("overflow",""),a.scrollTo(d._scrollPos.x,d._scrollPos.y));var q=[];l.each(d.items,function(a,b){"|"==b?q.push('<span class="ke-inline-block ke-separator"></span>'):"/"==b?q.push('<div class="ke-hr"></div>'):(q.push('<span class="ke-outline" data-name="'+b+'" title="'+d.lang(b)+'" unselectable="on">'),
q.push('<span class="ke-toolbar-icon ke-toolbar-icon-url ke-icon-'+b+'" unselectable="on"></span></span>'))});var n=d.toolbar=ub({src:n,html:q.join(""),noDisableItems:d.noDisableItems,click:function(a,b){a.stop();if(d.menu){var c=d.menu.name;d.hideMenu();if(c===b)return}d.clickToolbar(b)}}),s=m(g)-n.div.height(),t=d.edit=sb({height:0<s&&m(g)>d.minHeight?s:d.minHeight,src:r,srcElement:d.srcElement,designMode:d.designMode,themesPath:d.themesPath,bodyClass:d.bodyClass,cssPath:d.cssPath,cssData:d.cssData,
beforeGetHtml:function(a){a=d.beforeGetHtml(a);return P(a,d.filterMode?d.htmlTags:null,d.urlType,d.wellFormatMode,d.indentChar)},beforeSetHtml:function(a){a=P(a,d.filterMode?d.htmlTags:null,"",!1);return d.beforeSetHtml(a)},afterSetHtml:function(){d.afterSetHtml()},afterCreate:function(){d.edit=t=this;d.cmd=t.cmd;d._docMousedownFn=function(){d.menu&&d.hideMenu()};l(t.doc,document).mousedown(d._docMousedownFn);Ob.call(d);Pb.call(d);Qb.call(d);Rb.call(d);t.afterChange(function(){t.designMode&&(d.updateState(),
d.addBookmark(),d.options.afterChange&&d.options.afterChange.call(d))});t.textarea.keyup(function(a){!a.ctrlKey&&!a.altKey&&Hb[a.which]&&d.options.afterChange&&d.options.afterChange.call(d)});d.readonlyMode&&d.readonly();d.isCreated=!0;d.initContent=d.html();d.afterCreate();d.options.afterCreate&&d.options.afterCreate.call(d)}});p.removeClass("statusbar").addClass("ke-statusbar").append('<span class="ke-inline-block ke-statusbar-center-icon"></span>').append('<span class="ke-inline-block ke-statusbar-right-icon"></span>');
l(a).unbind("resize");b();e?(l(a).bind("resize",function(){d.isCreated&&c(X().clientWidth,X().clientHeight,!1)}),n.select("fullscreen"),p.first().css("visibility","hidden"),p.last().css("visibility","hidden")):(Aa&&l(a).bind("scroll",function(){d._scrollPos=oa()}),0<d.resizeType?Va({moveEl:h,clickEl:p,moveFn:function(a,b,d,e,f,g){c(null,e+g)}}):p.first().css("visibility","hidden"),2===d.resizeType?Va({moveEl:h,clickEl:p.last(),moveFn:function(a,b,d,e,f,g){c(d+f,e+g)}}):p.last().css("visibility","hidden"));
return d},remove:function(){var a=this;if(!a.isCreated)return a;a.beforeRemove();a.menu&&a.hideMenu();f(a.dialogs,function(){a.hideDialog()});l(document).unbind("mousedown",a._docMousedownFn);a.toolbar.remove();a.edit.remove();a.statusbar.last().unbind();a.statusbar.unbind();a.container.remove();a.container=a.toolbar=a.edit=a.menu=null;a.dialogs=[];a.isCreated=!1;return a},resize:function(a,b){null!==a&&m(a)>this.minWidth&&this.container.css("width",k(a));null!==b&&(b=m(b)-this.toolbar.div.height()-
this.statusbar.height(),0<b&&m(b)>this.minHeight&&this.edit.setHeight(b));return this},select:function(){this.isCreated&&this.cmd.select();return this},html:function(a){if(a===b)return this.isCreated?this.edit.html():ta(this.srcElement);this.isCreated?this.edit.html(a):ta(this.srcElement,a);return this},fullHtml:function(){return this.isCreated?this.edit.html(b,!0):""},text:function(a){return a===b?g(this.html().replace(/<(?!img|embed).*?>/ig,"").replace(/&nbsp;/ig," ")):this.html(r(a))},isEmpty:function(){return""===
g(this.text().replace(/\r\n|\n|\r/,""))},isDirty:function(){return g(this.initContent.replace(/\r\n|\n|\r|t/g,""))!==g(this.html().replace(/\r\n|\n|\r|t/g,""))},selectedHtml:function(){return this.isCreated?this.cmd.range.html():""},count:function(a){a=(a||"html").toLowerCase();return"html"===a?ma(Bb(this.html())).length:"text"===a?this.text().replace(/<(?:img|embed).*?>/ig,"K").replace(/\r\n|\n|\r/g,"").length:0},exec:function(a){a=a.toLowerCase();var b=this.cmd,c=0>e(a,["selectall","copy","paste",
"print"]);c&&this.addBookmark(!1);b[a].apply(b,O(arguments,1));c&&(this.updateState(),this.addBookmark(!1),this.options.afterChange&&this.options.afterChange.call(this));return this},insertHtml:function(a){if(!this.isCreated)return this;a=this.beforeSetHtml(a);this.exec("inserthtml",a);return this},appendHtml:function(a){this.html(this.html()+a);this.isCreated&&(a=this.cmd,a.range.selectNodeContents(a.doc.body).collapse(!1),a.select());return this},sync:function(){ta(this.srcElement,this.html());
return this},focus:function(){this.isCreated?this.edit.focus():this.srcElement[0].focus();return this},blur:function(){this.isCreated?this.edit.blur():this.srcElement[0].blur();return this},addBookmark:function(a){a=B(a,!0);var b=this.edit,c=Bb(b.doc.body.innerHTML);if(a&&0<this._undoStack.length&&Math.abs(c.length-ma(this._undoStack[this._undoStack.length-1].html).length)<this.minChangeSize)return this;b.designMode&&!this._firstAddBookmark?(b=this.cmd.range,a=b.createBookmark(!0),a.html=c,b.moveToBookmark(a)):
a={html:c};this._firstAddBookmark=!1;Cb(this._undoStack,a);return this},undo:function(){return Db.call(this,this._undoStack,this._redoStack)},redo:function(){return Db.call(this,this._redoStack,this._undoStack)},fullscreen:function(a){this.fullscreenMode=a===b?!this.fullscreenMode:a;return this.remove().create()},readonly:function(a){a=B(a,!0);var b=this,c=b.edit,d=c.doc;b.designMode?b.toolbar.disableAll(a,[]):f(b.noDisableItems,function(){b.toolbar[a?"disable":"enable"](this)});G?d.body.contentEditable=
!a:d.designMode=a?"off":"on";c.textarea[0].disabled=a},createMenu:function(a){var c=this.toolbar.get(a.name),d=c.pos();a.x=d.x;a.y=d.y+c.height();a.shadowMode=B(a.shadowMode,this.shadowMode);a.selectedColor!==b?(a.cls="ke-colorpicker-"+this.themeType,a.noColor=this.lang("noColor"),this.menu=vb(a)):(a.cls="ke-menu-"+this.themeType,a.centerLineMode=!1,this.menu=Za(a));return this.menu},hideMenu:function(){this.menu.remove();this.menu=null;return this},hideContextmenu:function(){this.contextmenu.remove();
this.contextmenu=null;return this},createDialog:function(a){var b=this;a.autoScroll=B(a.autoScroll,!0);a.shadowMode=B(a.shadowMode,b.shadowMode);a.closeBtn=B(a.closeBtn,{name:b.lang("close"),click:function(){b.hideDialog();G&&b.cmd&&b.cmd.select()}});a.noBtn=B(a.noBtn,{name:b.lang(a.yesBtn?"no":"close"),click:function(){b.hideDialog();G&&b.cmd&&b.cmd.select()}});"page"!=b.dialogAlignType&&(a.alignEl=b.container);a.cls="ke-dialog-"+b.themeType;if(0<b.dialogs.length){var c=b.dialogs[b.dialogs.length-
1];b.dialogs[0].setMaskIndex(c.z+2);a.z=c.z+3;a.showMask=!1}a=xb(a);b.dialogs.push(a);return a},hideDialog:function(){0<this.dialogs.length&&this.dialogs.pop().remove();0<this.dialogs.length&&this.dialogs[0].setMaskIndex(this.dialogs[this.dialogs.length-1].z-1);return this},errorDialog:function(a){var b=this.createDialog({width:750,title:this.lang("uploadError"),body:'<div style="padding:10px 20px;"><iframe frameborder="0" style="width:708px;height:400px;"></iframe></div>'}),b=l("iframe",b.div),c=
l.iframeDoc(b);c.open();c.write(a);c.close();l(c.body).css("background-color","#FFF");b[0].contentWindow.focus();return this}};G&&7>V&&fa(document,"BackgroundImageCache",!0);l.editor=function(a){return new Ia(a)};l.create=function(a,b){function c(a){f(ua,function(b,c){c.call(a,KindEditor)});return a.create()}b=b||{};b.basePath=B(b.basePath,l.basePath);b.themesPath=B(b.themesPath,b.basePath+"themes/");b.langPath=B(b.langPath,b.basePath+"lang/");b.pluginsPath=B(b.pluginsPath,b.basePath+"plugins/");
if(B(b.loadStyleMode,l.options.loadStyleMode)){var d=B(b.themeType,l.options.themeType);ab(b.themesPath+"default/default.css");ab(b.themesPath+d+"/"+d+".css")}if(d=l(a)){b.srcElement=d[0];b.width||(b.width=d[0].style.width||d.width());b.height||(b.height=d[0].style.height||d.height());var e=new Ia(b);if(ca[e.langType])return c(e);$a(e.langPath+e.langType+".js?ver="+encodeURIComponent(l.DEBUG?Ja:"4.0.4 (2011-12-11)"),function(){return c(e)});return e}};l.plugin=yb;l.lang=Ab;yb("core",function(a){var c=
this,d={undo:"Z",redo:"Y",bold:"B",italic:"I",underline:"U",print:"P",selectall:"A"};c.afterSetHtml(function(){c.options.afterChange&&c.options.afterChange.call(c)});if("form"==c.syncType){for(var g=a(c.srcElement),h=!1;g=g.parent();)if("form"==g.name){h=!0;break}if(h){g.bind("submit",function(){c.sync();c.edit.textarea.remove()});var k=a('[type="reset"]',g);k.click(function(){c.html(c.initContent);c.cmd.selection()});c.beforeRemove(function(){g.unbind();k.unbind()})}}c.clickToolbar("source",function(){Eb||
(c.edit.designMode?(c.toolbar.disableAll(!0),c.edit.design(!1),c.toolbar.select("source")):(c.toolbar.disableAll(!1),c.edit.design(!0),c.toolbar.unselect("source")),c.designMode=c.edit.designMode)});c.afterCreate(function(){c.designMode||c.toolbar.disableAll(!0).select("source")});c.clickToolbar("fullscreen",function(){c.fullscreen()});var l=!1;c.afterCreate(function(){a(c.edit.doc,c.edit.textarea).keyup(function(a){27==a.which&&setTimeout(function(){c.fullscreen()},0)});if(l){if(G&&!c.designMode)return;
c.focus()}l||(l=!0)});f(["undo","redo"],function(a,b){d[b]&&c.afterCreate(function(){W(this.edit.doc,d[b],function(){c.clickToolbar(b)})});c.clickToolbar(b,function(){c[b]()})});c.clickToolbar("formatblock",function(){var a=c.lang("formatblock.formatBlock"),b={h1:28,h2:24,h3:18,H4:14,p:12},d=c.cmd.val("formatblock"),e=c.createMenu({name:"formatblock",width:"en"==c.langType?200:150});f(a,function(a,f){var g="font-size:"+b[a]+"px;";"h"===a.charAt(0)&&(g+="font-weight:bold;");e.addItem({title:'<span style="'+
g+'" unselectable="on">'+f+"</span>",height:b[a]+12,checked:d===a||d===f,click:function(){c.select().exec("formatblock","<"+a+">").hideMenu()}})})});c.clickToolbar("fontname",function(){var a=c.cmd.val("fontname"),b=c.createMenu({name:"fontname",width:150});f(c.lang("fontname.fontName"),function(d,e){b.addItem({title:'<span style="font-family: '+d+';" unselectable="on">'+e+"</span>",checked:a===d.toLowerCase()||a===e.toLowerCase(),click:function(){c.exec("fontname",d).hideMenu()}})})});c.clickToolbar("fontsize",
function(){var a=c.cmd.val("fontsize"),b=c.createMenu({name:"fontsize",width:150});f(c.fontSizeTable,function(d,e){b.addItem({title:'<span style="font-size:'+e+';" unselectable="on">'+e+"</span>",height:m(e)+12,checked:a===e,click:function(){c.exec("fontsize",e).hideMenu()}})})});f(["forecolor","hilitecolor"],function(a,b){c.clickToolbar(b,function(){c.createMenu({name:b,selectedColor:c.cmd.val(b)||"default",colors:c.colorTable,click:function(a){c.exec(b,a).hideMenu()}})})});f(["cut","copy","paste"],
function(a,b){c.clickToolbar(b,function(){c.focus();try{c.exec(b,null)}catch(a){alert(c.lang(b+"Error"))}})});c.clickToolbar("about",function(){c.createDialog({name:"about",width:300,title:c.lang("about"),body:'<div style="margin:20px;"><div>KindEditor 4.0.4 (2011-12-11)</div><div>Copyright &copy; <a href="http://www.kindsoft.net/" target="_blank">kindsoft.net</a> All rights reserved.</div></div>'})});c.plugin.getSelectedLink=function(){return c.cmd.commonAncestor("a")};c.plugin.getSelectedImage=
function(){return Ha(c.edit.cmd.range,function(a){return!/^ke-\w+$/i.test(a[0].className)})};c.plugin.getSelectedFlash=function(){return Ha(c.edit.cmd.range,function(a){return"ke-flash"==a[0].className})};c.plugin.getSelectedMedia=function(){return Ha(c.edit.cmd.range,function(a){return"ke-media"==a[0].className||"ke-rm"==a[0].className})};c.plugin.getSelectedAnchor=function(){return Ha(c.edit.cmd.range,function(a){return"ke-anchor"==a[0].className})};f(["link","image","flash","media","anchor"],function(a,
d){var e=d.charAt(0).toUpperCase()+d.substr(1);f(["edit","delete"],function(a,f){c.addContextmenu({title:c.lang(f+e),click:function(){c.loadPlugin(d,function(){c.plugin[d][f]();c.hideMenu()})},cond:c.plugin["getSelected"+e],width:150,iconClass:"edit"==f?"ke-icon-"+d:b})});c.addContextmenu({title:"-"})});c.plugin.getSelectedTable=function(){return c.cmd.commonAncestor("table")};c.plugin.getSelectedRow=function(){return c.cmd.commonAncestor("tr")};c.plugin.getSelectedCell=function(){return c.cmd.commonAncestor("td")};
f("prop cellprop colinsertleft colinsertright rowinsertabove rowinsertbelow rowmerge colmerge rowsplit colsplit coldelete rowdelete insert delete".split(" "),function(a,b){var d=0>e(b,["prop","delete"])?c.plugin.getSelectedCell:c.plugin.getSelectedTable;c.addContextmenu({title:c.lang("table"+b),click:function(){c.loadPlugin("table",function(){c.plugin.table[b]();c.hideMenu()})},cond:d,width:170,iconClass:"ke-icon-table"+b})});c.addContextmenu({title:"-"});f("selectall justifyleft justifycenter justifyright justifyfull insertorderedlist insertunorderedlist indent outdent subscript superscript hr print bold italic underline strikethrough removeformat unlink".split(" "),
function(a,b){d[b]&&c.afterCreate(function(){W(this.edit.doc,d[b],function(){c.cmd.selection();c.clickToolbar(b)})});c.clickToolbar(b,function(){c.focus().exec(b,null)})});c.afterCreate(function(){function b(){e.range.moveToBookmark(f);e.select();va&&(a("div."+h,g).each(function(){a(this).after("<br />").remove(!0)}),a("span.Apple-style-span",g).remove(!0),a("meta",g).remove());var d=g[0].innerHTML;g.remove();""!==d&&(2===c.pasteType&&(/schemas-microsoft-com|worddocument|mso-\w+/i.test(d)?d=aa(d,
c.filterMode?c.htmlTags:a.options.htmlTags):(d=P(d,c.filterMode?c.htmlTags:null),d=c.beforeSetHtml(d))),1===c.pasteType&&(d=d.replace(/<br[^>]*>/ig,"\n"),d=d.replace(/<\/p><p[^>]*>/ig,"\n"),d=d.replace(/<[^>]+>/g,""),d=d.replace(/&nbsp;/ig," "),d=d.replace(/\n\s*\n/g,"\n"),d="p"==c.newlineTag?d.replace(/^/,"<p>").replace(/$/,"</p>").replace(/\n/g,"</p><p>"):d.replace(/\n/g,"<br />$&")),c.insertHtml(d))}var d=c.edit.doc,e,f,g,h="__kindeditor_paste__",k=!1;a(d.body).bind("paste",function(l){if(0===
c.pasteType)l.stop();else if(!k){k=!0;a("div."+h,d).remove();e=c.cmd.selection();f=e.range.createBookmark();g=a('<div class="'+h+'"></div>',d).css({position:"absolute",width:"1px",height:"1px",overflow:"hidden",left:"-1981px",top:a(f.start).pos().y+"px","white-space":"nowrap"});a(d.body).append(g);if(G){var m=e.range.get(!0);m.moveToElementText(g[0]);m.select();m.execCommand("paste");l.preventDefault()}else e.range.selectNodeContents(g[0]),e.select();setTimeout(function(){b();k=!1},0)}})});c.beforeGetHtml(function(a){return a.replace(/<img[^>]*class="?ke-(flash|rm|media)"?[^>]*>/ig,
function(a){a=J(a);var b=s(a.style||""),c=ja(a["data-ke-tag"]);c.width=B(a.width,m(B(b.width,"")));c.height=B(a.height,m(B(b.height,"")));return U(c)}).replace(/<img[^>]*class="?ke-anchor"?[^>]*>/ig,function(a){a=J(a);return'<a name="'+unescape(a["data-ke-name"])+'"></a>'}).replace(/<div\s+[^>]*data-ke-script-attr="([^"]*)"[^>]*>([\s\S]*?)<\/div>/ig,function(a,b,c){return"<script"+unescape(b)+">"+unescape(c)+"\x3c/script>"}).replace(/(<[^>]*)data-ke-src="([^"]*)"([^>]*>)/ig,function(a,b,c){a=a.replace(/(\s+(?:href|src)=")[^"]*(")/i,
"$1"+c+"$2");return a.replace(/\s+data-ke-src="[^"]*"/i,"")}).replace(/(<[^>]+\s)data-ke-(on\w+="[^"]*"[^>]*>)/ig,function(a,b,c){return b+c})});c.beforeSetHtml(function(a){return a.replace(/<embed[^>]*type="([^"]+)"[^>]*>(?:<\/embed>)?/ig,function(a){a=J(a);a.src=B(a.src,"");a.width=B(a.width,0);a.height=B(a.height,0);return pa(c.themesPath+"common/blank.gif",a)}).replace(/<a[^>]*name="([^"]+)"[^>]*>(?:<\/a>)?/ig,function(a){var d=J(a);return d.href!==b?a:'<img class="ke-anchor" src="'+c.themesPath+
'common/anchor.gif" data-ke-name="'+escape(d.name)+'" />'}).replace(/<script([^>]*)>([\s\S]*?)<\/script>/ig,function(a,b,c){return'<div class="ke-script" data-ke-script-attr="'+escape(b)+'">'+escape(c)+"</div>"}).replace(/(<[^>]*)(href|src)="([^"]*)"([^>]*>)/ig,function(a,b,c,d,e){return a.match(/\sdata-ke-src="[^"]*"/i)?a:b+c+'="'+d+'" data-ke-src="'+d+'"'+e}).replace(/(<[^>]+\s)(on\w+="[^"]*"[^>]*>)/ig,function(a,b,c){return b+"data-ke-"+c}).replace(/<table[^>]*\s+border="0"[^>]*>/ig,function(a){return 0<=
a.indexOf("ke-zeroborder")?a:z(a,"ke-zeroborder")})})})}})(window);KindEditor.lang({source:"HTML\u4ee3\u7801",preview:"\u9884\u89c8",undo:"\u540e\u9000(Ctrl+Z)",redo:"\u524d\u8fdb(Ctrl+Y)",cut:"\u526a\u5207(Ctrl+X)",copy:"\u590d\u5236(Ctrl+C)",paste:"\u7c98\u8d34(Ctrl+V)",plainpaste:"\u7c98\u8d34\u4e3a\u65e0\u683c\u5f0f\u6587\u672c",wordpaste:"\u4eceWord\u7c98\u8d34",selectall:"\u5168\u9009(Ctrl+A)",justifyleft:"\u5de6\u5bf9\u9f50",justifycenter:"\u5c45\u4e2d",justifyright:"\u53f3\u5bf9\u9f50",justifyfull:"\u4e24\u7aef\u5bf9\u9f50",insertorderedlist:"\u7f16\u53f7",
insertunorderedlist:"\u9879\u76ee\u7b26\u53f7",indent:"\u589e\u52a0\u7f29\u8fdb",outdent:"\u51cf\u5c11\u7f29\u8fdb",subscript:"\u4e0b\u6807",superscript:"\u4e0a\u6807",formatblock:"\u6bb5\u843d",fontname:"\u5b57\u4f53",fontsize:"\u6587\u5b57\u5927\u5c0f",forecolor:"\u6587\u5b57\u989c\u8272",hilitecolor:"\u6587\u5b57\u80cc\u666f",bold:"\u7c97\u4f53(Ctrl+B)",italic:"\u659c\u4f53(Ctrl+I)",underline:"\u4e0b\u5212\u7ebf(Ctrl+U)",strikethrough:"\u5220\u9664\u7ebf",removeformat:"\u5220\u9664\u683c\u5f0f",
image:"\u56fe\u7247",flash:"Flash",media:"\u89c6\u97f3\u9891",table:"\u8868\u683c",tablecell:"\u5355\u5143\u683c",hr:"\u63d2\u5165\u6a2a\u7ebf",emoticons:"\u63d2\u5165\u8868\u60c5",link:"\u8d85\u7ea7\u94fe\u63a5",unlink:"\u53d6\u6d88\u8d85\u7ea7\u94fe\u63a5",fullscreen:"\u5168\u5c4f\u663e\u793a(Esc)",about:"\u5173\u4e8e",print:"\u6253\u5370(Ctrl+P)",filemanager:"\u6d4f\u89c8\u670d\u52a1\u5668",code:"\u63d2\u5165\u7a0b\u5e8f\u4ee3\u7801",map:"Google\u5730\u56fe",lineheight:"\u884c\u8ddd",clearhtml:"\u6e05\u7406HTML\u4ee3\u7801",
pagebreak:"\u63d2\u5165\u5206\u9875\u7b26",quickformat:"\u4e00\u952e\u6392\u7248",insertfile:"\u63d2\u5165\u6587\u4ef6",template:"\u63d2\u5165\u6a21\u677f",anchor:"\u951a\u70b9",yes:"\u786e\u5b9a",no:"\u53d6\u6d88",close:"\u5173\u95ed",editImage:"\u56fe\u7247\u5c5e\u6027",deleteImage:"\u5220\u9664\u56fe\u7247",editFlash:"Flash\u5c5e\u6027",deleteFlash:"\u5220\u9664Flash",editMedia:"\u89c6\u97f3\u9891\u5c5e\u6027",deleteMedia:"\u5220\u9664\u89c6\u97f3\u9891",editLink:"\u8d85\u7ea7\u94fe\u63a5\u5c5e\u6027",
deleteLink:"\u53d6\u6d88\u8d85\u7ea7\u94fe\u63a5",editAnchor:"\u951a\u70b9\u5c5e\u6027",deleteAnchor:"\u5220\u9664\u951a\u70b9",tableprop:"\u8868\u683c\u5c5e\u6027",tablecellprop:"\u5355\u5143\u683c\u5c5e\u6027",tableinsert:"\u63d2\u5165\u8868\u683c",tabledelete:"\u5220\u9664\u8868\u683c",tablecolinsertleft:"\u5de6\u4fa7\u63d2\u5165\u5217",tablecolinsertright:"\u53f3\u4fa7\u63d2\u5165\u5217",tablerowinsertabove:"\u4e0a\u65b9\u63d2\u5165\u884c",tablerowinsertbelow:"\u4e0b\u65b9\u63d2\u5165\u884c",
tablerowmerge:"\u5411\u4e0b\u5408\u5e76\u5355\u5143\u683c",tablecolmerge:"\u5411\u53f3\u5408\u5e76\u5355\u5143\u683c",tablerowsplit:"\u62c6\u5206\u884c",tablecolsplit:"\u62c6\u5206\u5217",tablecoldelete:"\u5220\u9664\u5217",tablerowdelete:"\u5220\u9664\u884c",noColor:"\u65e0\u989c\u8272",invalidImg:"\u8bf7\u8f93\u5165\u6709\u6548\u7684URL\u5730\u5740\u3002\n\u53ea\u5141\u8bb8jpg,gif,bmp,png\u683c\u5f0f\u3002",invalidMedia:"\u8bf7\u8f93\u5165\u6709\u6548\u7684URL\u5730\u5740\u3002\n\u53ea\u5141\u8bb8swf,flv,mp3,wav,wma,wmv,mid,avi,mpg,asf,rm,rmvb\u683c\u5f0f\u3002",
invalidWidth:"\u5bbd\u5ea6\u5fc5\u987b\u4e3a\u6570\u5b57\u3002",invalidHeight:"\u9ad8\u5ea6\u5fc5\u987b\u4e3a\u6570\u5b57\u3002",invalidBorder:"\u8fb9\u6846\u5fc5\u987b\u4e3a\u6570\u5b57\u3002",invalidUrl:"\u8bf7\u8f93\u5165\u6709\u6548\u7684URL\u5730\u5740\u3002",invalidRows:"\u884c\u6570\u4e3a\u5fc5\u9009\u9879\uff0c\u53ea\u5141\u8bb8\u8f93\u5165\u5927\u4e8e0\u7684\u6570\u5b57\u3002",invalidCols:"\u5217\u6570\u4e3a\u5fc5\u9009\u9879\uff0c\u53ea\u5141\u8bb8\u8f93\u5165\u5927\u4e8e0\u7684\u6570\u5b57\u3002",
invalidPadding:"\u8fb9\u8ddd\u5fc5\u987b\u4e3a\u6570\u5b57\u3002",invalidSpacing:"\u95f4\u8ddd\u5fc5\u987b\u4e3a\u6570\u5b57\u3002",invalidJson:"\u670d\u52a1\u5668\u53d1\u751f\u6545\u969c\u3002",uploadSuccess:"\u4e0a\u4f20\u6210\u529f\u3002",cutError:"\u60a8\u7684\u6d4f\u89c8\u5668\u5b89\u5168\u8bbe\u7f6e\u4e0d\u5141\u8bb8\u4f7f\u7528\u526a\u5207\u64cd\u4f5c\uff0c\u8bf7\u4f7f\u7528\u5feb\u6377\u952e(Ctrl+X)\u6765\u5b8c\u6210\u3002",copyError:"\u60a8\u7684\u6d4f\u89c8\u5668\u5b89\u5168\u8bbe\u7f6e\u4e0d\u5141\u8bb8\u4f7f\u7528\u590d\u5236\u64cd\u4f5c\uff0c\u8bf7\u4f7f\u7528\u5feb\u6377\u952e(Ctrl+C)\u6765\u5b8c\u6210\u3002",
pasteError:"\u60a8\u7684\u6d4f\u89c8\u5668\u5b89\u5168\u8bbe\u7f6e\u4e0d\u5141\u8bb8\u4f7f\u7528\u7c98\u8d34\u64cd\u4f5c\uff0c\u8bf7\u4f7f\u7528\u5feb\u6377\u952e(Ctrl+V)\u6765\u5b8c\u6210\u3002",ajaxLoading:"\u52a0\u8f7d\u4e2d\uff0c\u8bf7\u7a0d\u5019 ...",uploadLoading:"\u4e0a\u4f20\u4e2d\uff0c\u8bf7\u7a0d\u5019 ...",uploadError:"\u4e0a\u4f20\u9519\u8bef","plainpaste.comment":"\u8bf7\u4f7f\u7528\u5feb\u6377\u952e(Ctrl+V)\u628a\u5185\u5bb9\u7c98\u8d34\u5230\u4e0b\u9762\u7684\u65b9\u6846\u91cc\u3002",
"wordpaste.comment":"\u8bf7\u4f7f\u7528\u5feb\u6377\u952e(Ctrl+V)\u628a\u5185\u5bb9\u7c98\u8d34\u5230\u4e0b\u9762\u7684\u65b9\u6846\u91cc\u3002","link.url":"URL","link.linkType":"\u6253\u5f00\u7c7b\u578b","link.newWindow":"\u65b0\u7a97\u53e3","link.selfWindow":"\u5f53\u524d\u7a97\u53e3","flash.url":"URL","flash.width":"\u5bbd\u5ea6","flash.height":"\u9ad8\u5ea6","flash.upload":"\u4e0a\u4f20","flash.viewServer":"\u6d4f\u89c8","media.url":"URL","media.width":"\u5bbd\u5ea6","media.height":"\u9ad8\u5ea6",
"media.autostart":"\u81ea\u52a8\u64ad\u653e","media.upload":"\u4e0a\u4f20","media.viewServer":"\u6d4f\u89c8","image.remoteImage":"\u8fdc\u7a0b\u56fe\u7247","image.localImage":"\u672c\u5730\u4e0a\u4f20","image.remoteUrl":"\u56fe\u7247\u5730\u5740","image.localUrl":"\u56fe\u7247\u5730\u5740","image.size":"\u56fe\u7247\u5927\u5c0f","image.width":"\u5bbd","image.height":"\u9ad8","image.resetSize":"\u91cd\u7f6e\u5927\u5c0f","image.align":"\u5bf9\u9f50\u65b9\u5f0f","image.defaultAlign":"\u9ed8\u8ba4\u65b9\u5f0f",
"image.leftAlign":"\u5de6\u5bf9\u9f50","image.rightAlign":"\u53f3\u5bf9\u9f50","image.imgTitle":"\u56fe\u7247\u8bf4\u660e","image.viewServer":"\u6d4f\u89c8...","filemanager.emptyFolder":"\u7a7a\u6587\u4ef6\u5939","filemanager.moveup":"\u79fb\u5230\u4e0a\u4e00\u7ea7\u6587\u4ef6\u5939","filemanager.viewType":"\u663e\u793a\u65b9\u5f0f\uff1a","filemanager.viewImage":"\u7f29\u7565\u56fe","filemanager.listImage":"\u8be6\u7ec6\u4fe1\u606f","filemanager.orderType":"\u6392\u5e8f\u65b9\u5f0f\uff1a","filemanager.fileName":"\u540d\u79f0",
"filemanager.fileSize":"\u5927\u5c0f","filemanager.fileType":"\u7c7b\u578b","insertfile.url":"URL","insertfile.title":"\u6587\u4ef6\u8bf4\u660e","insertfile.upload":"\u4e0a\u4f20","insertfile.viewServer":"\u6d4f\u89c8","table.cells":"\u5355\u5143\u683c\u6570","table.rows":"\u884c\u6570","table.cols":"\u5217\u6570","table.size":"\u5927\u5c0f","table.width":"\u5bbd\u5ea6","table.height":"\u9ad8\u5ea6","table.percent":"%","table.px":"px","table.space":"\u8fb9\u8ddd\u95f4\u8ddd","table.padding":"\u8fb9\u8ddd",
"table.spacing":"\u95f4\u8ddd","table.align":"\u5bf9\u9f50\u65b9\u5f0f","table.textAlign":"\u6c34\u5e73\u5bf9\u9f50","table.verticalAlign":"\u5782\u76f4\u5bf9\u9f50","table.alignDefault":"\u9ed8\u8ba4","table.alignLeft":"\u5de6\u5bf9\u9f50","table.alignCenter":"\u5c45\u4e2d","table.alignRight":"\u53f3\u5bf9\u9f50","table.alignTop":"\u9876\u90e8","table.alignMiddle":"\u4e2d\u90e8","table.alignBottom":"\u5e95\u90e8","table.alignBaseline":"\u57fa\u7ebf","table.border":"\u8fb9\u6846","table.borderWidth":"\u8fb9\u6846",
"table.borderColor":"\u989c\u8272","table.backgroundColor":"\u80cc\u666f\u989c\u8272","map.address":"\u5730\u5740: ","map.search":"\u641c\u7d22","anchor.name":"\u951a\u70b9\u540d\u79f0","formatblock.formatBlock":{h1:"\u6807\u9898 1",h2:"\u6807\u9898 2",h3:"\u6807\u9898 3",h4:"\u6807\u9898 4",p:"\u6b63 \u6587"},"fontname.fontName":{SimSun:"\u5b8b\u4f53",NSimSun:"\u65b0\u5b8b\u4f53",FangSong_GB2312:"\u4eff\u5b8b_GB2312",KaiTi_GB2312:"\u6977\u4f53_GB2312",SimHei:"\u9ed1\u4f53","Microsoft YaHei":"\u5fae\u8f6f\u96c5\u9ed1",
Arial:"Arial","Arial Black":"Arial Black","Times New Roman":"Times New Roman","Courier New":"Courier New",Tahoma:"Tahoma",Verdana:"Verdana"},"lineheight.lineHeight":[{1:"\u5355\u500d\u884c\u8ddd"},{"1.5":"1.5\u500d\u884c\u8ddd"},{2:"2\u500d\u884c\u8ddd"},{"2.5":"2.5\u500d\u884c\u8ddd"},{3:"3\u500d\u884c\u8ddd"}],"template.selectTemplate":"\u53ef\u9009\u6a21\u677f","template.replaceContent":"\u66ff\u6362\u5f53\u524d\u5185\u5bb9","template.fileList":{"1.html":"\u56fe\u7247\u548c\u6587\u5b57","2.html":"\u8868\u683c",
"3.html":"\u9879\u76ee\u7f16\u53f7"}},"zh_CN");if("undefined"==typeof infosoftglobal)var infosoftglobal={};"undefined"==typeof infosoftglobal.FusionChartsUtil&&(infosoftglobal.FusionChartsUtil={});
infosoftglobal.FusionCharts=function(a,b,c,d,e,f,g,h,k,m,r){document.getElementById&&(this.initialDataSet=!1,this.params={},this.variables={},this.attributes=[],a&&this.setAttribute("swf",a),b&&this.setAttribute("id",b),(c=c.toString().replace(/\%$/,"%25"))&&this.setAttribute("width",c),(d=d.toString().replace(/\%$/,"%25"))&&this.setAttribute("height",d),g&&this.addParam("bgcolor",g),this.addParam("quality","high"),this.addParam("allowScriptAccess","always"),this.addVariable("chartWidth",c),this.addVariable("chartHeight",
d),this.addVariable("debugMode",e?e:0),this.addVariable("DOMId",b),this.addVariable("registerWithJS",f?f:0),this.addVariable("scaleMode",h?h:"noScale"),this.addVariable("lang",k?k:"EN"),this.detectFlashVersion=m?m:1,this.autoInstallRedirect=r?r:1,this.installedVer=infosoftglobal.FusionChartsUtil.getPlayerVersion(),!window.opera&&document.all&&7<this.installedVer.major&&(infosoftglobal.FusionCharts.doPrepUnload=!0))};
infosoftglobal.FusionCharts.prototype={setAttribute:function(a,b){this.attributes[a]=b},getAttribute:function(a){return this.attributes[a]},addParam:function(a,b){this.params[a]=b},getParams:function(){return this.params},addVariable:function(a,b){this.variables[a]=b},getVariable:function(a){return this.variables[a]},getVariables:function(){return this.variables},getVariablePairs:function(){var a=[],b,c=this.getVariables();for(b in c)a.push(b+"="+c[b]);return a},getSWFHTML:function(){var a="";if(navigator.plugins&&
navigator.mimeTypes&&navigator.mimeTypes.length){var a='<embed type="application/x-shockwave-flash" src="'+this.getAttribute("swf")+'" width="'+this.getAttribute("width")+'" height="'+this.getAttribute("height")+'"  ',a=a+(' id="'+this.getAttribute("id")+'" name="'+this.getAttribute("id")+'" '),b=this.getParams(),c;for(c in b)a+=[c]+'="'+b[c]+'" ';b=this.getVariablePairs().join("&");0<b.length&&(a+='flashvars="'+b+'"');a+="/>"}else{a='<object id="'+this.getAttribute("id")+'" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="'+
this.getAttribute("width")+'" height="'+this.getAttribute("height")+'">';a+='<param name="movie" value="'+this.getAttribute("swf")+'" />';b=this.getParams();for(c in b)a+='<param name="'+c+'" value="'+b[c]+'" />';b=this.getVariablePairs().join("&");0<b.length&&(a+='<param name="flashvars" value="'+b+'" />');a+="</object>"}return a},setDataURL:function(a){if(!1==this.initialDataSet)this.addVariable("dataURL",a),this.initialDataSet=!0;else{var b=infosoftglobal.FusionChartsUtil.getChartObject(this.getAttribute("id"));
b.setDataURL||__flash__addCallback(b,"setDataURL");b.setDataURL(a)}},encodeDataXML:function(a){var b=a.match(/=\s*\".*?\"/g);if(b)for(var c=0;c<b.length;c++){var d=b[c].replace(/^=\s*\"|\"$/g,""),d=d.replace(/\'/g,"%26apos;"),e=a.indexOf(b[c]),d="='"+d+"'",f=a.substring(0,e);a=a.substring(e+b[c].length);a=f+d+a}a=a.replace(/\"/g,"%26quot;");a=a.replace(/%(?![\da-f]{2}|[\da-f]{4})/ig,"%25");return a=a.replace(/\&/g,"%26")},setDataXML:function(a){!1==this.initialDataSet?(this.addVariable("dataXML",
this.encodeDataXML(a)),this.initialDataSet=!0):infosoftglobal.FusionChartsUtil.getChartObject(this.getAttribute("id")).setDataXML(a)},setTransparent:function(a){"undefined"==typeof a&&(a=!0);a?this.addParam("WMode","transparent"):this.addParam("WMode","Opaque")},render:function(a){if(1==this.detectFlashVersion&&6>this.installedVer.major)if(1==this.autoInstallRedirect)if(window.confirm("You need Adobe Flash Player 6 (or above) to view the charts. It is a free and lightweight installation from Adobe.com. Please click on Ok to install the same."))window.location=
"http://www.adobe.com/shockwave/download/download.cgi?P1_Prod_Version=ShockwaveFlash";else return!1;else return!1;else return("string"==typeof a?document.getElementById(a):a).innerHTML=this.getSWFHTML(),document.embeds[this.getAttribute("id")]||window[this.getAttribute("id")]||(window[this.getAttribute("id")]=document.getElementById(this.getAttribute("id"))),!0}};
infosoftglobal.FusionChartsUtil.getPlayerVersion=function(){var a=new infosoftglobal.PlayerVersion([0,0,0]);if(navigator.plugins&&navigator.mimeTypes.length){var b=navigator.plugins["Shockwave Flash"];b&&b.description&&(a=new infosoftglobal.PlayerVersion(b.description.replace(/([a-zA-Z]|\s)+/,"").replace(/(\s+r|\s+b[0-9]+)/,".").split(".")))}else if(navigator.userAgent&&0<=navigator.userAgent.indexOf("Windows CE"))for(var b=1,c=3;b;)try{c++,b=new ActiveXObject("ShockwaveFlash.ShockwaveFlash."+c),
a=new infosoftglobal.PlayerVersion([c,0,0])}catch(d){b=null}else{try{b=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7")}catch(e){try{b=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6"),a=new infosoftglobal.PlayerVersion([6,0,21]),b.AllowScriptAccess="always"}catch(f){if(6==a.major)return a}try{b=new ActiveXObject("ShockwaveFlash.ShockwaveFlash")}catch(g){}}null!=b&&(a=new infosoftglobal.PlayerVersion(b.GetVariable("$version").split(" ")[1].split(",")))}return a};
infosoftglobal.PlayerVersion=function(a){this.major=null!=a[0]?parseInt(a[0]):0;this.minor=null!=a[1]?parseInt(a[1]):0;this.rev=null!=a[2]?parseInt(a[2]):0};infosoftglobal.FusionChartsUtil.cleanupSWFs=function(){for(var a=document.getElementsByTagName("OBJECT"),b=a.length-1;0<=b;b--){a[b].style.display="none";for(var c in a[b])"function"==typeof a[b][c]&&(a[b][c]=function(){})}};
infosoftglobal.FusionCharts.doPrepUnload&&!infosoftglobal.unloadSet&&(infosoftglobal.FusionChartsUtil.prepUnload=function(){__flash_unloadHandler=function(){};__flash_savedUnloadHandler=function(){};window.attachEvent("onunload",infosoftglobal.FusionChartsUtil.cleanupSWFs)},window.attachEvent("onbeforeunload",infosoftglobal.FusionChartsUtil.prepUnload),infosoftglobal.unloadSet=!0);!document.getElementById&&document.all&&(document.getElementById=function(a){return document.all[a]});
null==Array.prototype.push&&(Array.prototype.push=function(a){this[this.length]=a;return this.length});infosoftglobal.FusionChartsUtil.getChartObject=function(a){var b=null;(b=-1==navigator.appName.indexOf("Microsoft Internet")?document.embeds&&document.embeds[a]?document.embeds[a]:window.document[a]:window[a])||(b=document.getElementById(a));return b};
infosoftglobal.FusionChartsUtil.updateChartXML=function(a,b){var c=infosoftglobal.FusionChartsUtil.getChartObject(a);c.SetVariable("_root.dataURL","");c.SetVariable("_root.isNewData","1");c.SetVariable("_root.newData",b);c.TGotoLabel("/","JavaScriptHandler")};var getChartFromId=infosoftglobal.FusionChartsUtil.getChartObject,updateChartXML=infosoftglobal.FusionChartsUtil.updateChartXML,FusionCharts=infosoftglobal.FusionCharts;var stringProps="select([]) update charAt charCodeAt indexOf lastIndexOf substring substr slice trim trimLeft trimRight toUpperCase toLowerCase split concat match replace search".split(" "),arrayProps="length concat join splice push pop shift unshift slice reverse sort indexOf lastIndexOf every some filter forEach map reduce reduceRight ".split(" "),funcProps=["prototype","apply","call","bind"],keywords="DOServie.getService('') DOBO.getDOBOByName('') callService callAction loadPml callPlatBus break case catch continue debugger default delete do else false finally for function if in instanceof new null return switch throw true try typeof var void while with".split(" ");
function stopEvent(){this.preventDefault?(this.preventDefault(),this.stopPropagation()):(this.returnValue=!1,this.cancelBubble=!0)}function addStop(a){a.stop||(a.stop=stopEvent);return a}function connect(a,b,c){function d(a){c(addStop(a||window.event))}"function"==typeof a.addEventListener?a.addEventListener(b,d,!1):a.attachEvent("on"+b,d)}function forEach(a,b){for(var c=0,d=a.length;c<d;++c)b(a[c])}
function startComplete(){function a(a){mirrorEditor.replaceRange(a,{line:d.line,ch:e.start},{line:d.line,ch:e.end})}function b(){m||(m=!0,h.parentNode.removeChild(h))}function c(){a(k.options[k.selectedIndex].value);b();setTimeout(function(){mirrorEditor.focus()},50)}if(!mirrorEditor.somethingSelected()){var d=mirrorEditor.getCursor(!1),e=mirrorEditor.getTokenAt(d),f=e;for(/^[\w$_]*$/.test(e.string)||(e=f={start:d.ch,end:d.ch,string:"",state:e.state,className:"."==e.string?"js-property":null});"js-property"==
f.className;){f=mirrorEditor.getTokenAt({line:d.line,ch:f.start});if("."!=f.string)return;f=mirrorEditor.getTokenAt({line:d.line,ch:f.start});if(!g)var g=[];g.push(f)}f=getCompletions(e,g);if(f.length){if(1==f.length)return a(f[0]),!0;var h=document.createElement("div");h.className="completions";var k=h.appendChild(document.createElement("select"));k.multiple=!0;for(g=0;g<f.length;++g)k.appendChild(document.createElement("option")).appendChild(document.createTextNode(f[g]));k.firstChild.selected=
!0;k.size=Math.min(10,f.length);g=mirrorEditor.cursorCoords();h.style.left=g.x+"px";h.style.top=g.yBot+"px";document.body.appendChild(h);10>=f.length&&(h.style.width=k.clientWidth-1+"px");var m=!1;connect(k,"blur",b);connect(k,"keydown",function(a){var d=a.keyCode;13==d||32==d?(a.stop(),c()):27==d?(a.stop(),b(),mirrorEditor.focus()):38!=d&&40!=d&&(b(),mirrorEditor.focus(),setTimeout(startComplete,50))});connect(k,"dblclick",c);k.focus();window.opera&&setTimeout(function(){m||k.focus()},100);return!0}}}
function getCompletions(a,b){function c(a){0==a.indexOf(f)&&e.push(a)}function d(a){"string"==typeof a?forEach(stringProps,c):a instanceof Array?forEach(arrayProps,c):a instanceof Function&&forEach(funcProps,c);for(var b in a)c(b)}var e=[],f=a.string;if(b){var g=b.pop(),h;if("js-variable"==g.className||"variable"==g.className)h=window[g.string];else if("js-string"==g.className||"string"==g.className)h="";else if("js-atom"==g.className||"atom"==g.className)h=1;for(;null!=h&&b.length;)h=h[b.pop().string];
void 0==h&&(h="");null!=h&&d(h)}else{for(g=a.state.localVars;g;g=g.next)c(g.name);d(window);forEach(keywords,c)}return e};/*
 MIT License <http://opensource.org/licenses/MIT>
*/
var position="last",isHome=1,globalService=globalURL+"servicecontroller",globalPml=globalURL+"mvccontroller",baseFlowImage="",ep={};
(function(a){jQuery.fn.clone=function(){for(var b=a.apply(this,arguments),c=this.find("textarea").add(this.filter("textarea")),d=b.find("textarea").add(b.filter("textarea")),e=this.find("select").add(this.filter("select")),f=b.find("select").add(b.filter("select")),g=0,h=c.length;g<h;++g)$(d[g]).val($(c[g]).val());g=0;for(h=e.length;g<h;++g)f[g].selectedIndex=e[g].selectedIndex;return b}})(jQuery.fn.clone);
(function(a){var b=/["\\\x00-\x1f\x7f-\x9f]/g,c={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},d=Object.prototype.hasOwnProperty;a.toJSON="object"===typeof JSON&&JSON.stringify?JSON.stringify:function(b){if(null===b)return"null";var c,g,h,k;k=a.type(b);if("undefined"!==k){if("number"===k||"boolean"===k)return String(b);if("string"===k)return a.quoteString(b);if("function"===typeof b.toJSON)return a.toJSON(b.toJSON());if("date"===k){c=b.getUTCMonth()+1;g=b.getUTCDate();
h=b.getUTCFullYear();k=b.getUTCHours();var m=b.getUTCMinutes(),r=b.getUTCSeconds();b=b.getUTCMilliseconds();10>c&&(c="0"+c);10>g&&(g="0"+g);10>k&&(k="0"+k);10>m&&(m="0"+m);10>r&&(r="0"+r);100>b&&(b="0"+b);10>b&&(b="0"+b);return'"'+h+"-"+c+"-"+g+"T"+k+":"+m+":"+r+"."+b+'Z"'}c=[];if(a.isArray(b)){for(g=0;g<b.length;g++)c.push(a.toJSON(b[g])||"null");return"["+c.join(",")+"]"}if("object"===typeof b){for(g in b)if(d.call(b,g)){k=typeof g;if("number"===k)h='"'+g+'"';else if("string"===k)h=a.quoteString(g);
else continue;k=typeof b[g];"function"!==k&&"undefined"!==k&&(k=a.toJSON(b[g]),c.push(h+":"+k))}return"{"+c.join(",")+"}"}}};a.evalJSON="object"===typeof JSON&&JSON.parse?JSON.parse:function(a){return eval("("+a+")")};a.secureEvalJSON="object"===typeof JSON&&JSON.parse?JSON.parse:function(a){var b=a.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"");if(/^[\],:{}\s]*$/.test(b))return eval("("+a+")");throw new SyntaxError("Error parsing JSON, source is not valid.");
};a.quoteString=function(a){return a.match(b)?'"'+a.replace(b,function(a){var b=c[a];if("string"===typeof b)return b;b=a.charCodeAt();return"\\u00"+Math.floor(b/16).toString(16)+(b%16).toString(16)})+'"':'"'+a+'"'}})(jQuery);
function resscrEvt(a,b){if(void 0==a||void 0==b)a=$(window).height(),b=$(window).width();try{var c=$(".gMain").offset().top,d=$(".gLe").width()+$(".resizeTd").width();$(".gLe").css("height",a-c);$(".gRi").css("height",a-c);$(".gRi").css("width",b-d);$(".resizeTd").css("height",a-c);$(".tree").css("height",a-c);$(".mRight:visible .ui-tabs-panel").css("height",a-c-40);$(".mRight:visible .ui-tabs-panel").css("width",b-d-$(".mRight:visible .lrschidren").width()-10);2==$(".mRight:visible .lrschidren").size()&&
($(".mRight:visible .lrschidren").css("height",a-c),$(".mRight:visible .lrschidren").eq(1).css("width",b-d-$(".mRight:visible .lrschidren").eq(0).width()-10))}catch(e){}}$(function(){0<$(".mHi").length&&($(".mHi:gt(0)").hide(),$(".mTitle").bind("click",function(){$(".mHi").hide();$(".mTitle-hover").removeClass("mTitle-hover");$(this).addClass("mTitle-hover");$(this).next(".mHi").fadeIn("normal")}))});
function bindMenuHoverCss(){$(".mMenu").bind("mouseover",function(){$(this).addClass("mMenu-hover")}).bind("mouseout",function(){$(this).removeClass("mMenu-hover")})}
function bindClickMenu(){$(".mMenu").bind("click",function(a){$(".mMenu").removeClass("mMenu-hover2");$(".mMenu").removeClass("mMenu-hover");$(this).addClass("mMenu-hover2");var b=$(this).attr("id"),c=$(this).attr("name"),d=$(this).attr("paneid"),e=$(this).attr("paneName"),f=$(this).attr("target");null!=f&&""!=f&&"_opener_tab"!=f&&null!=e?loadPml({pml:e,target:f}):null==d||-1!=d.indexOf("mvccontroller")?createTab(b,c,d,"isMenu"):window.open(d);a.stopPropagation()})}
function createNewTab(a,b,c,d){var e="#dvTab .oneTab[tabId='"+a+"']";1==$(e).length&&($(e).remove(),$("#tab_"+a).remove());createTab(a,b,c,d)}
function createTab(a,b,c,d){var e="#dvTab .oneTab[tabId='"+a+"']";if(1==$(e).length)selectTabCss(e);else{if(7==$(".gTab .oneTab").length)if("first"==position){var f=$(".gTab .oneTab:last").attr("tabId");$(".gTab .oneTab:last").remove();$("#tab_"+f).remove()}else"last"==position&&(f=$(".gTab .oneTab").eq(1).attr("tabId"),$(".gTab .oneTab").eq(1).remove(),$("#tab_"+f).remove());null==d&&(d="");0<$("#dvTab .oneTab").length?$("#dvTab .oneTab:"+position).after('<div class="oneTab" tabId="'+a+'" paneId = "'+
c+'" isMenu="'+d+'" title="'+b+'" style="WIDTH: 130px; ZOOM: 1"><div class="tLe">&nbsp;</div><div class="bdy"><nobr>'+b+'</nobr></div><div class="tRi">&nbsp;</div><div class="btnTab"><a class="TabCls">&nbsp;&nbsp;&nbsp;</a></div></div>'):$("#dvTab").append('<div class="oneTab" tabId="'+a+'" paneId = "'+c+'" isMenu="'+d+'" title="'+b+'" style="WIDTH: 130px; ZOOM: 1"><div class="tLe">&nbsp;</div><div class="bdy"><nobr>'+b+'</nobr></div><div class="tRi">&nbsp;</div><div class="btnTab"><a class="TabCls">&nbsp;&nbsp;&nbsp;</a></div></div>');
a=e+" .btnTab";selectTabCss(e);bindTabClickCss(e);bindTabCloseCss(a);bindTabCloseWindow(a)}}function bindTabClickCss(a){void 0==a?$(".gTab .oneTab").bind("click",function(){tabClickCss(this)}):$(a).bind("click",function(){tabClickCss(a)})}function tabClickCss(a){selectTabCss(a);$(".mMenu").removeClass("mMenu-hover2");$(".mMenu").removeClass("mMenu-hover");var b="#"+$(a).attr("tabId");a="#"+$(a).attr("isMenu");null!=a&&"isMenu"==a&&$(b).addClass("mMenu-hover2")}
function selectTabCss(a){$(".gTab .oneTab").removeClass("on");$(a).addClass("on");var b=$(a).attr("paneId");a=$(a).attr("tabId");$(".mRight").hide();0<$("#tab_"+a).size()?resscrEvt():($("#mRight").clone().attr("id","tab_"+a).insertAfter("#mRight"),-1!=b.indexOf(".htm")||-1!=b.indexOf(".jsp")?($("#tab_"+a).append("<iframe  id='if"+a+"'  frameborder='0'  />"),$("#if"+a).height($("#tab_"+a).height()).width($("#tab_"+a).width()).attr("src",b),resscrEvt()):(loading(EELang.loading),$("#tab_"+a).load(b,
function(){resscrEvt();closeWin()})));$("#tab_"+a).show()}
function bindTabCloseCss(a){void 0==a?$(".btnTab").bind("mouseover",function(){$(this).children("a").removeClass("TabCls");$(this).children("a").addClass("TabClsOver")}).bind("mouseout",function(){$(this).children("a").removeClass("TabClsOver");$(this).children("a").addClass("TabCls")}):$(a).bind("mouseover",function(){$(this).children("a").removeClass("TabCls");$(this).children("a").addClass("TabClsOver")}).bind("mouseout",function(){$(this).children("a").removeClass("TabClsOver");$(this).children("a").addClass("TabCls")})}
function bindTabCloseWindow(a){void 0==a?$(".btnTab").bind("click",function(){tabCloseWindow(this)}):$(a).bind("click",function(){tabCloseWindow(a)})}
function tabCloseWindow(a){var b=$(a).parents(".oneTab").attr("tabId");$(a).parents(".oneTab").remove();$("#tab_"+b).remove();0==$(".on").length&&($(".mMenu").removeClass("mMenu-hover"),"first"==position?(0<$(".gTab .oneTab:eq(1)").length?selectTabCss(".gTab .oneTab:eq(1)"):selectTabCss(".gTab .oneTab:eq(0)"),a="#"+$(".gTab .oneTab:eq(1)").attr("tabId"),b="#"+$(".gTab .oneTab:eq(1)").attr("isMenu")):(selectTabCss(".gTab .oneTab:last"),a="#"+$(".gTab .oneTab:last").attr("tabId"),b="#"+$(".gTab .oneTab:last").attr("isMenu")),
null!=b&&"isMenu"==b&&$(a).addClass("mMenu-hover"))}var workbenchPath="";
function loadWorkbench(a){if(0<$("#tab_workbench_container").size())$(".mRight").hide();else{if(null==a||void 0==a||""==a)return;workbenchPath=a;$("#mRight").clone().attr("id","tab_workbench_container").insertAfter("#mRight");-1==globalURL.indexOf("web/default")?$("#tab_workbench_container").load(globalURL+workbenchPath):$("#tab_workbench_container").load("/"+workbenchPath);$("#mRight").hide()}$("#tab_workbench_container").show();$(".gTab .oneTab").removeClass("on");$(".oneTab[tabid='workbench_container']").addClass("on")}
function closeWin(){try{$("#main_msg").remove(),$("#fullBg").remove()}catch(a){}}function loading(a,b){var c="body";b&&(c=b);var d=150;a&&(d=15*a.length);null!=a?showMainMsg(c,d,16,"center","sef_defined","<div>&nbsp;&nbsp;"+a+"</div>","n"):showMainMsg(c,d,16,"center","loading","","n")}
function showMainMsg(a,b,c,d,e,f,g){0==$("#main_msg").size()?$("body").append("<DIV id=fullBg style='z-index: 199999;position:absolute'></DIV><DIV style='z-index: 299999;margin:0;padding:2px;' id=main_msg></DIV>"):$("#main_msg").empty();"loading"==e?f="<div >&nbsp;&nbsp;"+EELang.loading+"</div>":"loadingImg"==e&&(f="<div class=index-loading></div>");"left"==d?$("#main_msg").css({top:$(a).offset().top,left:$(a).offset().left,width:b,height:c}):"center"==d?$("#main_msg").css({top:$(a).offset().top+
($(a).height()-c)/2,left:$(a).offset().left+($(a).width()-b)/2,width:b,height:c}):"right"==d&&$("#main_msg").css({top:$(a).offset().top,left:$(a).offset().left+$(a).width()-b-5,width:b,height:c});$("#fullBg").css({top:$(a).offset().top,left:$(a).offset().left,width:$(a).width(),height:$(a).height()});"y"!=g&&"Y"!=g||$("#main_msg").append("<div class='alertClose'></div>");$("#main_msg").append(f);"y"!=g&&"Y"!=g||$(".alertClose").bind("click",function(){closeWin()})}
function urlCodeDeal(a){if(null==a||0==a.length)return"";var b=[],b=a.split("&");a="";for(var c=0;c<b.length;c++){var d=[],d=b[c].split("=");a=0==c?a+(d[0]+"="):a+("&"+d[0]+"=");1<d.length&&(a+=encodeURIComponent(escape(decodeURIComponent(d[1].split("+").join("%20")))))}return a}
function pageSplitDeal(a,b,c){if(null==b||null==c)return"";if(null==a||void 0==a)a="";a=/pageNo=[0-9]*/gi.test(a)?a.replace(/pageNo=[0-9]*/gi,"pageNo="+b):a+"&pageNo="+b;return a=/pageSize=[0-9]*/gi.test(a)?a.replace(/pageSize=[0-9]*/gi,"pageSize="+c):a+"&pageSize="+c}
function popupDialog(a,b,c,d,e){if(null==d||""==d)d=700;if(null==e||""==e)e=400;0==$("#F"+a).size()&&createFloatDiv(a,b);$("#F"+a).dialog({autoOpen:!1,height:e,width:d,modal:!0,resizable:!0,close:function(b,c){$("#dmLayer").hide();$("#F"+a).empty()}});$("#F"+a).load(c);$("#F"+a).dialog("open")}function createFloatDiv(a,b){var c="<div id='F"+a+"' title='"+b+"'></div> \n";$(document.body).append(c)}
function popupDialog2(a,b,c,d,e){createFloatDiv(a,b);var f=$("#jqmC"+a);$("#F"+a).jqm({ajax:c,target:f,title:b,modal:!0,onLoad:function(){closeWin()},onHide:function(b){f.html("Please Wait...");b.o.remove();b.w.fadeOut(0);0<$("#F"+a).length&&$("#F"+a).remove()},overlay:0}).jqDrag(".jqmdTC").jqResize(".jqHandle");null!=d&&0<d&&$("#F"+a).width(parseInt(d));null!=e&&0<e&&$("#F"+a).height(parseInt(e));$("#F"+a).jqmShow();1<$(".jqmDialog").length&&(b=$(".jqmDialog").offset().top,0>b&&(b=20),$("#F"+a).css("top",
b+20),$("#F"+a).css("left",$(".jqmDialog").offset().left+20+$(".jqmDialog").width()/2));loading(null,"#F"+a)}
function createFloatDiv2(a,b){var c="<div id='F"+a+"' class='jqmDialog'> \n <div class='jqmdTL'><div class='jqmdTR'><div class='jqmdTC'>"+b+"</div></div></div> \n <input type='image' src='"+globalURL+"web/default/js/jquery-plugin/dialog/close.gif' class='jqmdX jqmClose' /> \n <div class='jqmContent' id='jqmC"+a+"'> \n <p>Please wait... <img src='"+globalURL+"web/default/js/jquery-plugin/dialog/busy.gif' alt='loading' /></p>  \n </div> \n\t<div class='jqHandle'></div>  \n  </div> \n";$(document.body).append(c)}
function reloadTree(a){try{null!=webFXTreeHandler&&null!=webFXTreeHandler.selected&&(oldSelectName=webFXTreeHandler.selected.text,1==a?null!=webFXTreeHandler.selected.src&&""!=webFXTreeHandler.selected.src&&webFXTreeHandler.selected.reload():null!=webFXTreeHandler.selected.parentNode.src&&""!=webFXTreeHandler.selected.parentNode.src?webFXTreeHandler.selected.parentNode.reload():null!=webFXTreeHandler.selected.parentNode.parentNode.src&&""!=webFXTreeHandler.selected.parentNode.parentNode.src&&webFXTreeHandler.selected.parentNode.parentNode.reload())}catch(b){}}
function isMobile(){if("undefined"!=typeof orientation)return!0;var a=0<=navigator.platform.indexOf("android"),b=0<=navigator.platform.indexOf("iPhone"),c=0<=navigator.platform.indexOf("iPod"),d=0<=navigator.platform.indexOf("iPad"),e=0<=navigator.platform.indexOf("symbian"),f=0<=navigator.platform.indexOf("series60"),g=0<=navigator.platform.indexOf("BlackBerry");return a||b||c||d||e||f||g}
function insertAuthPt(){var a=window.opener.selectedNodeBak.getAttribute("id"),b=$("#gm_do_authorization_insert_ptnode_role_ouuid").val();callService({serviceName:"u_role_ptnode",paras:"whatuid="+a+"&ouuid="+b,pml:"PM_do_org_role_of_ptnode",target:"PM_do_org_role_of_ptnode"});$("#FPM_do_authorization_insert_ptnode_role").jqmHide()}
function insertAceCode(){var a=$("input[name=propertyuid]").val();if(null==a||""==a)alert(EELang.nameRequired);else{var b=1;0<$("input[name=icon]:checked").length&&(b=$("input[name=icon]:checked").val());var c="",d=$("input[name=mVersion]").val();null==d&&(d="js");$.browser.msie?mirrorEditor?(mirrorEditor.save(),c=mirrorEditor.getValue()):mirrorEditor2&&(mirrorEditor2.save(),c=mirrorEditor2.getValue()):(console.log("hidden_type::"+d),"js"==d?c=jsEditor.getSession().getValue():"css"==d?c=cssEditor.getSession().getValue():
"rhino"==d?c=rhinoEditor.getSession().getValue():"html"==d&&(c=htmlEditor.getSession().getValue()));var e="DO_BO_Icon_Insert";$("input[name=objuid]").val()&&(e="DO_BO_Icon_Update");callService({serviceName:e,callType:"uf",callback:alert(EELang.saveSuccess),paras:"propertyuid="+a+"&formulascript="+encodeURIComponent(c)+"&icon="+b+"&mVersion="+d})}}function confirmDelete(){return confirm(EELang.confirmDelete)}function confirmDeleteWithGrid(){return confirm(EELang.confirmDeleteAndGrid)}
function confirmModify(){return confirm(EELang.confirmModfiy)}function confirmShare(){return confirm(EELang.confirmShare)}function confirmSetup(){return confirm(EELang.confirmSetup)}function confirmCopy(){return confirm(EELang.confirmCopy)}function confirmInit(){return confirm(EELang.confirmInit)}function confirmGenerate(){return confirm(EELang.confirmGenerate)}function confirmServiceToRule(){return confirm(EELang.confirmServiceToRule)}
function confirmImport(){return confirm(EELang.confirmImport)}function confirmRemove(){return confirm(EELang.confirmRemove)}function toDecimal2(a){var b=parseFloat(a);if(isNaN(b))return!1;b=Math.round(100*a)/100;a=b.toString();b=a.indexOf(".");0>b&&(b=a.length,a+=".");for(;a.length<=b+2;)a+="0";return a}function labelFormatter(a,b){return"<div style='font-size:8pt; text-align:center; padding:2px; color:white;'>"+a+"<br/>"+Math.round(b.percent)+"%</div>"}
function generateUUID(){var a=(new Date).getTime();return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,function(b){var c=(a+16*Math.random())%16|0;a=Math.floor(a/16);return("x"==b?c:c&7|8).toString(16)})}
function resourceChange(a){a&&(32==a.value?$(a).siblings("span").css("color","red").html("&nbsp;&nbsp;height:41px"):33==a.value?$(a).siblings("span").css("color","red").html("&nbsp;&nbsp;height:120px"):35==a.value?$(a).siblings("span").css("color","red").html("&nbsp;&nbsp;height:200px"):36==a.value?$(a).siblings("span").css("color","red").html("&nbsp;&nbsp;Size:425X114(px)"):$(a).siblings("span").css("color","red").html(""))}
function gridCheck(a,b,c,d){a?null==$(b).attr("eeplatselected")?(console.log("selected!"),$(b).addClass("addvaluee")):$(b).removeClass("removevaluee"):($(b).parent().parent().removeClass("selected"),0==$(c+" .selected").size()&&$(c+" .list_check:checked:first").parent().parent().addClass("selected"),$(b).attr("eeplatselected")?(console.log("unselected!"),$(b).addClass("removevaluee")):$(b).removeClass("addvaluee"),d.stopPropagation())}var O2String=function(a){return $.toJSON(a)};
function toggleMore(a){var b=$(a).parent().parent().nextAll(":not(.buttonMore)");b.toggle("none"==b.css("display"));b=$(a).text()==EELang.more?"<b>"+EELang.less+"</b>":"<b>"+EELang.more+"</b>";$(a).html(b)}
function judgeSave(){var a=0;$.ajax({type:"GET",url:globalService+"?dataBus=getGlobalContext&r="+Math.random(),async:!1,success:function(b,c){try{var d=eval("b.a"+$("#gm_do_resource_change_logo_resourcepath").data("uuid")+"_w"),e=eval("b.a"+$("#gm_do_resource_change_logo_resourcepath").data("uuid")+"_h"),f=eval("b.a"+$("#loginimage").data("uuid")+"_w"),g=eval("b.a"+$("#loginimage").data("uuid")+"_h");if(void 0==d&&void 0==e&&void 0==f&&void 0==g)a=-1,console.log("Error::i2w == undefined && i2h == undefined");
else{if(41<e||30>=e)a=1;if(180<g||100>g)a=1;if(450<f||400>f)a=1}}catch(h){a=-1,console.log("Error::"+h)}}});return-1==a?!1:1==a?(alert(EELang.logoEcho),!1):!0}function judgeShareID(){$.ajax({type:"get",url:globalURL+"servicecontroller?dataBus=getGlobalContext",async:!1,success:function(a,b){null==a.sharesecret&&loadPml({title:EELang.shareAppConfirm,pml:"appshare_enter_login",target:"_opener"})}})}
function checkBracket(a){var b=[];a=a||"";for(var c=0;c<a.length;c++)if("("==a.charAt(c)&&b.push("("),")"==a.charAt(c))if(b.length)b.pop();else return console.log("\u516c\u5f0f\u62ec\u53f7\u4e0d\u914d\u5bf9\uff0c\u7f3a\u5c11\u5de6\u62ec\u53f7\uff01"),!1;return b.length?(console.log("\u516c\u5f0f\u62ec\u53f7\u4e0d\u914d\u5bf9\uff0c\u7f3a\u5c11\u53f3\u62ec\u53f7\uff01"),!1):!0}
ep.chartConfig=function(){if($("#a40289f0b4cda05f2014cda05f2af0000,#a40289f0b4d1ddda2014d1ddda2db0000").valid()){var a={};a.name=$("#gm_chart_config_name,#gm_chart_config_edit_name").val();a.l10n=$("#gm_chart_config_l10n,#gm_chart_config_edit_l10n").val();a.serviceUid=$("#gm_chart_config_serviceuid,#gm_chart_config_edit_serviceuid").val();a.chartType=$("table.chooseChartType tr.selected").attr("icon_");a.xaxisCol=$("#xaxiscol").val();a.yaxisCol=$("#yaxiscol").val();a.categoryCol=$("#categorycol").val();
a.mainText=$("#maintext").val();a.subText=$("#subtext").val();a.otheroptions=$("#otheroptions").val();a.gridModelName=$("#gridModelName").val();a.bgcolor=$("#bgcolor").val();a.boxicon=$("#boxicon").val();a.linkPaneId=$("#linkPane").val();a.height=$("#height").val();a.width=$("#width").val();""==a.xaxisCol?alert("Please select name(xAxis) column!"):""==a.yaxisCol?alert("Please select value(yAxis) column!"):"bar2"!=a.chartType&&"line2"!=a.chartType||""!=a.categoryCol?"box"==a.chartType&&""==a.linkPaneId?
alert("Please select box linked pane!"):"box"==a.chartType&&""==a.boxicon?alert("Please input box icon!"):(console.log("values::"+O2String(a)),callAction({actionName:"com.exedosoft.plat.action.customize.tools.DOSaveChartConfig",callback:function(a){a="PM_Chart_Config";0==$("#PM_Chart_Config").size()&&(a="PM_Chart_Config_Edit");loadPml({pml:"PM_DO_UI_GridModel_chart_list",target:a})},paras:"paras="+encodeURIComponent(escape(O2String(a)))})):alert("Please select category column!")}};
ep.conditonStatus=function(a){0<$(a).find("option:selected").parent().length&&"cust"==$(a).find("option:selected").parent().attr("stag")?($("#extendModifyView").removeClass("extendadisable").addClass("extenda"),$("#extendDeleteView").removeClass("extendadisable").addClass("extenda"),$("#extendCopyView").removeClass("extendadisable").addClass("extenda")):($("#extendModifyView").removeClass("extenda").addClass("extendadisable"),$("#extendDeleteView").removeClass("extenda").addClass("extendadisable"),
$("#extendCopyView").removeClass("extenda").addClass("extendadisable"))};
ep.reportConfig=function(){console.log("Report Config======================");var a={};a.gridType=$("#gridType").val();a.group1=$("#group1").val();a.sort1=$("#sort1").val();a.issum1=$("#issum1").val();a.group2=$("#group2").val();a.sort2=$("#sort2").val();a.issum2=$("#issum2").val();if("3"==a.gridType){a.groupcol=$("#groupcol").val();a.sortcol=$("#sortcol").val();a.grouprow=$("#grouprow").val();a.sortrow=$("#sortrow").val();a.crosstabvalue=$("#crosstabvalue").val();a.sumtype="";var b=$("#a40289f0b4d2735f4014d2738607c0005 input:checked");
b.each(function(c,d){a.sumtype+=$(d).val();c<b.size()-1&&(a.sumtype+=";")});console.log("sumtype:::"+a.sumtype);if(""==a.groupcol||""==a.grouprow||""==a.crosstabvalue){$("#grouprow").focus();alert(EELang.required);return}}else if(a.group3=$("#group3").val(),a.sort3=$("#sort3").val(),a.issum3=$("#issum3").val(),""==a.group1){$("#group1").focus();alert(EELang.required);return}console.log("values::::::"+O2String(a));callAction({actionName:"com.exedosoft.plat.action.customize.tools.DOSaveReportConfig",
paras:"paras="+encodeURIComponent(escape(O2String(a)))})};var invokeDomId="",invokeDomRef,mirrorEditor,mirrorEditor2,kindEditor,ie6len=1200,isSupportHistory=!0;
function callAction(a){a.btn&&(a.btn.disabled=!0);if(null==a.actionName&&null==a.actionConfigName)a.btn&&(a.btn.disabled=!1);else{var b=!0;!1==a.async&&(b=!1);var c=EELang.dealDaemon;a.msg&&(c=a.msg);if(validate(a.formName)){var d="";a.pmlName&&(d=a.pmlName);null==a.pml&&(a.pml=a.pmlName);null!=a.pml&&-1==a.pml.indexOf("mvccontroller")&&-1==a.pml.indexOf(".pml")&&(d=a.pml,a.pml=globalURL+a.pml+".pml?1=1");var e="";a.paras?(e=a.paras,null!=a.formName&&""!=$.trim(a.formName)&&(e=e+"&"+getParasOfForms(a.formName))):
null==a.paras&&null!=a.formName&&""!=$.trim(a.formName)&&(e=getParasOfForms(a.formName));var f="as";a.callType&&(f=a.callType);a.actionName&&(e="callType="+f+"&greenChannel=true&userDefineClass="+a.actionName+"&"+urlCodeDeal(e));a.actionConfigName&&(e="callType="+f+"&contextServiceName=do_auth_owner_browse&greenChannel=true&actionConfigName="+a.actionConfigName+"&"+urlCodeDeal(e));loading(c);$.ajax({type:"post",url:globalService,data:e,async:b,success:function(b,c){closeWin();if(null!=b&&null!=b.echo_msg&&
""!=$.trim(b.echo_msg)){var f=unescape(b.echo_msg);if(!b.success||"success"!=b.success&&"true"!=b.success){"success"!=f&&"null"!=f&&"undefined"!=f&&alert(f);a.btn&&("A"==a.btn.nodeName?a.btn.flag=!1:a.btn.disabled=!1);return}"success"!=f&&"null"!=f&&"undefined"!=f&&alert(f)}if(null!=a.pml||null!=a.pmlName)if(a.target&&""!=$.trim(a.target))if(f=a.resourcePath,null==f&&(f=a.pml),null!=f&&-1==f.indexOf("?")&&(f+="?1=1"),"_opener_window"===a.target)window.open(f+"&"+getShorterParas(e),title,"height=650,width=1012,left=0,top=0,toolbar=no,menubar=no,scrollbars=yes,resizable=yes,location=no");
else if("_opener_location"===a.target)window.location=f+"&"+getShorterParas(e)+"&isApp=true";else if("_opener_tab"===a.target)createNewTab(d,title,a.pml);else if("_opener"===a.target||"_opener_dialog"===a.target)popupDialog(d,title,a.pml,a.pmlWidth,a.pmlHeight);else if(0<$("#"+a.target).size()&&d===a.target){var f=$(document.body).data(a.target+".pageNo"),m=$(document.body).data(a.target+".pageSize"),r=$(document.body).data(a.target);null!=f&&null!=m&&(r=pageSplitDeal(r,f,m));$("#"+a.target).empty().load(a.pml,
getShorterParas(r))}else $("#"+a.target).empty().load(a.pml);else""!=d?$("#"+d).empty().load(a.pml):alert(EELang.notDefineGoal);a.callback&&a.callback(b);a.btn&&("A"==a.btn.nodeName?a.btn.flag=!1:a.btn.disabled=!1)},dataType:"json"})}else a.btn&&("A"==a.btn.nodeName?a.btn.flag=!1:a.btn.disabled=!1)}}ep.callAction=callAction;
function callService(a){if(null!=a){var b=EELang.dealDaemon;a.msg&&(b=a.msg);if(a.btn)if("A"==a.btn.nodeName){if(a.btn.flag){alert(EELang.clickRepeat);return}a.btn.flag=!0}else a.btn.disabled=!0;var c=!0;!1==a.async&&(c=!1);if(null==a.serviceUid&&null==a.serviceName)a.btn&&("A"==a.btn.nodeName?a.btn.flag=!1:a.btn.disabled=!1);else if(validate(a.formName)){var d="";a.pmlName&&(d=a.pmlName);null==a.pml&&(a.pml=a.pmlName);null!=a.pml&&-1==a.pml.indexOf("mvccontroller")&&-1==a.pml.indexOf(".pml")&&(d=
a.pml,a.pml=globalURL+a.pml+".pml?1=1");if(null==a.echoJs||eval(unescape(a.echoJs))){updateEditorFormValue();var e="";a.paras?(e=a.paras,null!=a.formName&&""!=$.trim(a.formName)&&(e=e+"&"+getParasOfForms(a.formName))):null==a.paras&&null!=a.formName&&""!=$.trim(a.formName)&&(e=getParasOfForms(a.formName));var f="us";a.callType&&(f=a.callType);var g="",g=a.serviceUid?"contextServiceUid="+a.serviceUid:"contextServiceName="+a.serviceName,e=g+"&callType="+f+"&"+urlCodeDeal(e);loading(b);$.ajax({type:"post",
url:globalService,data:e,async:c,success:function(b,c){closeWin();if(null!=b&&null!=b.echo_msg&&""!=$.trim(b.echo_msg)){var f=unescape(b.echo_msg);if(!b.success||"success"!=b.success&&"true"!=b.success){"success"!=f&&"null"!=f&&"undefined"!=f&&alert(f);a.btn&&("A"==a.btn.nodeName?a.btn.flag=!1:a.btn.disabled=!1);return}"success"!=f&&"null"!=f&&"undefined"!=f&&alert(f)}if(null!=b.returnPath&&null!=b.returnPath){var f=b.returnPath.split(","),g=b.targetPane.split(","),D=b.returnTitle.split(",");for(ai=
0;ai<f.length;ai++){var w=f[ai],E=g[ai],F=D[ai];null==F&&(F=EELang.infoDialog);null!=w&&""!=w&&null!=E&&""!=E&&("_opener_window"==E?window.open(w+"&"+getShorterParas(e),F,"height=650,width=1012,left=0,top=0,toolbar=no,menubar=no,scrollbars=yes,resizable=yes,location=no"):"_opener_location"===E?window.location=w+"&"+getShorterParas(e)+"&isApp=true":"_opener_tab"===E?createNewTab(d,F,w):"_opener"===E||"_opener_dialog"===a.target?popupDialog(d,F,w,a.pmlWidth,a.pmlHeight):$("#"+E).empty().load(w))}}g=
EELang.newDialog;null!=a.title&&""!=a.title&&(g=a.title);if(null!=a.pml||null!=a.pmlName)f="",a.conFormName&&(f=getParasOfForms(a.conFormName)),a.target&&""!=$.trim(a.target)?(D=a.resourcePath,null==D&&(D=a.pml),null!=D&&-1==D.indexOf("?")&&(D+="?1=1"),"_opener_window"===a.target?window.open(D+"&"+getShorterParas(e),g,"height=650,width=1012,left=0,top=0,toolbar=no,menubar=no,scrollbars=yes,resizable=yes,location=no"):"_opener_location"===a.target?window.location=D+"&"+getShorterParas(e)+"&isApp=true":
"_opener_tab"===a.target?createNewTab(d,g,a.pml):"_opener"===a.target||"_opener_dialog"===a.target?popupDialog(d,g,a.pml,a.pmlWidth,a.pmlHeight):0<$("#"+a.target).size()?(g=$(document.body).data(a.target+".pageNo"),D=$(document.body).data(a.target+".pageSize"),w=$(document.body).data(a.target),null!=g&&null!=D&&(w=pageSplitDeal(w,g,D),w=w+"&"+getShorterParas(f)),$("#"+a.target).empty().load(a.pml,getShorterParas(urlCodeDeal(w)))):$("#"+a.target).empty().load(a.pml,getShorterParas(urlCodeDeal(f)))):
""!=d?$("#"+d).empty().load(a.pml,getShorterParas(urlCodeDeal(f))):alert(EELang.noDefinedTaegetPane);a.callback&&a.callback(b);a.btn&&("A"==a.btn.nodeName?a.btn.flag=!1:a.btn.disabled=!1)},dataType:"json"})}else a.btn&&("A"==a.btn.nodeName?a.btn.flag=!1:a.btn.disabled=!1)}else a.btn&&("A"==a.btn.nodeName?a.btn.flag=!1:a.btn.disabled=!1)}}ep.callService=callService;
function callServiceJsonp(a){if(null!=a){var b=!0;!1==a.async&&(b=!1);if(null!=a.serviceUid||null!=a.serviceName){var c="";a.paras&&(c=a.paras);var d="us";a.callType&&(d=a.callType);var e="",e=a.serviceUid?"contextServiceUid="+a.serviceUid:"contextServiceName="+a.serviceName,c=e+"&callType="+d+"&"+urlCodeDeal(c);$.ajax({type:"get",url:globalService,data:c,async:b,success:function(b,c){if(null!=b&&null!=b.echo_msg&&""!=$.trim(b.echo_msg)){var d=unescape(b.echo_msg);if(!b.success||"success"!=b.success&&
"true"!=b.success){"success"!=d&&"null"!=d&&"undefined"!=d&&console.log(d);return}"success"!=d&&"null"!=d&&"undefined"!=d&&console.log(d)}a.callback&&a.callback(b)},jsonp:"jsoncallback",dataType:"jsonp"})}}}function callPlatBus(a){null!=a&&null!=a.paras&&$.ajax({type:"POST",url:globalService,data:a.paras,async:!1})}ep.callPlatBus=callPlatBus;
function loadPml(a){null==a||null==a.pml&&null==a.pmlName||(loadPmlHelper(a),a.pmlName&&(a.platCall=!0,ep.myHash.put(a.pmlName,a),window.location.href="#"+a.pmlName))}
function loadPmlHelper(a){if(null!=a&&(null!=a.pml||null!=a.pmlName)){var b="";a.pmlName&&(b=a.pmlName);null==a.pml&&(a.pml=a.pmlName);if(null==a.echoJs||eval(unescape(a.echoJs))){var c=!1;null!=a.pml&&-1==a.pml.indexOf("mvccontroller")&&-1==a.pml.indexOf(".pml")&&-1==a.pml.indexOf(".jsp")&&-1==a.pml.indexOf(".htm")&&(b=a.pml,c=!0,a.pml=globalURL+a.pml+".pml?1=1");null!=a.pml&&-1==a.pml.indexOf("?")&&(a.pml+="?1=1");var d=!0;null!=a.showLoadMsg&&!1==a.showLoadMsg&&(d=!1);var e="";a.paras?(e=a.paras,
null!=a.formName&&""!=$.trim(a.formName)&&(e=e+"&"+getParasOfForms(a.formName))):null==a.paras&&null!=a.formName&&""!=$.trim(a.formName)&&(e=getParasOfForms(a.formName));try{var f=a.resourcePath;null==f&&(f=a.pml);null!=f&&-1==f.indexOf("?")&&(f+="?1=1");if("_opener_window"===a.target)window.open(f+"&"+getShorterParas(e),g,"height=650,width=1012,left=0,top=0,toolbar=no,menubar=no,scrollbars=yes,resizable=yes,location=no");else if("_opener_location"===a.target)window.location=f+"&"+getShorterParas(e)+
"&isApp=true";else if(a.target&&""!=$.trim(a.target)&&"_opener_tab"!=a.target)if("_opener"===a.target||"_opener_dialog"===a.target){var g="";a.title&&(g=a.title);popupDialog(b,g,a.pml+"&"+getShorterParas(urlCodeDeal(e)),a.pmlWidth,a.pmlHeight)}else d&&loading(),a.target===b?$("#"+b).empty().wrap("<div/>").parent().load(a.pml,getShorterParas(urlCodeDeal(e)),function(){$("#"+b).unwrap();d&&closeWin()}):$("#"+a.target).empty().load(a.pml,getShorterParas(urlCodeDeal(e)),function(){d&&closeWin()}),$(document.body).data(b,
e);else if(""!=b)if("_opener"!=a.target&&"_opener_dialog"!=a.target&&"_opener_tab"!=a.target&&c&&0<$("#"+b).size())d&&loading(),$("#"+b).empty().wrap("<div/>").parent().load(a.pml,getShorterParas(urlCodeDeal(e)),function(){$("#"+b).unwrap();d&&closeWin()}),$(document.body).data(b,e);else{g="";a.title&&(g=a.title);var h=a.pml;""!=e&&""!=urlCodeDeal(e)&&(h=a.pml+"&"+getShorterParas(urlCodeDeal(e)));"_opener_tab"===a.target?createNewTab(b,g,h):popupDialog(b,g,h,a.pmlWidth,a.pmlHeight)}}catch(k){}}else a.btn&&
("A"==a.btn.nodeName?a.btn.flag=!1:a.btn.disabled=!1)}}ep.loadPml=loadPml;function getParasOfForms(a){var b="";if(-1!=a.indexOf(" ")){a=a.split(" ");for(var c=0;c<a.length;c++)var d=a[c],b=""==b?$("#"+d).serialize():b+"&"+$("#"+d).serialize()}else b=$("#"+a).serialize();return b}function getShorterParas(a){return null===a?null:a.length>ie6len&&$.browser.msie?a.substr(0,ie6len):7E3<a.length?a.substr(0,7E3):a}
function updateEditorFormValue(){try{for(var a=0;a<parent.frames.length;++a)parent.frames[a].FCK&&parent.frames[a].FCK.UpdateLinkedField()}catch(b){}try{mirrorEditor&&mirrorEditor.save(),mirrorEditor2&&mirrorEditor2.save(),kindEditor&&kindEditor.sync()}catch(c){}}
function sortUp(a,b,c){a=$(a).parent().parent();var d=a.attr("value"),e=a.prev(),f=e.attr("value");if(e.attr("value")){var g=a.clone(!0);a.remove();e.before(g)}callService({serviceName:c,paras:"dataBus=setContext&contextKey="+b+"&contextValue="+f+"&base="+d+"&pre="+f,callType:"uf"})}
function sortDown(a,b,c){a=$(a).parent().parent();var d=a.attr("value"),e=a.next(),f=e.attr("value");if(e.attr("value")){var g=a.clone(!0);a.remove();e.after(g)}callService({serviceName:c,paras:"dataBus=setContext&contextKey="+b+"&contextValue="+d+"&base="+f+"&pre="+d,callType:"uf"})}
function uploadify(a,b,c,d,e,f,g){if(null==c||""==$.trim(c))c="All Files";if(null==d||""==$.trim(d))d="*.*";null==e&&(e=!0);if(null==g||""==g)g="upload_action_uploadify.jsp";var h=generateUUID();b=!1;"upload_action_uploadify_aliyun.jsp"==g&&(b=!0,g="upload_action_uploadify_aliyun.jsp?uuid="+h);var k=$("#"+a).prev().children("input[type='text']"),m;b&&(m=$("#"+a).prev().children("input[type='hidden']"));$("#"+a).uploadify({swf:globalURL+"web/default/js/jquery-plugin/fileuploader/uploadify.swf",formData:{jsessionid:f},
uploader:globalURL+"web/default/"+g+";jsessionid="+f,checkExisting:globalURL+"web/default/upload_action_uploadify_exists.jsp;jsessionid="+f,auto:e,multi:!1,simUploadLimit:2,buttonText:EELang.browse,wmode:"transparent",width:75,height:25,fileTypeDesc:c,fileTypeExts:d,onSelect:function(a){k.val(a.name);m&&m.val(a.name+";"+h)},onProgress:function(a){k.val(a.name)},onCheck:function(a,b){b&&alert("The file "+a.name+" exists on the server.")}})}
function uploadifyMulti(a,b,c,d,e,f,g){if(null==c||""==$.trim(c))c="All Files";if(null==d||""==$.trim(d))d="*.*";null==e&&(e=!0);if(null==g||""==g)g="upload_action_uploadify.jsp";var h=$("#"+a).prev().find(":only-child");$("#"+a).uploadify({swf:globalURL+"web/default/js/jquery-plugin/fileuploader/uploadify.swf",formData:{jsessionid:f},uploader:globalURL+"web/default/"+g+";jsessionid="+f,checkExisting:globalURL+"web/default/upload_action_uploadify_exists.jsp;jsessionid="+f,queueID:b,auto:e,multi:!0,
simUploadLimit:2,buttonText:EELang.browse,wmode:"transparent",width:75,height:25,fileTypeDesc:c,fileTypeExts:d,onSelect:function(a){""==h.val()?h.val(h.val()+a.name):h.val(h.val()+";"+a.name)},onCancel:function(a){h.val(h.val().replace(a.name,""))}})}
function pageSplit(a,b,c){null==$(document.body).data(a)&&$(document.body).data(a,1);$("#"+a+" .firstPage").bind("click",function(){if("1"!=$(document.body).data(a)){$(document.body).data(a,"1");var d=getPmlUrl(b,1,$("#"+a+" .rowSize").text().replace(",",""));loadPml({pml:d,target:b,formName:c})}});$("#"+a+" .prevPage").bind("click",function(){if("1"!=$(document.body).data(a)){var d=parseInt($(document.body).data(a).replace(",",""))-1;$(document.body).data(a,""+d);d=getPmlUrl(b,d,$("#"+a+" .rowSize").text().replace(",",
""));loadPml({pml:d,target:b,formName:c})}});$("#"+a+" .nextPage").bind("click",function(){if(!(parseInt($("#"+a+" .pageNo").text().replace(",",""))>=parseInt($("#"+a+" .pageSize").text().replace(",","")))){var d=parseInt($("#"+a+" .pageNo").text().replace(",",""))+1;$(document.body).data(a,""+d);d=getPmlUrl(b,d,$("#"+a+" .rowSize").text().replace(",",""));loadPml({pml:d,target:b,formName:c})}});$("#"+a+" .lastPage").bind("click",function(){if(parseInt($("#"+a+" .pageNo").text().replace(",",""))!=
$("#"+a+" .pageSize").text().replace(",","")){$(document.body).data(a,$("#"+a+" .pageSize").text().replace(",",""));var d=getPmlUrl(b,$("#"+a+" .pageSize").text().replace(",",""),$("#"+a+" .rowSize").text().replace(",",""));loadPml({pml:d,target:b,formName:c})}})}function getPmlUrl(a,b,c){return globalURL+a+".pml?pageSize="+c+"&pageNo="+b}
try{$.validator.addMethod("mobile",function(a,b){var c=a.length,d=/^(((13[0-9]{1})|(15[0-9]{1}))+\d{8})$/;return this.optional(b)||11==c&&d.test(a)},EELang.vMobile),$.validator.addMethod("phoneChina",function(a,b){var c=/^(0[0-9]{2,3}\-)?([2-9][0-9]{6,7})+(\-[0-9]{1,4})?$/;return this.optional(b)||c.test(a)},EELang.vPhone),$.validator.addMethod("telphone",function(a,b){var c=/^(0[0-9]{2,3}\-)?([2-9][0-9]{6,7})+(\-[0-9]{1,4})?$/;return this.optional(b)||c.test(a)},EELang.vPhone),$.validator.addMethod("Integer",
function(a,b){return this.optional(b)||!checkErrNum(a)},EELang.vInt),$.validator.addMethod("RealNumber",function(a,b){return this.optional(b)||!checkErrFloat(a)},EELang.vNumber),$.validator.addMethod("nochin",function(a,b){return this.optional(b)||!funcChin(a)},EELang.vSBC),$.validator.addMethod("NoSBCDot",function(a,b){return this.optional(b)||!funcSBCDot(a)},EELang.vSBCDOT),$.validator.addMethod("idcard",function(a,b){var c=checkIdCard(a);return this.optional(b)||"yes"==c},"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u8eab\u4efd\u8bc1\u53f7\u7801"),
$.validator.addMethod("gt",function(a,b,c){return 0<$(c).size()&&""!=$(c).val()?a>$(c).val():!0},$.validator.format("\u8f93\u5165\u503c\u5fc5\u987b\u5927\u4e8e{0}!")),$.validator.addMethod("lt",function(a,b,c){return 0<$(c).size()&&""!=$(c).val()?a<$(c).val():!0},$.validator.format("\u8f93\u5165\u503c\u5fc5\u987b\u5c0f\u4e8e{0}!")),$.validator.addMethod("gtdate",function(a,b,c){return 0<$(c).size()&&""!=$(c).val()?(a=new Date(a.replace("-","/")),c=new Date($(c).val().replace("-","/")),a>c):!0},$.validator.format("\u8f93\u5165\u503c\u5fc5\u987b\u5927\u4e8e{0}!")),
$.validator.addMethod("ltdate",function(a,b,c){return 0<$(c).size()&&""!=$(c).val()?(a=new Date(a.replace("-","/")),c=new Date($(c).val().replace("-","/")),a<c):!0},$.validator.format("\u8f93\u5165\u503c\u5fc5\u987b\u5c0f\u4e8e{0}!"))}catch(e$$201){alert(e$$201)}function funcChin(a){return/.*[\u4e00-\u9fa5]+.*$/.test(a)}function funcSBCDot(a){if(null==a)return!1;if(-1<a.indexOf("."))return!0;for(var b=0;b<a.length;b++)if(128<a.charCodeAt(b))return!0}
function checkErrEmail(a){return!/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i.test(a)}
function checkErrUrl(a){return!/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(a)}
function checkErrNum(a){return!/^\d+$/.test(a)}function checkErrFloat(a){return!/^-?(?:\d+|\d{1,3}(?:,\d{3})+)(?:\.\d+)?$/.test(a)}
function checkIdCard(a){var b=["yes","\u8eab\u4efd\u8bc1\u53f7\u7801\u4f4d\u6570\u4e0d\u5bf9!","\u8eab\u4efd\u8bc1\u53f7\u7801\u51fa\u751f\u65e5\u671f\u8d85\u51fa\u8303\u56f4\u6216\u542b\u6709\u975e\u6cd5\u5b57\u7b26!","\u8eab\u4efd\u8bc1\u53f7\u7801\u6821\u9a8c\u9519\u8bef!","\u8eab\u4efd\u8bc1\u5730\u533a\u975e\u6cd5!"],c=[],c=a.split("");if(null=={11:"\u5317\u4eac",12:"\u5929\u6d25",13:"\u6cb3\u5317",14:"\u5c71\u897f",15:"\u5185\u8499\u53e4",21:"\u8fbd\u5b81",22:"\u5409\u6797",23:"\u9ed1\u9f99\u6c5f",
31:"\u4e0a\u6d77",32:"\u6c5f\u82cf",33:"\u6d59\u6c5f",34:"\u5b89\u5fbd",35:"\u798f\u5efa",36:"\u6c5f\u897f",37:"\u5c71\u4e1c",41:"\u6cb3\u5357",42:"\u6e56\u5317",43:"\u6e56\u5357",44:"\u5e7f\u4e1c",45:"\u5e7f\u897f",46:"\u6d77\u5357",50:"\u91cd\u5e86",51:"\u56db\u5ddd",52:"\u8d35\u5dde",53:"\u4e91\u5357",54:"\u897f\u85cf",61:"\u9655\u897f",62:"\u7518\u8083",63:"\u9752\u6d77",64:"\u5b81\u590f",65:"\u65b0\u7586",71:"\u53f0\u6e7e",81:"\u9999\u6e2f",82:"\u6fb3\u95e8",91:"\u56fd\u5916"}[parseInt(a.substr(0,
2))])return b[4];switch(a.length){case 15:return ereg=0==(parseInt(a.substr(6,2))+1900)%4||0==(parseInt(a.substr(6,2))+1900)%100&&0==(parseInt(a.substr(6,2))+1900)%4?/^[1-9][0-9]{5}[0-9]{2}((01|03|05|07|08|10|12)(0[1-9]|[1-2][0-9]|3[0-1])|(04|06|09|11)(0[1-9]|[1-2][0-9]|30)|02(0[1-9]|[1-2][0-9]))[0-9]{3}$/:/^[1-9][0-9]{5}[0-9]{2}((01|03|05|07|08|10|12)(0[1-9]|[1-2][0-9]|3[0-1])|(04|06|09|11)(0[1-9]|[1-2][0-9]|30)|02(0[1-9]|1[0-9]|2[0-8]))[0-9]{3}$/,ereg.test(a)?b[0]:b[2];case 18:return ereg=0==parseInt(a.substr(6,
4))%4||0==parseInt(a.substr(6,4))%100&&0==parseInt(a.substr(6,4))%4?/^[1-9][0-9]{5}19[0-9]{2}((01|03|05|07|08|10|12)(0[1-9]|[1-2][0-9]|3[0-1])|(04|06|09|11)(0[1-9]|[1-2][0-9]|30)|02(0[1-9]|[1-2][0-9]))[0-9]{3}[0-9Xx]$/:/^[1-9][0-9]{5}19[0-9]{2}((01|03|05|07|08|10|12)(0[1-9]|[1-2][0-9]|3[0-1])|(04|06|09|11)(0[1-9]|[1-2][0-9]|30)|02(0[1-9]|1[0-9]|2[0-8]))[0-9]{3}[0-9Xx]$/,ereg.test(a)?(a=7*(parseInt(c[0])+parseInt(c[10]))+9*(parseInt(c[1])+parseInt(c[11]))+10*(parseInt(c[2])+parseInt(c[12]))+5*(parseInt(c[3])+
parseInt(c[13]))+8*(parseInt(c[4])+parseInt(c[14]))+4*(parseInt(c[5])+parseInt(c[15]))+2*(parseInt(c[6])+parseInt(c[16]))+1*parseInt(c[7])+6*parseInt(c[8])+3*parseInt(c[9]),a="10X98765432".substr(a%11,1),a==c[17]?b[0]:b[3]):b[2];default:return b[1]}}function checkNotMobile(a){return!/(\d){11}/.test(a)}function checkNotTelphone(a){return!/(^[0-9]{3,4}\-[0-9]{3,8}$)|(^[0-9]{3,8}$)|(^\([0-9]{3,4}\)[0-9]{3,8}$)/.test(a)}function checkBlank(a){return/(\s)/.test(a)}
function toggleContent(a){$(a).parents(".box").find(".box-content").toggle();"icon-chevron-up"==$(a).find("i").attr("class")?$(a).find("i").attr("class","icon-chevron-down"):$(a).find("i").attr("class","icon-chevron-up")}function validate(a){if(null!=a&&""!=a){a=a.split(" ");for(var b=0;b<a.length;b++){var c=$.trim(a[b]),c=$("#"+c);try{var d=c.validate({ignoreTitle:!0});if(!c.valid())return d.focusInvalid(),!1}catch(e){}}}return!0}ep.validate=validate;
ep.noty=function(a,b){null==b&&(b="information");var c=noty({text:a,type:b,dismissQueue:!0,layout:"bottomRight",theme:"defaultTheme",maxVisible:10});console.log("html: "+c.options.id)};
ep.myHash=new function(a){this.map={};this.limit=20;void 0!=a&&(this.limit=a);this.array=[];this.put=function(a,c){if(!(0<this.array.length&&this.array[this.array.length-1]===a)&&(this.map[a]=c,this.array.push(a),this.size()>this.limit)){var d=this.array.shift();this.del(d)}};this.back=function(){if(1<this.size()){var a=this.array[this.size()-2],a=this.map[a],c=this.array.pop();this.del(c);loadPmlHelper(a)}};this.get=function(a){return this.map[a]};this.has=function(a){return a in this.map};this.del=
function(a){delete this.map[a]};this.size=function(){return this.array.length}};isSupportHistory&&$(window).hashchange(function(){var a=location.hash.substring(1),a=ep.myHash.get(a);void 0!==a&&void 0!==a.platCall&&(a.platCall?a.platCall=!1:loadPmlHelper(a))});
